[{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\Hero.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\LanguageSwitcher.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\NavLink.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\PaymentModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\PremiumGate.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\PremiumGateModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ProgressBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ProtectedRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ResourceSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\SearchBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\SpanishPixel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\SubscriptionGate.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\TemplateCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ThemeToggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\UserInfoCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\WhatsAppButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\WhatsAppButtonES.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\admin\\AdminLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\admin\\FunnelChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\admin\\ROITable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\canva\\BottomNav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\canva\\CaptionCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\canva\\CategoryNav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\canva\\ContentFilterDropdown.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\canva\\FilterChips.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\canva\\HeroBanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\canva\\PremiumCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\canva\\SectionHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\canva\\ToolCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\AttributionSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\BatchRollbackModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\BulkAddModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\CaptionCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\CaptionEditModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\CaptionMatchTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\ContentFilters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\ContentSection.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has missing dependencies: 'filterItems' and 'sortItems'. Either include them or remove the dependency array.","line":150,"column":6,"nodeType":"ArrayExpression","endLine":150,"endColumn":76,"suggestions":[{"desc":"Update the dependencies array to be: [contentItems, languageFilter, sortItems, filterItems]","fix":{"range":[5401,5471],"text":"[contentItems, languageFilter, sortItems, filterItems]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has missing dependencies: 'filterItems' and 'sortItems'. Either include them or remove the dependency array.","line":153,"column":5,"nodeType":"ArrayExpression","endLine":153,"endColumn":59,"suggestions":[{"desc":"Update the dependencies array to be: [sortItems, filterItems, contentItems]","fix":{"range":[5592,5646],"text":"[sortItems, filterItems, contentItems]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has missing dependencies: 'filterItems' and 'sortItems'. Either include them or remove the dependency array.","line":157,"column":5,"nodeType":"ArrayExpression","endLine":157,"endColumn":59,"suggestions":[{"desc":"Update the dependencies array to be: [sortItems, filterItems, contentItems]","fix":{"range":[5796,5850],"text":"[sortItems, filterItems, contentItems]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has missing dependencies: 'filterItems' and 'sortItems'. Either include them or remove the dependency array.","line":161,"column":5,"nodeType":"ArrayExpression","endLine":161,"endColumn":59,"suggestions":[{"desc":"Update the dependencies array to be: [sortItems, filterItems, contentItems]","fix":{"range":[6002,6056],"text":"[sortItems, filterItems, contentItems]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has missing dependencies: 'filterCaptions' and 'sortItems'. Either include them or remove the dependency array.","line":213,"column":5,"nodeType":"ArrayExpression","endLine":213,"endColumn":39,"suggestions":[{"desc":"Update the dependencies array to be: [sortItems, filterCaptions, captions]","fix":{"range":[7608,7642],"text":"[sortItems, filterCaptions, captions]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has missing dependencies: 'filterCaptions' and 'sortItems'. Either include them or remove the dependency array.","line":217,"column":5,"nodeType":"ArrayExpression","endLine":217,"endColumn":39,"suggestions":[{"desc":"Update the dependencies array to be: [sortItems, filterCaptions, captions]","fix":{"range":[7784,7818],"text":"[sortItems, filterCaptions, captions]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'sortItems'. Either include it or remove the dependency array.","line":227,"column":6,"nodeType":"ArrayExpression","endLine":227,"endColumn":37,"suggestions":[{"desc":"Update the dependencies array to be: [tools, sortItems, searchQuery]","fix":{"range":[8096,8127],"text":"[tools, sortItems, searchQuery]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":281,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":281,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9999,10002],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9999,10002],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":317,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":317,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11169,11172],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11169,11172],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":344,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":344,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11869,11872],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11869,11872],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from \"react\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Video, Image, BookOpen, FileText, Wrench, Download, Plus, ArrowUpDown, Clock, ArrowDown, ArrowUp, Sparkles, ChevronDown, FileStack, Globe } from \"lucide-react\";\nimport { EditableCard } from \"./EditableCard\";\nimport { CaptionCard } from \"./CaptionCard\";\nimport { SortableCard } from \"./SortableCard\";\nimport { CreateItemModal } from \"./CreateItemModal\";\nimport { CreateCaptionModal } from \"./CreateCaptionModal\";\nimport { FeaturedCard } from \"./FeaturedCard\";\nimport { SelectFeaturedModal } from \"./SelectFeaturedModal\";\nimport { BulkAddModal } from \"./BulkAddModal\";\nimport { ContentFilters } from \"./ContentFilters\";\nimport { ContentItem, Caption, MarketingTool, useCreateContentItem, useCreateCaption, useCreateMarketingTool, useUpdateDisplayOrder, useUpdateContentItem } from \"@/hooks/useContent\";\nimport { useInvalidateContent } from \"@/hooks/useInvalidateContent\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport {\n  DndContext,\n  closestCenter,\n  KeyboardSensor,\n  PointerSensor,\n  useSensor,\n  useSensors,\n  DragEndEvent,\n} from \"@dnd-kit/core\";\nimport {\n  arrayMove,\n  SortableContext,\n  sortableKeyboardCoordinates,\n  rectSortingStrategy,\n} from \"@dnd-kit/sortable\";\n\ntype EditableItem = {\n  id: string;\n  title: string;\n  url: string;\n  description?: string | null;\n  is_active?: boolean;\n};\n\ntype EditableCaption = {\n  id: string;\n  destination: string;\n  text: string;\n  hashtags: string;\n  is_active?: boolean;\n};\n\ninterface ContentSectionProps {\n  contentItems: ContentItem[];\n  captions: Caption[];\n  tools: MarketingTool[];\n  onEditItem: (item: EditableItem) => void;\n  onEditCaption: (caption: EditableCaption) => void;\n  onDeleteItem?: (id: string, title: string) => void;\n  onDeleteCaption?: (id: string, title: string) => void;\n  onDeleteTool?: (id: string, title: string) => void;\n}\n\ntype SortOrder = \"recent\" | \"oldest\" | \"custom\";\n\nexport const ContentSection = ({\n  contentItems,\n  captions,\n  tools,\n  onEditItem,\n  onEditCaption,\n  onDeleteItem,\n  onDeleteCaption,\n  onDeleteTool,\n}: ContentSectionProps) => {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [createModalOpen, setCreateModalOpen] = useState(false);\n  const [createCaptionModalOpen, setCreateCaptionModalOpen] = useState(false);\n  const [selectFeaturedModalOpen, setSelectFeaturedModalOpen] = useState(false);\n  const [bulkAddModalOpen, setBulkAddModalOpen] = useState(false);\n  const [createType, setCreateType] = useState<\"content\" | \"tool\">(\"content\");\n  const [currentTab, setCurrentTab] = useState(\"videos\");\n  const [sortOrder, setSortOrder] = useState<SortOrder>(\"recent\"); // Default to recent\n  const [languageFilter, setLanguageFilter] = useState<\"all\" | \"pt\" | \"es\">(\"all\");\n  const [featuredLanguageTab, setFeaturedLanguageTab] = useState<\"pt\" | \"es\">(\"pt\");\n  \n  // Filter states\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [typeFilter, setTypeFilter] = useState(\"all\");\n  const [categoryFilter, setCategoryFilter] = useState(\"all\");\n\n  const createContentItem = useCreateContentItem();\n  const createCaption = useCreateCaption();\n  const createMarketingTool = useCreateMarketingTool();\n  const updateDisplayOrder = useUpdateDisplayOrder();\n  const updateContentItem = useUpdateContentItem();\n  const { invalidateAll } = useInvalidateContent();\n\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: {\n        distance: 8,\n      },\n    }),\n    useSensor(KeyboardSensor, {\n      coordinateGetter: sortableKeyboardCoordinates,\n    })\n  );\n\n  // Sort function\n  const sortItems = <T extends { created_at?: string }>(items: T[]): T[] => {\n    if (sortOrder === \"custom\") return items;\n    return [...items].sort((a, b) => {\n      const dateA = new Date(a.created_at || 0).getTime();\n      const dateB = new Date(b.created_at || 0).getTime();\n      return sortOrder === \"recent\" ? dateB - dateA : dateA - dateB;\n    });\n  };\n\n  // Apply search and category filters\n  const filterItems = <T extends { title?: string; category?: string | null }>(items: T[]): T[] => {\n    return items.filter(item => {\n      const matchesSearch = !searchQuery || \n        (item.title?.toLowerCase().includes(searchQuery.toLowerCase()));\n      const matchesCategory = categoryFilter === \"all\" || item.category === categoryFilter;\n      return matchesSearch && matchesCategory;\n    });\n  };\n\n  // Filter and sort content by type\n  const videoItems = useMemo(() => {\n    let filtered = contentItems.filter(item => ['video', 'seasonal'].includes(item.type));\n    \n    // Apply language filter\n    if (languageFilter !== 'all') {\n      filtered = filtered.filter(item => {\n        const itemLang = item.language || 'pt';\n        return itemLang === languageFilter;\n      });\n    }\n    \n    return sortItems(filterItems(filtered));\n  }, [contentItems, sortOrder, searchQuery, categoryFilter, languageFilter]);\n  const feedItems = useMemo(() => \n    sortItems(filterItems(contentItems.filter(item => item.type === 'feed'))),\n    [contentItems, sortOrder, searchQuery, categoryFilter]\n  );\n  const storyItems = useMemo(() => \n    sortItems(filterItems(contentItems.filter(item => ['story', 'weekly-story'].includes(item.type)))),\n    [contentItems, sortOrder, searchQuery, categoryFilter]\n  );\n  const resourceItems = useMemo(() => \n    sortItems(filterItems(contentItems.filter(item => ['resource', 'download'].includes(item.type)))),\n    [contentItems, sortOrder, searchQuery, categoryFilter]\n  );\n\n  // Featured items separated by language\n  const featuredPT = useMemo(() => \n    contentItems.filter(item => \n      item.is_featured && \n      ['video', 'seasonal'].includes(item.type) &&\n      (item.language === 'pt' || !item.language)\n    ),\n    [contentItems]\n  );\n\n  const featuredES = useMemo(() => \n    contentItems.filter(item => \n      item.is_featured && \n      ['video', 'seasonal'].includes(item.type) &&\n      item.language === 'es'\n    ),\n    [contentItems]\n  );\n\n  // Legacy: total featured items for backwards compatibility\n  const featuredItems = useMemo(() => \n    [...featuredPT, ...featuredES],\n    [featuredPT, featuredES]\n  );\n\n  // Available videos for featuring (filtered by active language tab)\n  const availableForFeaturedByLanguage = useMemo(() => {\n    const lang = featuredLanguageTab;\n    return videoItems.filter(item => \n      !item.is_featured && \n      (lang === 'pt' \n        ? (item.language === 'pt' || !item.language) \n        : item.language === 'es'\n      )\n    );\n  }, [videoItems, featuredLanguageTab]);\n\n  // Filter captions\n  const filterCaptions = (captionList: Caption[]): Caption[] => {\n    return captionList.filter(caption => {\n      const matchesSearch = !searchQuery || \n        caption.destination?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        caption.text?.toLowerCase().includes(searchQuery.toLowerCase());\n      return matchesSearch;\n    });\n  };\n\n  const nacionalCaptions = useMemo(() => \n    sortItems(filterCaptions(captions.filter(c => c.category === 'nacional'))),\n    [captions, sortOrder, searchQuery]\n  );\n  const internacionalCaptions = useMemo(() => \n    sortItems(filterCaptions(captions.filter(c => c.category === 'internacional'))),\n    [captions, sortOrder, searchQuery]\n  );\n\n  const sortedTools = useMemo(() => {\n    const filtered = tools.filter(tool => {\n      const matchesSearch = !searchQuery || \n        tool.title?.toLowerCase().includes(searchQuery.toLowerCase());\n      return matchesSearch;\n    });\n    return sortItems(filtered);\n  }, [tools, sortOrder, searchQuery]);\n\n  // Sort filter component\n  const SortFilter = () => (\n    <Select value={sortOrder} onValueChange={(v) => setSortOrder(v as SortOrder)}>\n      <SelectTrigger className=\"w-48\">\n        <ArrowUpDown className=\"w-4 h-4 mr-2\" />\n        <SelectValue />\n      </SelectTrigger>\n      <SelectContent>\n        <SelectItem value=\"recent\">\n          <div className=\"flex items-center gap-2\">\n            <Clock className=\"w-4 h-4\" />\n            Mais recentes\n          </div>\n        </SelectItem>\n        <SelectItem value=\"oldest\">\n          <div className=\"flex items-center gap-2\">\n            <ArrowUp className=\"w-4 h-4\" />\n            Mais antigos\n          </div>\n        </SelectItem>\n        <SelectItem value=\"custom\">\n          <div className=\"flex items-center gap-2\">\n            <ArrowDown className=\"w-4 h-4\" />\n            Ordem manual (drag)\n          </div>\n        </SelectItem>\n      </SelectContent>\n    </Select>\n  );\n\n  const handleDragEnd = (event: DragEndEvent, items: { id: string }[], table: \"content_items\" | \"captions\" | \"marketing_tools\") => {\n    const { active, over } = event;\n\n    if (over && active.id !== over.id) {\n      const oldIndex = items.findIndex((item) => item.id === active.id);\n      const newIndex = items.findIndex((item) => item.id === over.id);\n\n      if (oldIndex !== -1 && newIndex !== -1) {\n        const newItems = arrayMove(items, oldIndex, newIndex);\n        const updates = newItems.map((item, index) => ({\n          id: item.id,\n          display_order: index,\n        }));\n\n        // Determine query key based on table\n        const queryKey = table === \"content_items\" \n          ? [\"all-content-items\"] \n          : table === \"captions\" \n          ? [\"all-captions\"] \n          : [\"all-marketing-tools\"];\n\n        // OPTIMISTIC UPDATE - update cache immediately\n        queryClient.setQueryData(queryKey, (old: any[] | undefined) => {\n          if (!old) return old;\n          const updated = [...old];\n          updates.forEach((update) => {\n            const itemIndex = updated.findIndex(i => i.id === update.id);\n            if (itemIndex !== -1) {\n              updated[itemIndex] = { ...updated[itemIndex], display_order: update.display_order };\n            }\n          });\n          return updated.sort((a, b) => (a.display_order || 0) - (b.display_order || 0));\n        });\n\n        updateDisplayOrder.mutate(\n          { table, items: updates },\n          {\n            onSuccess: () => {\n              toast({\n                title: \"Ordem atualizada\",\n                description: \"A nova ordem foi salva com sucesso.\",\n              });\n            },\n            onError: () => {\n              // Revert on error by refetching\n              queryClient.invalidateQueries({ queryKey });\n              toast({\n                title: \"Erro\",\n                description: \"N√£o foi poss√≠vel salvar a nova ordem.\",\n                variant: \"destructive\",\n              });\n            },\n          }\n        );\n      }\n    }\n  };\n\n  const handleCreateContent = async (data: any) => {\n    try {\n      if (createType === \"tool\") {\n        await createMarketingTool.mutateAsync({\n          title: data.title,\n          url: data.url,\n          icon: data.icon,\n          is_new: data.is_new,\n          is_active: data.is_active,\n        });\n      } else {\n        await createContentItem.mutateAsync(data);\n      }\n      toast({\n        title: \"Item criado\",\n        description: \"O novo item foi adicionado com sucesso.\",\n      });\n      setCreateModalOpen(false);\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"N√£o foi poss√≠vel criar o item.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleCreateCaption = async (data: any) => {\n    try {\n      await createCaption.mutateAsync(data);\n      toast({\n        title: \"Legenda criada\",\n        description: \"A nova legenda foi adicionada com sucesso.\",\n      });\n      setCreateCaptionModalOpen(false);\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"N√£o foi poss√≠vel criar a legenda.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const openCreateModal = (type: \"content\" | \"tool\") => {\n    setCreateType(type);\n    setCreateModalOpen(true);\n  };\n\n  // Bulk add handler\n  const handleBulkAdd = async (items: { title: string; url: string; type: string; category: string | null; icon: string }[]) => {\n    try {\n      for (const item of items) {\n        await createContentItem.mutateAsync({\n          title: item.title,\n          url: item.url,\n          type: item.type,\n          category: item.category,\n          icon: item.icon,\n          is_new: false,\n          is_active: true,\n        });\n      }\n      toast({\n        title: \"Importa√ß√£o conclu√≠da\",\n        description: `${items.length} item(s) foram adicionados com sucesso.`,\n      });\n      setBulkAddModalOpen(false);\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"N√£o foi poss√≠vel importar alguns itens.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  // Featured handling\n  const handleSelectFeatured = async (id: string) => {\n    try {\n      await supabase\n        .from(\"content_items\")\n        .update({ is_featured: true })\n        .eq(\"id\", id);\n      \n      invalidateAll(); // Invalidate all caches for immediate sync\n      toast({\n        title: \"Pr√©via adicionada\",\n        description: \"O v√≠deo foi adicionado √† pr√©via.\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"N√£o foi poss√≠vel adicionar √† pr√©via.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleRemoveFromFeatured = async (id: string) => {\n    try {\n      await supabase\n        .from(\"content_items\")\n        .update({ is_featured: false })\n        .eq(\"id\", id);\n      \n      invalidateAll(); // Invalidate all caches for immediate sync\n      toast({\n        title: \"Pr√©via removida\",\n        description: \"O v√≠deo foi removido da pr√©via.\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"N√£o foi poss√≠vel remover da pr√©via.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleUploadFeaturedImage = async (id: string, file: File) => {\n    try {\n      // Generate unique filename\n      const ext = file.name.split('.').pop();\n      const fileName = `featured/${id}_${Date.now()}.${ext}`;\n      \n      // Upload to Storage\n      const { error: uploadError } = await supabase.storage\n        .from(\"thumbnails\")\n        .upload(fileName, file, { upsert: true });\n      \n      if (uploadError) throw uploadError;\n      \n      // Get public URL\n      const { data: urlData } = supabase.storage\n        .from(\"thumbnails\")\n        .getPublicUrl(fileName);\n      \n      // Update content_item with new image_url\n      const { error: updateError } = await supabase\n        .from(\"content_items\")\n        .update({ image_url: urlData.publicUrl })\n        .eq(\"id\", id);\n      \n      if (updateError) throw updateError;\n      \n      invalidateAll(); // Invalidate all caches for immediate sync\n      toast({\n        title: \"Imagem atualizada\",\n        description: \"A imagem da pr√©via foi atualizada com sucesso.\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"N√£o foi poss√≠vel fazer upload da imagem.\",\n        variant: \"destructive\",\n      });\n      console.error(error);\n    }\n  };\n\n  const handleUpdateImageUrl = async (id: string, imageUrl: string) => {\n    try {\n      const { error } = await supabase\n        .from(\"content_items\")\n        .update({ image_url: imageUrl })\n        .eq(\"id\", id);\n      \n      if (error) throw error;\n      \n      invalidateAll(); // Invalidate all caches for immediate sync\n      toast({\n        title: \"Imagem atualizada\",\n        description: \"A URL da imagem foi salva com sucesso.\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"N√£o foi poss√≠vel atualizar a imagem.\",\n        variant: \"destructive\",\n      });\n      console.error(error);\n    }\n  };\n\n  const handleToggleFeatured = async (id: string) => {\n    const item = contentItems.find(i => i.id === id);\n    if (!item) return;\n    \n    // Check if marking as featured and limit is reached per language\n    const itemLanguage = item.language || 'pt';\n    const featuredForLanguage = itemLanguage === 'es' ? featuredES : featuredPT;\n    \n    if (!item.is_featured && featuredForLanguage.length >= 10) {\n      toast({\n        title: \"Limite atingido\",\n        description: `Voc√™ j√° possui 10 itens de pr√©via em ${itemLanguage === 'es' ? 'Espanhol' : 'Portugu√™s'}. Remova um para adicionar outro.`,\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    try {\n      await supabase\n        .from(\"content_items\")\n        .update({ is_featured: !item.is_featured })\n        .eq(\"id\", id);\n      \n      invalidateAll(); // Invalidate all caches for immediate sync\n      toast({\n        title: item.is_featured ? \"Pr√©via removida\" : \"Pr√©via adicionada\",\n        description: item.is_featured \n          ? \"O v√≠deo foi removido da pr√©via.\" \n          : \"O v√≠deo foi adicionado √† pr√©via.\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"N√£o foi poss√≠vel atualizar a pr√©via.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const renderVideoGrid = (items: ContentItem[], table: \"content_items\") => (\n    <DndContext\n      sensors={sensors}\n      collisionDetection={closestCenter}\n      onDragEnd={(event) => handleDragEnd(event, items, table)}\n    >\n      <SortableContext items={items.map(i => i.id)} strategy={rectSortingStrategy}>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n          {items.map((item) => (\n            <SortableCard key={item.id} id={item.id} disabled={sortOrder !== \"custom\"}>\n              <EditableCard\n                id={item.id}\n                title={item.title}\n                url={item.url}\n                icon={item.icon}\n                description={item.description}\n                hasCaption={!!item.description?.trim()}\n                isActive={item.is_active}\n                isNew={item.is_new}\n                isFeatured={item.is_featured}\n                onToggleFeatured={handleToggleFeatured}\n                onEdit={onEditItem}\n                onDelete={onDeleteItem}\n              />\n            </SortableCard>\n          ))}\n        </div>\n      </SortableContext>\n    </DndContext>\n  );\n\n  const renderItemGrid = (items: ContentItem[], table: \"content_items\") => (\n    <DndContext\n      sensors={sensors}\n      collisionDetection={closestCenter}\n      onDragEnd={(event) => handleDragEnd(event, items, table)}\n    >\n      <SortableContext items={items.map(i => i.id)} strategy={rectSortingStrategy}>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n          {items.map((item) => (\n            <SortableCard key={item.id} id={item.id} disabled={sortOrder !== \"custom\"}>\n              <EditableCard\n                id={item.id}\n                title={item.title}\n                url={item.url}\n                icon={item.icon}\n                description={item.description}\n                hasCaption={!!item.description?.trim()}\n                isActive={item.is_active}\n                isNew={item.is_new}\n                onEdit={onEditItem}\n                onDelete={onDeleteItem}\n              />\n            </SortableCard>\n          ))}\n        </div>\n      </SortableContext>\n    </DndContext>\n  );\n\n  const renderCaptionGrid = (captionList: Caption[], table: \"captions\") => (\n    <DndContext\n      sensors={sensors}\n      collisionDetection={closestCenter}\n      onDragEnd={(event) => handleDragEnd(event, captionList, table)}\n    >\n      <SortableContext items={captionList.map(c => c.id)} strategy={rectSortingStrategy}>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {captionList.map((caption) => (\n            <SortableCard key={caption.id} id={caption.id} disabled={sortOrder !== \"custom\"}>\n              <CaptionCard\n                id={caption.id}\n                destination={caption.destination}\n                text={caption.text}\n                hashtags={caption.hashtags}\n                isActive={caption.is_active}\n                onEdit={onEditCaption}\n                onDelete={onDeleteCaption}\n              />\n            </SortableCard>\n          ))}\n        </div>\n      </SortableContext>\n    </DndContext>\n  );\n\n  const renderToolGrid = (toolList: MarketingTool[]) => (\n    <DndContext\n      sensors={sensors}\n      collisionDetection={closestCenter}\n      onDragEnd={(event) => handleDragEnd(event, toolList, \"marketing_tools\")}\n    >\n      <SortableContext items={toolList.map(t => t.id)} strategy={rectSortingStrategy}>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n          {toolList.map((tool) => (\n            <SortableCard key={tool.id} id={tool.id} disabled={sortOrder !== \"custom\"}>\n              <EditableCard\n                id={tool.id}\n                title={tool.title}\n                url={tool.url}\n                icon={tool.icon}\n                isActive={tool.is_active}\n                isNew={tool.is_new}\n                onEdit={onEditItem}\n                onDelete={onDeleteTool}\n              />\n            </SortableCard>\n          ))}\n        </div>\n      </SortableContext>\n    </DndContext>\n  );\n\n  return (\n    <>\n      <Tabs value={currentTab} onValueChange={setCurrentTab} className=\"w-full\">\n        <TabsList className=\"w-full flex-wrap h-auto gap-2 bg-muted/50 p-2\">\n          <TabsTrigger value=\"destaque\" className=\"flex items-center gap-2\">\n            <Sparkles className=\"h-4 w-4\" />\n            Pr√©via (PT: {featuredPT.length} | ES: {featuredES.length})\n          </TabsTrigger>\n          <TabsTrigger value=\"videos\" className=\"flex items-center gap-2\">\n            <Video className=\"h-4 w-4\" />\n            V√≠deos ({videoItems.length})\n          </TabsTrigger>\n          <TabsTrigger value=\"artes\" className=\"flex items-center gap-2\">\n            <Image className=\"h-4 w-4\" />\n            Artes ({feedItems.length})\n          </TabsTrigger>\n          <TabsTrigger value=\"stories\" className=\"flex items-center gap-2\">\n            <BookOpen className=\"h-4 w-4\" />\n            Stories ({storyItems.length})\n          </TabsTrigger>\n          <TabsTrigger value=\"legendas-nac\" className=\"flex items-center gap-2\">\n            <FileText className=\"h-4 w-4\" />\n            Legendas Nac. ({nacionalCaptions.length})\n          </TabsTrigger>\n          <TabsTrigger value=\"legendas-int\" className=\"flex items-center gap-2\">\n            <FileText className=\"h-4 w-4\" />\n            Legendas Int. ({internacionalCaptions.length})\n          </TabsTrigger>\n          <TabsTrigger value=\"ferramentas\" className=\"flex items-center gap-2\">\n            <Wrench className=\"h-4 w-4\" />\n            Ferramentas ({tools.length})\n          </TabsTrigger>\n          <TabsTrigger value=\"recursos\" className=\"flex items-center gap-2\">\n            <Download className=\"h-4 w-4\" />\n            Recursos ({resourceItems.length})\n          </TabsTrigger>\n        </TabsList>\n\n        {/* Destaque Tab */}\n        <TabsContent value=\"destaque\" className=\"mt-6\">\n          <Card className=\"mb-6 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-950/20 dark:to-orange-950/20 border-amber-200 dark:border-amber-800\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Sparkles className=\"h-5 w-5 text-amber-500\" />\n                Pr√©via de M√≠dias por Idioma\n              </CardTitle>\n              <p className=\"text-sm text-muted-foreground\">\n                Gerencie at√© 10 itens de pr√©via para cada idioma. Os usu√°rios ver√£o apenas os itens do idioma selecionado.\n              </p>\n            </CardHeader>\n          </Card>\n          \n          {/* Sub-tabs by language */}\n          <Tabs value={featuredLanguageTab} onValueChange={(v) => setFeaturedLanguageTab(v as \"pt\" | \"es\")}>\n            <TabsList className=\"mb-4\">\n              <TabsTrigger value=\"pt\" className=\"flex items-center gap-2\">\n                üáßüá∑ Pr√©via PT ({featuredPT.length}/10)\n              </TabsTrigger>\n              <TabsTrigger value=\"es\" className=\"flex items-center gap-2\">\n                üá™üá∏ Pr√©via ES ({featuredES.length}/10)\n              </TabsTrigger>\n            </TabsList>\n            \n            {/* PT Content */}\n            <TabsContent value=\"pt\">\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\n                {featuredPT.map(item => (\n                  <FeaturedCard\n                    key={item.id}\n                    item={item}\n                    onUploadImage={handleUploadFeaturedImage}\n                    onUpdateImageUrl={handleUpdateImageUrl}\n                    onRemoveFromFeatured={handleRemoveFromFeatured}\n                    onEdit={onEditItem}\n                  />\n                ))}\n                \n                {/* Slot to add new featured item (if < 10) */}\n                {featuredPT.length < 10 && (\n                  <Button\n                    variant=\"outline\"\n                    className=\"aspect-[9/16] h-auto border-dashed flex flex-col items-center justify-center gap-2\"\n                    onClick={() => setSelectFeaturedModalOpen(true)}\n                  >\n                    <Plus className=\"h-8 w-8\" />\n                    <span className=\"text-sm\">Adicionar</span>\n                    <span className=\"text-xs text-muted-foreground\">({featuredPT.length}/10)</span>\n                  </Button>\n                )}\n                \n                {featuredPT.length === 0 && (\n                  <div className=\"col-span-full text-center py-8 text-muted-foreground\">\n                    <Sparkles className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n                    <p>Nenhuma pr√©via em Portugu√™s</p>\n                    <p className=\"text-sm\">Clique em \"Adicionar\" para selecionar um v√≠deo.</p>\n                  </div>\n                )}\n              </div>\n            </TabsContent>\n            \n            {/* ES Content */}\n            <TabsContent value=\"es\">\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\n                {featuredES.map(item => (\n                  <FeaturedCard\n                    key={item.id}\n                    item={item}\n                    onUploadImage={handleUploadFeaturedImage}\n                    onUpdateImageUrl={handleUpdateImageUrl}\n                    onRemoveFromFeatured={handleRemoveFromFeatured}\n                    onEdit={onEditItem}\n                  />\n                ))}\n                \n                {/* Slot to add new featured item (if < 10) */}\n                {featuredES.length < 10 && (\n                  <Button\n                    variant=\"outline\"\n                    className=\"aspect-[9/16] h-auto border-dashed flex flex-col items-center justify-center gap-2\"\n                    onClick={() => setSelectFeaturedModalOpen(true)}\n                  >\n                    <Plus className=\"h-8 w-8\" />\n                    <span className=\"text-sm\">Adicionar</span>\n                    <span className=\"text-xs text-muted-foreground\">({featuredES.length}/10)</span>\n                  </Button>\n                )}\n                \n                {featuredES.length === 0 && (\n                  <div className=\"col-span-full text-center py-8 text-muted-foreground\">\n                    <Sparkles className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n                    <p>Nenhuma pr√©via em Espanhol</p>\n                    <p className=\"text-sm\">Clique em \"Adicionar\" para selecionar um v√≠deo.</p>\n                  </div>\n                )}\n              </div>\n            </TabsContent>\n          </Tabs>\n        </TabsContent>\n\n        {/* Videos Tab */}\n        <TabsContent value=\"videos\" className=\"mt-6\">\n          <div className=\"mb-4 space-y-4\">\n            <div className=\"flex flex-wrap items-center gap-4\">\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button className=\"gap-2\">\n                    <Plus className=\"h-4 w-4\" />\n                    Adicionar\n                    <ChevronDown className=\"h-4 w-4\" />\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent>\n                  <DropdownMenuItem onClick={() => openCreateModal(\"content\")}>\n                    <FileText className=\"h-4 w-4 mr-2\" />\n                    Adicionar Individual\n                  </DropdownMenuItem>\n                  <DropdownMenuItem onClick={() => setBulkAddModalOpen(true)}>\n                    <FileStack className=\"h-4 w-4 mr-2\" />\n                    Adicionar em Massa\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n              <SortFilter />\n            </div>\n            <ContentFilters\n              searchQuery={searchQuery}\n              onSearchChange={setSearchQuery}\n              typeFilter={typeFilter}\n              onTypeChange={setTypeFilter}\n              categoryFilter={categoryFilter}\n              onCategoryChange={setCategoryFilter}\n              languageFilter={languageFilter}\n              onLanguageChange={(v) => setLanguageFilter(v as \"all\" | \"pt\" | \"es\")}\n              showTypeFilter={false}\n              showLanguageFilter={true}\n            />\n          </div>\n          {renderVideoGrid(videoItems, \"content_items\")}\n        </TabsContent>\n\n        {/* Artes Tab */}\n        <TabsContent value=\"artes\" className=\"mt-6\">\n          <div className=\"mb-4 space-y-4\">\n            <div className=\"flex flex-wrap items-center gap-4\">\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button className=\"gap-2\">\n                    <Plus className=\"h-4 w-4\" />\n                    Adicionar\n                    <ChevronDown className=\"h-4 w-4\" />\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent>\n                  <DropdownMenuItem onClick={() => openCreateModal(\"content\")}>\n                    <FileText className=\"h-4 w-4 mr-2\" />\n                    Adicionar Individual\n                  </DropdownMenuItem>\n                  <DropdownMenuItem onClick={() => setBulkAddModalOpen(true)}>\n                    <FileStack className=\"h-4 w-4 mr-2\" />\n                    Adicionar em Massa\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n              <SortFilter />\n            </div>\n            <ContentFilters\n              searchQuery={searchQuery}\n              onSearchChange={setSearchQuery}\n              typeFilter={typeFilter}\n              onTypeChange={setTypeFilter}\n              categoryFilter={categoryFilter}\n              onCategoryChange={setCategoryFilter}\n              showTypeFilter={false}\n            />\n          </div>\n          {renderItemGrid(feedItems, \"content_items\")}\n        </TabsContent>\n\n        {/* Stories Tab */}\n        <TabsContent value=\"stories\" className=\"mt-6\">\n          <div className=\"mb-4 space-y-4\">\n            <div className=\"flex flex-wrap items-center gap-4\">\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button className=\"gap-2\">\n                    <Plus className=\"h-4 w-4\" />\n                    Adicionar\n                    <ChevronDown className=\"h-4 w-4\" />\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent>\n                  <DropdownMenuItem onClick={() => openCreateModal(\"content\")}>\n                    <FileText className=\"h-4 w-4 mr-2\" />\n                    Adicionar Individual\n                  </DropdownMenuItem>\n                  <DropdownMenuItem onClick={() => setBulkAddModalOpen(true)}>\n                    <FileStack className=\"h-4 w-4 mr-2\" />\n                    Adicionar em Massa\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n              <SortFilter />\n            </div>\n            <ContentFilters\n              searchQuery={searchQuery}\n              onSearchChange={setSearchQuery}\n              typeFilter={typeFilter}\n              onTypeChange={setTypeFilter}\n              categoryFilter={categoryFilter}\n              onCategoryChange={setCategoryFilter}\n              showTypeFilter={false}\n            />\n          </div>\n          {renderItemGrid(storyItems, \"content_items\")}\n        </TabsContent>\n\n        {/* Legendas Nacionais Tab */}\n        <TabsContent value=\"legendas-nac\" className=\"mt-6\">\n          <div className=\"mb-4 space-y-4\">\n            <div className=\"flex flex-wrap items-center gap-4\">\n              <Button onClick={() => setCreateCaptionModalOpen(true)} className=\"gap-2\">\n                <Plus className=\"h-4 w-4\" />\n                Adicionar Legenda\n              </Button>\n              <SortFilter />\n            </div>\n            <ContentFilters\n              searchQuery={searchQuery}\n              onSearchChange={setSearchQuery}\n              typeFilter={typeFilter}\n              onTypeChange={setTypeFilter}\n              categoryFilter={categoryFilter}\n              onCategoryChange={setCategoryFilter}\n              showTypeFilter={false}\n            />\n          </div>\n          {renderCaptionGrid(nacionalCaptions, \"captions\")}\n        </TabsContent>\n\n        {/* Legendas Internacionais Tab */}\n        <TabsContent value=\"legendas-int\" className=\"mt-6\">\n          <div className=\"mb-4 space-y-4\">\n            <div className=\"flex flex-wrap items-center gap-4\">\n              <Button onClick={() => setCreateCaptionModalOpen(true)} className=\"gap-2\">\n                <Plus className=\"h-4 w-4\" />\n                Adicionar Legenda\n              </Button>\n              <SortFilter />\n            </div>\n            <ContentFilters\n              searchQuery={searchQuery}\n              onSearchChange={setSearchQuery}\n              typeFilter={typeFilter}\n              onTypeChange={setTypeFilter}\n              categoryFilter={categoryFilter}\n              onCategoryChange={setCategoryFilter}\n              showTypeFilter={false}\n            />\n          </div>\n          {renderCaptionGrid(internacionalCaptions, \"captions\")}\n        </TabsContent>\n\n        {/* Ferramentas Tab */}\n        <TabsContent value=\"ferramentas\" className=\"mt-6\">\n          <div className=\"mb-4 space-y-4\">\n            <div className=\"flex flex-wrap items-center gap-4\">\n              <Button onClick={() => openCreateModal(\"tool\")} className=\"gap-2\">\n                <Plus className=\"h-4 w-4\" />\n                Adicionar Ferramenta\n              </Button>\n              <SortFilter />\n            </div>\n            <ContentFilters\n              searchQuery={searchQuery}\n              onSearchChange={setSearchQuery}\n              typeFilter={typeFilter}\n              onTypeChange={setTypeFilter}\n              categoryFilter={categoryFilter}\n              onCategoryChange={setCategoryFilter}\n              showTypeFilter={false}\n            />\n          </div>\n          {renderToolGrid(sortedTools)}\n        </TabsContent>\n\n        {/* Recursos Tab */}\n        <TabsContent value=\"recursos\" className=\"mt-6\">\n          <div className=\"mb-4 space-y-4\">\n            <div className=\"flex flex-wrap items-center gap-4\">\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button className=\"gap-2\">\n                    <Plus className=\"h-4 w-4\" />\n                    Adicionar\n                    <ChevronDown className=\"h-4 w-4\" />\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent>\n                  <DropdownMenuItem onClick={() => openCreateModal(\"content\")}>\n                    <FileText className=\"h-4 w-4 mr-2\" />\n                    Adicionar Individual\n                  </DropdownMenuItem>\n                  <DropdownMenuItem onClick={() => setBulkAddModalOpen(true)}>\n                    <FileStack className=\"h-4 w-4 mr-2\" />\n                    Adicionar em Massa\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n              <SortFilter />\n            </div>\n            <ContentFilters\n              searchQuery={searchQuery}\n              onSearchChange={setSearchQuery}\n              typeFilter={typeFilter}\n              onTypeChange={setTypeFilter}\n              categoryFilter={categoryFilter}\n              onCategoryChange={setCategoryFilter}\n              showTypeFilter={false}\n            />\n          </div>\n          {renderItemGrid(resourceItems, \"content_items\")}\n        </TabsContent>\n      </Tabs>\n\n      <CreateItemModal\n        isOpen={createModalOpen}\n        onClose={() => setCreateModalOpen(false)}\n        onSave={handleCreateContent}\n        isSaving={createContentItem.isPending || createMarketingTool.isPending}\n        itemType={createType}\n      />\n\n      <CreateCaptionModal\n        isOpen={createCaptionModalOpen}\n        onClose={() => setCreateCaptionModalOpen(false)}\n        onSave={handleCreateCaption}\n        isSaving={createCaption.isPending}\n      />\n\n      <SelectFeaturedModal\n        isOpen={selectFeaturedModalOpen}\n        onClose={() => setSelectFeaturedModalOpen(false)}\n        availableVideos={availableForFeaturedByLanguage}\n        onSelect={handleSelectFeatured}\n        language={featuredLanguageTab}\n      />\n\n      <BulkAddModal\n        isOpen={bulkAddModalOpen}\n        onClose={() => setBulkAddModalOpen(false)}\n        onSave={handleBulkAdd}\n        isSaving={createContentItem.isPending}\n      />\n    </>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\CreateCaptionModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\CreateItemModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\DashboardSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\DateRangeFilter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\DeleteConfirmDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\EditModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\EditableCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\EmailPerformanceSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\FeaturedCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\HistorySection.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":298,"column":25,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":298,"endColumn":77,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[10055,10107],"text":"// @ts-expect-error - indeterminate is valid but not typed"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from \"react\";\nimport { format } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\nimport { History, RotateCcw, Filter, Check, Download } from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport {\n  useAuditLogs,\n  useRollbackAction,\n  useBatchRollback,\n  getTableDisplayName,\n  getActionDisplayName,\n  getItemTitle,\n  AuditLogEntry,\n} from \"@/hooks/useAuditLog\";\nimport { RollbackModal } from \"./RollbackModal\";\nimport { BatchRollbackModal } from \"./BatchRollbackModal\";\n\nexport const HistorySection = () => {\n  const [actionFilter, setActionFilter] = useState<string>(\"all\");\n  const [tableFilter, setTableFilter] = useState<string>(\"all\");\n  const [selectedEntry, setSelectedEntry] = useState<AuditLogEntry | null>(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set());\n  const [isBatchModalOpen, setIsBatchModalOpen] = useState(false);\n\n  const { toast } = useToast();\n  const rollbackMutation = useRollbackAction();\n  const batchRollbackMutation = useBatchRollback();\n\n  const { data: logs, isLoading } = useAuditLogs({\n    action: actionFilter !== \"all\" ? actionFilter : undefined,\n    table_name: tableFilter !== \"all\" ? tableFilter : undefined,\n    limit: 100,\n  });\n\n  // Filter out already rolled back entries for selection\n  const selectableLogs = useMemo(() => {\n    return logs?.filter((log) => !log.is_rolled_back) || [];\n  }, [logs]);\n\n  const selectedEntries = useMemo(() => {\n    return logs?.filter((log) => selectedIds.has(log.id)) || [];\n  }, [logs, selectedIds]);\n\n  const handleSelectAll = (checked: boolean) => {\n    if (checked) {\n      setSelectedIds(new Set(selectableLogs.map((l) => l.id)));\n    } else {\n      setSelectedIds(new Set());\n    }\n  };\n\n  const handleSelectOne = (id: string, checked: boolean) => {\n    const newSet = new Set(selectedIds);\n    if (checked) {\n      newSet.add(id);\n    } else {\n      newSet.delete(id);\n    }\n    setSelectedIds(newSet);\n  };\n\n  const handleRollbackClick = (entry: AuditLogEntry) => {\n    setSelectedEntry(entry);\n    setIsModalOpen(true);\n  };\n\n  const handleConfirmRollback = async () => {\n    if (!selectedEntry) return;\n\n    try {\n      await rollbackMutation.mutateAsync(selectedEntry);\n      toast({\n        title: \"Altera√ß√£o desfeita!\",\n        description: `${getActionDisplayName(selectedEntry.action)} foi revertido com sucesso.`,\n      });\n      setIsModalOpen(false);\n      setSelectedEntry(null);\n    } catch (error) {\n      toast({\n        title: \"Erro ao desfazer\",\n        description: error instanceof Error ? error.message : \"Erro desconhecido\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleBatchRollback = async () => {\n    try {\n      const result = await batchRollbackMutation.mutateAsync(selectedEntries);\n      toast({\n        title: \"Altera√ß√µes desfeitas!\",\n        description: `${result.success.length} altera√ß√£o(√µes) revertida(s) com sucesso.${\n          result.failed.length > 0 ? ` ${result.failed.length} falharam.` : \"\"\n        }`,\n      });\n      setIsBatchModalOpen(false);\n      setSelectedIds(new Set());\n    } catch (error) {\n      toast({\n        title: \"Erro ao desfazer\",\n        description: error instanceof Error ? error.message : \"Erro desconhecido\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleExportCSV = () => {\n    const logsToExport =\n      selectedIds.size > 0\n        ? logs?.filter((l) => selectedIds.has(l.id))\n        : logs;\n\n    if (!logsToExport?.length) {\n      toast({\n        title: \"Nada para exportar\",\n        description: \"N√£o h√° registros para exportar.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const headers = [\"Data/Hora\", \"A√ß√£o\", \"Tipo\", \"Item\", \"Usu√°rio\", \"Status\"];\n\n    const rows = logsToExport.map((entry) => [\n      format(new Date(entry.created_at), \"dd/MM/yyyy HH:mm\", { locale: ptBR }),\n      getActionDisplayName(entry.action),\n      getTableDisplayName(entry.table_name),\n      getItemTitle(entry),\n      entry.user_email || \"Sistema\",\n      entry.is_rolled_back ? \"Desfeito\" : \"Ativo\",\n    ]);\n\n    // BOM for Excel UTF-8 compatibility\n    const BOM = \"\\uFEFF\";\n    const csvContent =\n      BOM +\n      [\n        headers.join(\";\"),\n        ...rows.map((row) => row.map((cell) => `\"${String(cell).replace(/\"/g, '\"\"')}\"`).join(\";\")),\n      ].join(\"\\n\");\n\n    const blob = new Blob([csvContent], { type: \"text/csv;charset=utf-8\" });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.href = url;\n    link.download = `historico_alteracoes_${format(new Date(), \"yyyy-MM-dd\")}.csv`;\n    link.click();\n    URL.revokeObjectURL(url);\n\n    toast({\n      title: \"CSV exportado!\",\n      description: `${logsToExport.length} registro(s) exportado(s).`,\n    });\n  };\n\n  const getActionBadge = (action: string) => {\n    const variants: Record<string, \"default\" | \"secondary\" | \"destructive\"> = {\n      INSERT: \"default\",\n      UPDATE: \"secondary\",\n      DELETE: \"destructive\",\n    };\n    const icons: Record<string, string> = {\n      INSERT: \"‚ûï\",\n      UPDATE: \"‚úèÔ∏è\",\n      DELETE: \"üóëÔ∏è\",\n    };\n    return (\n      <Badge variant={variants[action] || \"default\"} className=\"gap-1\">\n        {icons[action]} {getActionDisplayName(action)}\n      </Badge>\n    );\n  };\n\n  const getRollbackButtonText = (action: string) => {\n    return action === \"DELETE\" ? \"Restaurar\" : \"Desfazer\";\n  };\n\n  const isAllSelected =\n    selectableLogs.length > 0 && selectedIds.size === selectableLogs.length;\n  const isSomeSelected = selectedIds.size > 0 && selectedIds.size < selectableLogs.length;\n\n  return (\n    <div className=\"space-y-4\">\n      <Card>\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\n            <CardTitle className=\"flex items-center gap-2 text-lg\">\n              <History className=\"h-5 w-5\" />\n              Hist√≥rico de Altera√ß√µes\n            </CardTitle>\n            <div className=\"flex items-center gap-2 flex-wrap\">\n              <Button variant=\"outline\" size=\"sm\" onClick={handleExportCSV}>\n                <Download className=\"h-4 w-4 mr-2\" />\n                Exportar CSV\n              </Button>\n              <Filter className=\"h-4 w-4 text-muted-foreground\" />\n              <Select value={actionFilter} onValueChange={setActionFilter}>\n                <SelectTrigger className=\"w-32\">\n                  <SelectValue placeholder=\"A√ß√£o\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">Todas</SelectItem>\n                  <SelectItem value=\"INSERT\">Cria√ß√µes</SelectItem>\n                  <SelectItem value=\"UPDATE\">Edi√ß√µes</SelectItem>\n                  <SelectItem value=\"DELETE\">Remo√ß√µes</SelectItem>\n                </SelectContent>\n              </Select>\n              <Select value={tableFilter} onValueChange={setTableFilter}>\n                <SelectTrigger className=\"w-36\">\n                  <SelectValue placeholder=\"Tipo\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">Todos</SelectItem>\n                  <SelectItem value=\"content_items\">Conte√∫do</SelectItem>\n                  <SelectItem value=\"captions\">Legendas</SelectItem>\n                  <SelectItem value=\"marketing_tools\">Ferramentas</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {/* Selection Action Bar */}\n          {selectedIds.size > 0 && (\n            <div className=\"flex items-center gap-3 p-3 bg-muted rounded-lg mb-4\">\n              <span className=\"text-sm font-medium\">\n                {selectedIds.size} selecionado(s)\n              </span>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={handleExportCSV}\n              >\n                <Download className=\"h-4 w-4 mr-2\" />\n                Exportar Selecionados\n              </Button>\n              <Button\n                variant=\"destructive\"\n                size=\"sm\"\n                onClick={() => setIsBatchModalOpen(true)}\n              >\n                <RotateCcw className=\"h-4 w-4 mr-2\" />\n                Desfazer {selectedIds.size}\n              </Button>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => setSelectedIds(new Set())}\n              >\n                Limpar sele√ß√£o\n              </Button>\n            </div>\n          )}\n\n          {isLoading ? (\n            <div className=\"space-y-2\">\n              {[...Array(5)].map((_, i) => (\n                <Skeleton key={i} className=\"h-12 w-full\" />\n              ))}\n            </div>\n          ) : !logs?.length ? (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              <History className=\"h-12 w-12 mx-auto mb-2 opacity-50\" />\n              <p>Nenhuma altera√ß√£o registrada ainda.</p>\n              <p className=\"text-sm\">\n                O hist√≥rico aparecer√° aqui ap√≥s criar, editar ou remover itens.\n              </p>\n            </div>\n          ) : (\n            <div className=\"rounded-md border overflow-x-auto\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead className=\"w-10\">\n                      <Checkbox\n                        checked={isAllSelected}\n                        // @ts-ignore - indeterminate is valid but not typed\n                        indeterminate={isSomeSelected}\n                        onCheckedChange={handleSelectAll}\n                        aria-label=\"Selecionar todos\"\n                      />\n                    </TableHead>\n                    <TableHead className=\"w-40\">Data/Hora</TableHead>\n                    <TableHead className=\"w-28\">A√ß√£o</TableHead>\n                    <TableHead className=\"w-28\">Tipo</TableHead>\n                    <TableHead>Item</TableHead>\n                    <TableHead className=\"w-28\">A√ß√µes</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {logs.map((entry) => (\n                    <TableRow\n                      key={entry.id}\n                      className={entry.is_rolled_back ? \"opacity-50\" : \"\"}\n                    >\n                      <TableCell>\n                        <Checkbox\n                          checked={selectedIds.has(entry.id)}\n                          disabled={entry.is_rolled_back}\n                          onCheckedChange={(checked) =>\n                            handleSelectOne(entry.id, checked as boolean)\n                          }\n                          aria-label={`Selecionar ${getItemTitle(entry)}`}\n                        />\n                      </TableCell>\n                      <TableCell className=\"text-sm text-muted-foreground\">\n                        {format(new Date(entry.created_at), \"dd/MM HH:mm\", {\n                          locale: ptBR,\n                        })}\n                      </TableCell>\n                      <TableCell>{getActionBadge(entry.action)}</TableCell>\n                      <TableCell>\n                        <Badge variant=\"outline\">\n                          {getTableDisplayName(entry.table_name)}\n                        </Badge>\n                      </TableCell>\n                      <TableCell className=\"font-medium truncate max-w-xs\">\n                        {getItemTitle(entry)}\n                      </TableCell>\n                      <TableCell>\n                        {entry.is_rolled_back ? (\n                          <Badge variant=\"outline\" className=\"gap-1\">\n                            <Check className=\"h-3 w-3\" /> Desfeito\n                          </Badge>\n                        ) : (\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => handleRollbackClick(entry)}\n                            disabled={rollbackMutation.isPending}\n                            className=\"gap-1\"\n                          >\n                            <RotateCcw className=\"h-3 w-3\" />\n                            {getRollbackButtonText(entry.action)}\n                          </Button>\n                        )}\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      <RollbackModal\n        isOpen={isModalOpen}\n        onClose={() => setIsModalOpen(false)}\n        entry={selectedEntry}\n        onConfirm={handleConfirmRollback}\n        isLoading={rollbackMutation.isPending}\n      />\n\n      <BatchRollbackModal\n        isOpen={isBatchModalOpen}\n        onClose={() => setIsBatchModalOpen(false)}\n        entries={selectedEntries}\n        onConfirm={handleBatchRollback}\n        isLoading={batchRollbackMutation.isPending}\n      />\n    </div>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\ImportSection.tsx","messages":[{"ruleId":"prefer-const","severity":2,"message":"'actions' is never reassigned. Use 'const' instead.","line":503,"column":11,"nodeType":"Identifier","messageId":"useConst","endLine":503,"endColumn":28,"fix":{"range":[17078,17105],"text":"const actions: string[] = [];"}}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import { useState, useCallback } from \"react\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport { useImportContent, ContentType, ParsedItem, getDefaultIconByType } from \"@/hooks/useImportContent\";\nimport { useCreateContentItem } from \"@/hooks/useContent\";\nimport { useScheduleContent } from \"@/hooks/useCalendarEntries\";\nimport { useImportCaptions } from \"@/hooks/useImportCaptions\";\nimport { useFavorites } from \"@/hooks/useFavorites\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Upload, FileText, Loader2, Trash2, Check, X, Sparkles, Globe, MapPin, Users, Calendar, Wand2, Image, Video, Star } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { CaptionMatchTable } from \"@/components/gestao/CaptionMatchTable\";\n\n// Icon options by category\nconst iconsByCategory: Record<ContentType, { value: string; label: string }[]> = {\n  video: [\n    { value: \"üé¨\", label: \"üé¨ V√≠deo\" },\n    { value: \"üé•\", label: \"üé• C√¢mera\" },\n    { value: \"üìπ\", label: \"üìπ Filmadora\" },\n    { value: \"üéûÔ∏è\", label: \"üéûÔ∏è Filme\" },\n    { value: \"‚ñ∂Ô∏è\", label: \"‚ñ∂Ô∏è Play\" },\n  ],\n  feed: [\n    { value: \"üñºÔ∏è\", label: \"üñºÔ∏è Quadro\" },\n    { value: \"üé®\", label: \"üé® Arte\" },\n    { value: \"üì∏\", label: \"üì∏ Foto\" },\n    { value: \"‚ú®\", label: \"‚ú® Destaque\" },\n    { value: \"üåÖ\", label: \"üåÖ Paisagem\" },\n  ],\n  story: [\n    { value: \"üì±\", label: \"üì± Celular\" },\n    { value: \"üì≤\", label: \"üì≤ Mobile\" },\n    { value: \"üëÜ\", label: \"üëÜ Toque\" },\n    { value: \"üí´\", label: \"üí´ Magic\" },\n    { value: \"üî•\", label: \"üî• Fire\" },\n  ],\n  tool: [\n    { value: \"ü§ñ\", label: \"ü§ñ Rob√¥\" },\n    { value: \"‚öôÔ∏è\", label: \"‚öôÔ∏è Engrenagem\" },\n    { value: \"üîß\", label: \"üîß Ferramenta\" },\n    { value: \"üí°\", label: \"üí° Ideia\" },\n    { value: \"üöÄ\", label: \"üöÄ Foguete\" },\n  ],\n  resource: [\n    { value: \"üì•\", label: \"üì• Download\" },\n    { value: \"üì¶\", label: \"üì¶ Pacote\" },\n    { value: \"üìÅ\", label: \"üìÅ Pasta\" },\n    { value: \"üíæ\", label: \"üíæ Salvar\" },\n    { value: \"üìö\", label: \"üìö Livros\" },\n  ],\n  caption: [\n    { value: \"üìù\", label: \"üìù Nota\" },\n    { value: \"‚úçÔ∏è\", label: \"‚úçÔ∏è Escrita\" },\n    { value: \"üí¨\", label: \"üí¨ Bal√£o\" },\n    { value: \"üìÑ\", label: \"üìÑ Documento\" },\n    { value: \"üè∑Ô∏è\", label: \"üè∑Ô∏è Tag\" },\n  ],\n};\n\n// Category filter options\nconst influencerOptions = [\n  { value: \"\", label: \"Nenhum\" },\n  { value: \"influencer-eva\", label: \"Eva\" },\n  { value: \"influencer-mel\", label: \"Mel\" },\n  { value: \"influencer-bia\", label: \"Bia\" },\n];\n\nconst locationOptions = [\n  { value: \"\", label: \"Nenhum\" },\n  { value: \"nacional\", label: \"Nacional\" },\n  { value: \"internacional\", label: \"Internacional\" },\n];\n\nconst languageOptions = [\n  { value: \"pt\", label: \"üáßüá∑ Portugu√™s\" },\n  { value: \"es\", label: \"üá™üá∏ Espanhol\" },\n  { value: \"en\", label: \"üá∫üá∏ Ingl√™s\" },\n];\n\ninterface EditableItem extends ParsedItem {\n  icon: string;\n  category?: string;\n  language?: string;\n}\n\nexport const ImportSection = () => {\n  const [selectedType, setSelectedType] = useState<ContentType>('video');\n  const [dragActive, setDragActive] = useState(false);\n  const [editableItems, setEditableItems] = useState<EditableItem[]>([]);\n  const [bulkIcon, setBulkIcon] = useState<string>(\"\");\n  const [bulkCategory, setBulkCategory] = useState<string>(\"\");\n  const [bulkLanguage, setBulkLanguage] = useState<string>(\"pt\");\n  \n  // Category filters\n  const [influencer, setInfluencer] = useState<string>(\"\");\n  const [location, setLocation] = useState<string>(\"\");\n  const [language, setLanguage] = useState<string>(\"pt\");\n  \n  // Quick import text (bulk mode)\n  const [quickImportText, setQuickImportText] = useState<string>(\"\");\n  \n  // Quick import single mode (separated fields)\n  const [quickTitle, setQuickTitle] = useState<string>(\"\");\n  const [quickUrl, setQuickUrl] = useState<string>(\"\");\n  const [quickCaption, setQuickCaption] = useState<string>(\"\");\n  const [autoSchedule, setAutoSchedule] = useState<boolean>(true);\n  const [importMode, setImportMode] = useState<\"single\" | \"bulk\">(\"single\");\n  \n  // Media and automation options\n  const [mediaUrl, setMediaUrl] = useState<string>(\"\");\n  const [mediaType, setMediaType] = useState<\"gif\" | \"video\" | null>(null);\n  const [autoFavorite, setAutoFavorite] = useState<boolean>(false);\n  const [autoHighlight, setAutoHighlight] = useState<boolean>(false);\n  \n  // Bulk captions import\n  const [bulkCaptionsText, setBulkCaptionsText] = useState<string>(\"\");\n  const [includeWithCaption, setIncludeWithCaption] = useState<boolean>(false);\n  \n  const { user } = useAuth();\n  const { toggleFavorite, MAX_FAVORITES, favoritesCount } = useFavorites();\n  \n  const queryClient = useQueryClient();\n  const createContentItem = useCreateContentItem();\n  const scheduleContent = useScheduleContent();\n  \n  // Hook for AI caption matching\n  const {\n    matches: captionMatches,\n    stats: captionStats,\n    isProcessing: isProcessingCaptions,\n    isApplying: isApplyingCaptions,\n    processText: processCaptionsText,\n    toggleVideoSelection,\n    toggleDestinationVideos,\n    updateVideoCaption,\n    updateDestinationCaption,\n    applyMatches: applyCaptionMatches,\n    getSelectionStats,\n    clearMatches,\n  } = useImportCaptions();\n  \n  const {\n    parseFile,\n    clearParsedItems,\n    isParsingFile,\n    importContent,\n    isImporting,\n  } = useImportContent();\n\n  const handleDrag = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\n      setDragActive(true);\n    } else if (e.type === \"dragleave\") {\n      setDragActive(false);\n    }\n  }, []);\n\n  const handleDrop = useCallback(async (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n\n    const files = Array.from(e.dataTransfer.files);\n    if (files.length > 0) {\n      try {\n        const defaultIcon = getDefaultIconByType(selectedType);\n        const selectedCategory = influencer || location || undefined;\n        \n        for (const file of files) {\n          const items = await parseFile(file);\n          const itemsWithExtras = items.map(item => ({\n            ...item,\n            icon: item.icon || defaultIcon,\n            category: selectedCategory,\n            language: language,\n          }));\n          setEditableItems(prev => [...prev, ...itemsWithExtras]);\n        }\n        toast.success(`${files.length} arquivo(s) processado(s) com sucesso!`);\n      } catch (error) {\n        toast.error(\"Erro ao processar arquivo(s)\");\n        console.error(error);\n      }\n    }\n  }, [parseFile, selectedType, influencer, location, language]);\n\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    if (files.length > 0) {\n      try {\n        const defaultIcon = getDefaultIconByType(selectedType);\n        const selectedCategory = influencer || location || undefined;\n        \n        for (const file of files) {\n          const items = await parseFile(file);\n          const itemsWithExtras = items.map(item => ({\n            ...item,\n            icon: item.icon || defaultIcon,\n            category: selectedCategory,\n            language: language,\n          }));\n          setEditableItems(prev => [...prev, ...itemsWithExtras]);\n        }\n        toast.success(`${files.length} arquivo(s) processado(s) com sucesso!`);\n      } catch (error) {\n        toast.error(\"Erro ao processar arquivo(s)\");\n        console.error(error);\n      }\n    }\n    // Reset input\n    e.target.value = \"\";\n  };\n\n  const handleTypeChange = (newType: ContentType) => {\n    setSelectedType(newType);\n    const defaultIcon = getDefaultIconByType(newType);\n    // Update all items without custom icons to the new default\n    setEditableItems(prev => prev.map(item => ({\n      ...item,\n      icon: defaultIcon,\n    })));\n  };\n\n  const updateItemField = (index: number, field: keyof EditableItem, value: string) => {\n    setEditableItems(prev => prev.map((item, i) => \n      i === index ? { ...item, [field]: value } : item\n    ));\n  };\n\n  const handleRemoveItem = (index: number) => {\n    setEditableItems(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const handleClearAll = () => {\n    setEditableItems([]);\n    clearParsedItems();\n  };\n\n  const applyIconToAll = () => {\n    if (!bulkIcon) return;\n    setEditableItems(prev => prev.map(item => ({\n      ...item,\n      icon: bulkIcon,\n    })));\n    toast.success(\"√çcone aplicado a todos os itens!\");\n  };\n\n  const applyCategoryToAll = () => {\n    setEditableItems(prev => prev.map(item => ({\n      ...item,\n      category: bulkCategory || undefined,\n    })));\n    toast.success(\"Categoria aplicada a todos os itens!\");\n  };\n\n  const applyLanguageToAll = () => {\n    if (!bulkLanguage) return;\n    setEditableItems(prev => prev.map(item => ({\n      ...item,\n      language: bulkLanguage,\n    })));\n    toast.success(\"Idioma aplicado a todos os itens!\");\n  };\n\n  const handleImport = () => {\n    if (editableItems.length === 0) {\n      toast.error(\"Nenhum item para importar\");\n      return;\n    }\n\n    // Validate all items have title and url\n    const invalidItems = editableItems.filter(item => !item.title.trim() || !item.url.trim());\n    if (invalidItems.length > 0) {\n      toast.error(`${invalidItems.length} item(s) sem t√≠tulo ou URL`);\n      return;\n    }\n\n    importContent(\n      { items: editableItems, type: selectedType },\n      {\n        onSuccess: () => {\n          toast.success(`${editableItems.length} itens importados com sucesso!`);\n          setEditableItems([]);\n        },\n        onError: (error) => {\n          toast.error(\"Erro ao importar itens\");\n          console.error(error);\n        },\n      }\n    );\n  };\n\n  // State for quick import loading\n  const [isQuickImporting, setIsQuickImporting] = useState(false);\n\n  // Quick import from text - handles blocks separated by empty lines\n  // Format: Title (one or more lines) followed by Canva URL, separated by empty lines\n  const handleQuickImport = async () => {\n    if (!quickImportText.trim()) {\n      toast.error(\"Cole o texto com os links do Canva\");\n      return;\n    }\n\n    if (isQuickImporting) {\n      toast.error(\"Aguarde, importa√ß√£o em andamento...\");\n      return;\n    }\n\n    setIsQuickImporting(true);\n    toast.info(\"Processando texto...\");\n\n    try {\n      // Split into blocks using one or more empty lines as delimiter\n      const blocks = quickImportText.trim().split(/\\n\\s*\\n+/);\n      const items: { title: string; url: string }[] = [];\n\n      console.log(\"Blocks found:\", blocks.length, blocks);\n\n      for (const block of blocks) {\n        const lines = block.split('\\n').map(l => l.trim()).filter(Boolean);\n        if (lines.length === 0) continue;\n\n        // Find the line with Canva URL\n        let urlLine: string | null = null;\n        const titleLines: string[] = [];\n\n        for (const line of lines) {\n          if (line.match(/https?:\\/\\/(?:www\\.)?canva\\.com/i)) {\n            // Extract only the URL (may have text before/after)\n            const urlMatch = line.match(/(https?:\\/\\/(?:www\\.)?canva\\.com\\/[^\\s]+)/i);\n            if (urlMatch) {\n              urlLine = urlMatch[1];\n              // If there's text before the URL on the same line, it's part of title\n              const beforeUrl = line.substring(0, line.indexOf(urlMatch[0])).trim();\n              if (beforeUrl) {\n                titleLines.push(beforeUrl);\n              }\n            }\n          } else {\n            // Line without URL - it's part of the title\n            titleLines.push(line);\n          }\n        }\n\n        console.log(\"Block parsed:\", { titleLines, urlLine });\n\n        if (urlLine && titleLines.length > 0) {\n          // Join title lines and clean up\n          const title = titleLines.join(' ')\n            .replace(/[|,.\\-:]{2,}/g, ' ')  // Remove repeated punctuation\n            .replace(/^\\s*[|,.\\-:]+\\s*/g, '')  // Remove leading punctuation\n            .replace(/\\s*[|,.\\-:]+\\s*$/g, '')  // Remove trailing punctuation\n            .replace(/\\s+/g, ' ')  // Normalize spaces\n            .trim();\n\n          if (title) {\n            // Capitalize first letter of each word for consistency\n            const capitalizedTitle = title\n              .toLowerCase()\n              .split(' ')\n              .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n              .join(' ');\n\n            items.push({ title: capitalizedTitle, url: urlLine });\n          }\n        }\n      }\n\n      console.log(\"Items to import:\", items);\n\n      if (items.length === 0) {\n        toast.error(\"Nenhum item v√°lido encontrado. Verifique o formato (t√≠tulo seguido de link Canva).\");\n        setIsQuickImporting(false);\n        return;\n      }\n\n      toast.info(`${items.length} item(s) encontrado(s). Importando...`);\n\n      // Create items in database\n      let successCount = 0;\n      let errorCount = 0;\n      let scheduledCount = 0;\n\n      for (const item of items) {\n        try {\n          // Create the content item and get the ID\n          const { data: createdItem } = await supabase\n            .from(\"content_items\")\n            .insert({\n              title: item.title,\n              url: item.url,\n              type: selectedType,\n              icon: getDefaultIconByType(selectedType),\n              category: influencer || location || null,\n              language: language,\n              is_active: true,\n            })\n            .select(\"id\")\n            .single();\n\n          if (createdItem) {\n            successCount++;\n            console.log(\"Item created:\", item.title, createdItem.id);\n\n            // Auto-schedule to calendar if enabled\n            if (autoSchedule && selectedType === 'video') {\n              try {\n                const result = await scheduleContent.mutateAsync({\n                  contentItemId: createdItem.id,\n                  caption: quickCaption || undefined,\n                });\n                if (result.scheduled) {\n                  scheduledCount++;\n                  console.log(\"Scheduled for day:\", result.day);\n                }\n              } catch (scheduleError) {\n                console.error(\"Error scheduling:\", scheduleError);\n              }\n            }\n          }\n        } catch (error) {\n          errorCount++;\n          console.error(\"Error creating item:\", item.title, error);\n        }\n      }\n\n      if (successCount > 0) {\n        let message = `${successCount} item(s) importado(s) com sucesso!`;\n        if (scheduledCount > 0) {\n          message += ` ${scheduledCount} agendado(s) no calend√°rio.`;\n        }\n        toast.success(message);\n        setQuickImportText(\"\");\n        setQuickCaption(\"\");\n        // Invalidate queries to refresh data\n        queryClient.invalidateQueries({ queryKey: [\"content-items\"] });\n        queryClient.invalidateQueries({ queryKey: [\"all-content-items\"] });\n      }\n      \n      if (errorCount > 0) {\n        toast.error(`${errorCount} item(s) falharam ao importar.`);\n      }\n      \n      if (successCount === 0 && errorCount === 0) {\n        toast.error(\"Nenhum item foi processado. Verifique o formato.\");\n      }\n    } catch (error) {\n      console.error(\"Quick import error:\", error);\n      toast.error(\"Erro ao processar importa√ß√£o.\");\n    } finally {\n      setIsQuickImporting(false);\n    }\n  };\n\n  // Single item import with separate fields (Title, URL, Caption, Media, Automation)\n  const handleSingleImport = async () => {\n    if (!quickTitle.trim() || !quickUrl.trim()) {\n      toast.error(\"Preencha o t√≠tulo e o link do v√≠deo\");\n      return;\n    }\n\n    if (isQuickImporting) {\n      toast.error(\"Aguarde, importa√ß√£o em andamento...\");\n      return;\n    }\n\n    setIsQuickImporting(true);\n\n    try {\n      // Create the content item with new media fields\n      const { data: createdItem, error } = await supabase\n        .from(\"content_items\")\n        .insert({\n          title: quickTitle.trim(),\n          url: quickUrl.trim(),\n          description: quickCaption.trim() || null,\n          type: selectedType,\n          icon: getDefaultIconByType(selectedType),\n          category: influencer || location || null,\n          language: language,\n          is_active: true,\n          media_url: mediaUrl.trim() || null,\n          media_type: mediaType,\n          is_highlighted: autoHighlight,\n        })\n        .select(\"id\")\n        .single();\n\n      if (error) throw error;\n\n      let actions: string[] = [];\n\n      // Auto-schedule to calendar if enabled\n      if (autoSchedule && selectedType === 'video' && createdItem) {\n        try {\n          const result = await scheduleContent.mutateAsync({\n            contentItemId: createdItem.id,\n            caption: quickCaption.trim() || undefined,\n          });\n          if (result.scheduled) {\n            actions.push(\"agendado\");\n          }\n        } catch (scheduleError) {\n          console.error(\"Error scheduling:\", scheduleError);\n        }\n      }\n\n      // Auto-favorite if enabled\n      if (autoFavorite && createdItem && user) {\n        try {\n          await toggleFavorite.mutateAsync({\n            contentType: \"content_item\",\n            contentId: createdItem.id,\n          });\n          actions.push(\"favoritado\");\n        } catch (favoriteError) {\n          console.error(\"Error favoriting:\", favoriteError);\n        }\n      }\n\n      // Build success message\n      let successMessage = `\"${quickTitle}\" importado com sucesso`;\n      if (actions.length > 0) {\n        successMessage += ` (${actions.join(\", \")})`;\n      }\n      if (autoHighlight) {\n        successMessage += \" ‚ú®\";\n      }\n      toast.success(successMessage + \"!\");\n      \n      // Clear fields\n      setQuickTitle(\"\");\n      setQuickUrl(\"\");\n      setQuickCaption(\"\");\n      setMediaUrl(\"\");\n      setMediaType(null);\n      setAutoFavorite(false);\n      setAutoHighlight(false);\n      \n      // Invalidate queries to refresh data\n      queryClient.invalidateQueries({ queryKey: [\"content-items\"] });\n      queryClient.invalidateQueries({ queryKey: [\"all-content-items\"] });\n      queryClient.invalidateQueries({ queryKey: [\"highlighted-items\"] });\n    } catch (error) {\n      console.error(\"Single import error:\", error);\n      toast.error(\"Erro ao importar v√≠deo.\");\n    } finally {\n      setIsQuickImporting(false);\n    }\n  };\n\n  const typeOptions = [\n    { value: 'video', label: 'üé¨ V√≠deo Reels' },\n    { value: 'feed', label: 'üñºÔ∏è Arte Feed' },\n    { value: 'story', label: 'üì± Story' },\n    { value: 'caption', label: 'üìù Legenda' },\n    { value: 'tool', label: 'ü§ñ Ferramenta' },\n    { value: 'resource', label: 'üìö Recurso' },\n  ];\n\n  const currentIcons = iconsByCategory[selectedType] || iconsByCategory.video;\n\n  // Combined category options for the table dropdown\n  const allCategoryOptions = [\n    { value: \"\", label: \"Nenhum\" },\n    ...influencerOptions.filter(o => o.value),\n    ...locationOptions.filter(o => o.value),\n  ];\n\n  return (\n    <Tabs defaultValue=\"content\" className=\"space-y-6 max-w-5xl mx-auto\">\n      <TabsList className=\"grid w-full grid-cols-2\">\n        <TabsTrigger value=\"content\" className=\"flex items-center gap-2\">\n          <Upload className=\"h-4 w-4\" />\n          Importar Conte√∫do\n        </TabsTrigger>\n        <TabsTrigger value=\"bulk-captions\" className=\"flex items-center gap-2\">\n          <Wand2 className=\"h-4 w-4\" />\n          Legendas em Massa\n        </TabsTrigger>\n      </TabsList>\n\n      {/* TAB: Bulk Captions Import with AI */}\n      <TabsContent value=\"bulk-captions\" className=\"space-y-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Wand2 className=\"h-5 w-5 text-primary\" />\n              Importar Legendas com IA\n            </CardTitle>\n            <p className=\"text-sm text-muted-foreground\">\n              Cole o texto com legendas e a IA vai associar automaticamente aos v√≠deos existentes.\n            </p>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label>Cole aqui o texto com legendas</Label>\n              <Textarea\n                placeholder={\"Cole o conte√∫do do arquivo de legendas aqui...\\n\\nExemplo:\\n\\nJericoacoara - CE\\nRelaxe em Jericoacoara, um dos destinos mais charmosos do Brasil!\\n#Jericoacoara #Viagem\\n\\nMaragogi - AL\\nDescubra as maravilhas de Maragogi!\\n#Maragogi #Nordeste\"}\n                value={bulkCaptionsText}\n                onChange={(e) => setBulkCaptionsText(e.target.value)}\n                rows={10}\n                className=\"font-mono text-sm\"\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                {bulkCaptionsText.length} caracteres\n              </p>\n            </div>\n\n            <div className=\"flex items-center justify-between p-3 bg-muted/50 rounded-lg\">\n              <div className=\"flex items-center gap-2\">\n                <Switch\n                  id=\"include-with-caption\"\n                  checked={includeWithCaption}\n                  onCheckedChange={setIncludeWithCaption}\n                />\n                <Label htmlFor=\"include-with-caption\" className=\"text-sm cursor-pointer\">\n                  Incluir v√≠deos que j√° t√™m legenda\n                </Label>\n              </div>\n            </div>\n\n            <div className=\"flex gap-2\">\n              <Button\n                onClick={() => processCaptionsText(bulkCaptionsText, includeWithCaption)}\n                disabled={!bulkCaptionsText.trim() || isProcessingCaptions}\n              >\n                {isProcessingCaptions ? (\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                ) : (\n                  <Wand2 className=\"h-4 w-4 mr-2\" />\n                )}\n                {isProcessingCaptions ? \"Processando com IA...\" : \"Processar com IA\"}\n              </Button>\n              <Button\n                variant=\"outline\"\n                onClick={() => setBulkCaptionsText(\"\")}\n                disabled={isProcessingCaptions}\n              >\n                Limpar\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Results Table */}\n        <CaptionMatchTable\n          matches={captionMatches}\n          stats={captionStats}\n          isApplying={isApplyingCaptions}\n          onToggleVideo={toggleVideoSelection}\n          onToggleDestination={toggleDestinationVideos}\n          onUpdateCaption={updateVideoCaption}\n          onUpdateDestinationCaption={updateDestinationCaption}\n          onApply={applyCaptionMatches}\n          onClear={clearMatches}\n          getSelectionStats={getSelectionStats}\n        />\n      </TabsContent>\n\n      {/* TAB: Content Import (existing functionality) */}\n      <TabsContent value=\"content\" className=\"space-y-6\">\n      {/* Type Selection */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Tipo de Conte√∫do</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-wrap gap-2\">\n            {typeOptions.map((option) => (\n              <Button\n                key={option.value}\n                variant={selectedType === option.value ? 'default' : 'outline'}\n                onClick={() => handleTypeChange(option.value as ContentType)}\n              >\n                {option.label}\n              </Button>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Category and Language Filters */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <MapPin className=\"h-5 w-5\" />\n            Categorias e Filtros\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            {/* Influencer */}\n            <div className=\"space-y-2\">\n              <Label className=\"flex items-center gap-2\">\n                <Users className=\"h-4 w-4\" />\n                Influencer\n              </Label>\n              <Select value={influencer || \"none\"} onValueChange={(v) => setInfluencer(v === \"none\" ? \"\" : v)}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Selecionar...\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {influencerOptions.map(opt => (\n                    <SelectItem key={opt.value || \"none\"} value={opt.value || \"none\"}>\n                      {opt.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Location */}\n            <div className=\"space-y-2\">\n              <Label className=\"flex items-center gap-2\">\n                <MapPin className=\"h-4 w-4\" />\n                Localiza√ß√£o\n              </Label>\n              <Select value={location || \"none\"} onValueChange={(v) => setLocation(v === \"none\" ? \"\" : v)}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Selecionar...\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {locationOptions.map(opt => (\n                    <SelectItem key={opt.value || \"none\"} value={opt.value || \"none\"}>\n                      {opt.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Language */}\n            <div className=\"space-y-2\">\n              <Label className=\"flex items-center gap-2\">\n                <Globe className=\"h-4 w-4\" />\n                Idioma\n              </Label>\n              <Select value={language} onValueChange={setLanguage}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Selecionar...\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {languageOptions.map(opt => (\n                    <SelectItem key={opt.value} value={opt.value}>\n                      {opt.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Quick Import via Text */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <FileText className=\"h-5 w-5\" />\n            Importa√ß√£o R√°pida\n          </CardTitle>\n          <p className=\"text-sm text-muted-foreground\">\n            Adicione v√≠deos rapidamente - individualmente ou em massa.\n          </p>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {/* Mode Selector */}\n          <div className=\"flex gap-2\">\n            <Button\n              variant={importMode === \"single\" ? \"default\" : \"outline\"}\n              size=\"sm\"\n              onClick={() => setImportMode(\"single\")}\n            >\n              Item √önico\n            </Button>\n            <Button\n              variant={importMode === \"bulk\" ? \"default\" : \"outline\"}\n              size=\"sm\"\n              onClick={() => setImportMode(\"bulk\")}\n            >\n              M√∫ltiplos Itens\n            </Button>\n          </div>\n\n          {importMode === \"single\" ? (\n            /* Single Item Mode - Separated Fields */\n            <div className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label>T√≠tulo do V√≠deo *</Label>\n                <Input\n                  placeholder=\"Ex: Istambul - Turquia\"\n                  value={quickTitle}\n                  onChange={(e) => setQuickTitle(e.target.value)}\n                />\n              </div>\n              \n              <div className=\"space-y-2\">\n                <Label>Link do Canva *</Label>\n                <Input\n                  placeholder=\"https://canva.com/design/...\"\n                  value={quickUrl}\n                  onChange={(e) => setQuickUrl(e.target.value)}\n                />\n              </div>\n              \n              <div className=\"space-y-2\">\n                <Label className=\"flex items-center gap-2\">\n                  <Calendar className=\"h-4 w-4\" />\n                  Legenda do V√≠deo (Opcional)\n                </Label>\n                <Textarea\n                  placeholder=\"Digite a legenda que ser√° usada no calend√°rio...\"\n                  value={quickCaption}\n                  onChange={(e) => setQuickCaption(e.target.value)}\n                  rows={3}\n                />\n              </div>\n\n              {/* External Media Section */}\n              <div className=\"space-y-3 p-4 border rounded-lg bg-muted/30\">\n                <Label className=\"text-base font-medium flex items-center gap-2\">\n                  <Video className=\"h-4 w-4\" />\n                  M√≠dia de Destaque (Opcional)\n                </Label>\n                <p className=\"text-xs text-muted-foreground\">\n                  Adicione um GIF ou v√≠deo curto para aparecer na se√ß√£o de destaques\n                </p>\n                \n                <Tabs defaultValue=\"gif\" className=\"w-full\">\n                  <TabsList className=\"grid w-full grid-cols-2\">\n                    <TabsTrigger value=\"gif\" className=\"text-xs\">\n                      <Image className=\"h-3 w-3 mr-1\" />\n                      GIF Animado\n                    </TabsTrigger>\n                    <TabsTrigger value=\"video\" className=\"text-xs\">\n                      <Video className=\"h-3 w-3 mr-1\" />\n                      V√≠deo Curto\n                    </TabsTrigger>\n                  </TabsList>\n                  <TabsContent value=\"gif\" className=\"mt-2\">\n                    <Input \n                      placeholder=\"Link do GIF (Giphy, Tenor...)\"\n                      value={mediaType === \"gif\" ? mediaUrl : \"\"}\n                      onChange={(e) => { setMediaUrl(e.target.value); setMediaType(\"gif\"); }}\n                    />\n                  </TabsContent>\n                  <TabsContent value=\"video\" className=\"mt-2\">\n                    <Input \n                      placeholder=\"Link do v√≠deo (m√°x 30s)\"\n                      value={mediaType === \"video\" ? mediaUrl : \"\"}\n                      onChange={(e) => { setMediaUrl(e.target.value); setMediaType(\"video\"); }}\n                    />\n                  </TabsContent>\n                </Tabs>\n              </div>\n\n              {/* Automation Options */}\n              <div className=\"space-y-3 p-4 border rounded-lg bg-muted/50\">\n                <Label className=\"text-base font-medium\">A√ß√µes Autom√°ticas</Label>\n                \n                <div className=\"flex items-center space-x-2\">\n                  <Checkbox \n                    id=\"auto-favorite\" \n                    checked={autoFavorite} \n                    onCheckedChange={(checked) => setAutoFavorite(checked === true)}\n                  />\n                  <Label htmlFor=\"auto-favorite\" className=\"text-sm font-normal cursor-pointer flex items-center gap-1\">\n                    <Star className=\"h-3 w-3 text-yellow-500\" />\n                    Adicionar aos Favoritos ({favoritesCount}/{MAX_FAVORITES})\n                  </Label>\n                </div>\n                \n                <div className=\"flex items-center space-x-2\">\n                  <Checkbox \n                    id=\"auto-highlight\" \n                    checked={autoHighlight} \n                    onCheckedChange={(checked) => setAutoHighlight(checked === true)}\n                  />\n                  <Label htmlFor=\"auto-highlight\" className=\"text-sm font-normal cursor-pointer flex items-center gap-1\">\n                    <Sparkles className=\"h-3 w-3 text-primary\" />\n                    Marcar como Destaque na Tela Principal\n                  </Label>\n                </div>\n              </div>\n            </div>\n          ) : (\n            /* Bulk Mode - Original Text Area */\n            <div className=\"space-y-4\">\n              <Textarea\n                placeholder={\"Istambul\\nhttps://canva.com/design/xxx...\\n\\nVancouver\\nhttps://canva.com/design/yyy...\\n\\nDubai\\nhttps://canva.com/design/zzz...\"}\n                value={quickImportText}\n                onChange={(e) => setQuickImportText(e.target.value)}\n                rows={6}\n                className=\"font-mono text-sm\"\n              />\n              \n              {/* Campo de Legenda para bulk */}\n              <div className=\"space-y-2\">\n                <Label className=\"flex items-center gap-2\">\n                  <Calendar className=\"h-4 w-4\" />\n                  Legenda Padr√£o (Opcional)\n                </Label>\n                <Textarea\n                  placeholder=\"Legenda que ser√° aplicada a todos os v√≠deos importados...\"\n                  value={quickCaption}\n                  onChange={(e) => setQuickCaption(e.target.value)}\n                  rows={3}\n                />\n              </div>\n            </div>\n          )}\n          \n          {/* Toggle de agendamento autom√°tico */}\n          {selectedType === 'video' && (\n            <div className=\"flex items-center justify-between p-3 bg-muted/50 rounded-lg\">\n              <div className=\"flex items-center gap-2\">\n                <Calendar className=\"h-4 w-4 text-primary\" />\n                <div>\n                  <p className=\"text-sm font-medium\">Agendar automaticamente no calend√°rio</p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    O v√≠deo ser√° agendado no primeiro dia livre dos pr√≥ximos 7 dias\n                  </p>\n                </div>\n              </div>\n              <Switch\n                checked={autoSchedule}\n                onCheckedChange={setAutoSchedule}\n              />\n            </div>\n          )}\n          \n          <div className=\"flex gap-2\">\n            {importMode === \"single\" ? (\n              <>\n                <Button \n                  onClick={handleSingleImport} \n                  disabled={!quickTitle.trim() || !quickUrl.trim() || isQuickImporting}\n                >\n                  {isQuickImporting ? (\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  ) : (\n                    <Upload className=\"h-4 w-4 mr-2\" />\n                  )}\n                  {isQuickImporting ? \"Importando...\" : \"Importar V√≠deo\"}\n                </Button>\n                <Button \n                  variant=\"outline\" \n                  onClick={() => { \n                    setQuickTitle(\"\"); \n                    setQuickUrl(\"\"); \n                    setQuickCaption(\"\"); \n                    setMediaUrl(\"\"); \n                    setMediaType(null);\n                    setAutoFavorite(false);\n                    setAutoHighlight(false);\n                  }} \n                  disabled={isQuickImporting}\n                >\n                  Limpar\n                </Button>\n              </>\n            ) : (\n              <>\n                <Button \n                  onClick={handleQuickImport} \n                  disabled={!quickImportText.trim() || isQuickImporting}\n                >\n                  {isQuickImporting ? (\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  ) : (\n                    <Upload className=\"h-4 w-4 mr-2\" />\n                  )}\n                  {isQuickImporting ? \"Importando...\" : \"Processar e Importar\"}\n                </Button>\n                <Button \n                  variant=\"outline\" \n                  onClick={() => { setQuickImportText(\"\"); setQuickCaption(\"\"); }} \n                  disabled={isQuickImporting}\n                >\n                  Limpar\n                </Button>\n              </>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* File Upload */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Upload de Arquivos</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div\n            className={`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${\n              dragActive \n                ? 'border-primary bg-primary/5' \n                : 'border-muted-foreground/25 hover:border-primary/50'\n            }`}\n            onDragEnter={handleDrag}\n            onDragLeave={handleDrag}\n            onDragOver={handleDrag}\n            onDrop={handleDrop}\n          >\n            {isParsingFile ? (\n              <div className=\"flex flex-col items-center gap-4\">\n                <Loader2 className=\"h-12 w-12 animate-spin text-primary\" />\n                <p className=\"text-muted-foreground\">Processando arquivo(s) com IA...</p>\n              </div>\n            ) : (\n              <>\n                <Upload className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n                <p className=\"text-lg font-medium mb-2\">\n                  Arraste arquivos aqui ou clique para selecionar\n                </p>\n                <p className=\"text-sm text-muted-foreground mb-4\">\n                  Suporta m√∫ltiplos arquivos: TXT, CSV, XLSX, PDF\n                </p>\n                <Label htmlFor=\"file-upload\" className=\"cursor-pointer\">\n                  <Button asChild>\n                    <span>\n                      <FileText className=\"h-4 w-4 mr-2\" />\n                      Selecionar Arquivos\n                    </span>\n                  </Button>\n                  <Input\n                    id=\"file-upload\"\n                    type=\"file\"\n                    className=\"hidden\"\n                    accept=\".txt,.csv,.xlsx,.xls,.pdf\"\n                    onChange={handleFileChange}\n                    multiple\n                  />\n                </Label>\n              </>\n            )}\n          </div>\n\n          <div className=\"mt-4 p-4 bg-muted/50 rounded-lg\">\n            <h4 className=\"font-medium mb-2\">Formato esperado:</h4>\n            <ul className=\"text-sm text-muted-foreground space-y-1\">\n              <li>‚Ä¢ <strong>TXT/CSV:</strong> Uma linha por item, formato \"T√≠tulo | URL\" ou \"T√≠tulo; URL\"</li>\n              <li>‚Ä¢ <strong>PDF/XLSX:</strong> A IA extrai automaticamente t√≠tulos e URLs</li>\n              <li>‚Ä¢ <strong>Dica:</strong> O nome do lugar antes do link Canva √© usado como t√≠tulo</li>\n            </ul>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Editable Preview Table */}\n      {editableItems.length > 0 && (\n        <Card>\n          <CardHeader>\n            <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\n              <CardTitle>Editar Itens ({editableItems.length})</CardTitle>\n              <div className=\"flex flex-wrap gap-2\">\n                <Button variant=\"outline\" size=\"sm\" onClick={handleClearAll}>\n                  <X className=\"h-4 w-4 mr-1\" />\n                  Limpar\n                </Button>\n                <Button \n                  size=\"sm\" \n                  onClick={handleImport}\n                  disabled={isImporting}\n                >\n                  {isImporting ? (\n                    <Loader2 className=\"h-4 w-4 mr-1 animate-spin\" />\n                  ) : (\n                    <Check className=\"h-4 w-4 mr-1\" />\n                  )}\n                  Salvar {editableItems.length} Itens\n                </Button>\n              </div>\n            </div>\n          </CardHeader>\n          <CardContent>\n            {/* Bulk Actions */}\n            <div className=\"flex flex-wrap gap-2 mb-4 p-3 bg-muted/50 rounded-lg\">\n              {/* Bulk Icon */}\n              <div className=\"flex items-center gap-2\">\n                <Select value={bulkIcon} onValueChange={setBulkIcon}>\n                  <SelectTrigger className=\"w-24\">\n                    <SelectValue placeholder=\"√çcone\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {currentIcons.map(icon => (\n                      <SelectItem key={icon.value} value={icon.value}>\n                        {icon.label}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n                <Button \n                  variant=\"outline\" \n                  size=\"sm\" \n                  onClick={applyIconToAll}\n                  disabled={!bulkIcon}\n                >\n                  <Sparkles className=\"h-4 w-4 mr-1\" />\n                  Aplicar √çcone\n                </Button>\n              </div>\n\n              {/* Bulk Category */}\n              <div className=\"flex items-center gap-2\">\n                <Select value={bulkCategory || \"none\"} onValueChange={(v) => setBulkCategory(v === \"none\" ? \"\" : v)}>\n                  <SelectTrigger className=\"w-32\">\n                    <SelectValue placeholder=\"Categoria\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {allCategoryOptions.map(opt => (\n                      <SelectItem key={opt.value || \"none\"} value={opt.value || \"none\"}>\n                        {opt.label}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n                <Button variant=\"outline\" size=\"sm\" onClick={applyCategoryToAll}>\n                  Aplicar Categoria\n                </Button>\n              </div>\n\n              {/* Bulk Language */}\n              <div className=\"flex items-center gap-2\">\n                <Select value={bulkLanguage} onValueChange={setBulkLanguage}>\n                  <SelectTrigger className=\"w-28\">\n                    <SelectValue placeholder=\"Idioma\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {languageOptions.map(opt => (\n                      <SelectItem key={opt.value} value={opt.value}>\n                        {opt.label}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n                <Button variant=\"outline\" size=\"sm\" onClick={applyLanguageToAll}>\n                  Aplicar Idioma\n                </Button>\n              </div>\n            </div>\n\n            <div className=\"border rounded-lg overflow-hidden overflow-x-auto\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead className=\"w-12\">#</TableHead>\n                    <TableHead className=\"w-20\">√çcone</TableHead>\n                    <TableHead className=\"min-w-[180px]\">Nome</TableHead>\n                    <TableHead className=\"min-w-[200px]\">Link</TableHead>\n                    <TableHead className=\"w-28\">Categoria</TableHead>\n                    <TableHead className=\"w-24\">Idioma</TableHead>\n                    <TableHead className=\"w-12\"></TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {editableItems.map((item, index) => (\n                    <TableRow key={index}>\n                      <TableCell className=\"font-medium text-muted-foreground\">\n                        {index + 1}\n                      </TableCell>\n                      <TableCell>\n                        <Select \n                          value={item.icon} \n                          onValueChange={(v) => updateItemField(index, 'icon', v)}\n                        >\n                          <SelectTrigger className=\"w-16\">\n                            <SelectValue />\n                          </SelectTrigger>\n                          <SelectContent>\n                            {currentIcons.map(icon => (\n                              <SelectItem key={icon.value} value={icon.value}>\n                                {icon.label}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                      </TableCell>\n                      <TableCell>\n                        <Input \n                          value={item.title} \n                          onChange={(e) => updateItemField(index, 'title', e.target.value)}\n                          placeholder=\"T√≠tulo do item...\"\n                          className={!item.title.trim() ? 'border-destructive' : ''}\n                        />\n                      </TableCell>\n                      <TableCell>\n                        <Input \n                          value={item.url} \n                          onChange={(e) => updateItemField(index, 'url', e.target.value)}\n                          placeholder=\"https://...\"\n                          className={!item.url.trim() ? 'border-destructive' : ''}\n                        />\n                      </TableCell>\n                      <TableCell>\n                        <Select \n                          value={item.category || \"none\"} \n                          onValueChange={(v) => updateItemField(index, 'category', v === \"none\" ? \"\" : v)}\n                        >\n                          <SelectTrigger className=\"w-full\">\n                            <SelectValue />\n                          </SelectTrigger>\n                          <SelectContent>\n                            {allCategoryOptions.map(opt => (\n                              <SelectItem key={opt.value || \"none\"} value={opt.value || \"none\"}>\n                                {opt.label}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                      </TableCell>\n                      <TableCell>\n                        <Select \n                          value={item.language || \"pt\"} \n                          onValueChange={(v) => updateItemField(index, 'language', v)}\n                        >\n                          <SelectTrigger className=\"w-full\">\n                            <SelectValue />\n                          </SelectTrigger>\n                          <SelectContent>\n                            {languageOptions.map(opt => (\n                              <SelectItem key={opt.value} value={opt.value}>\n                                {opt.label}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                      </TableCell>\n                      <TableCell>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          onClick={() => handleRemoveItem(index)}\n                        >\n                          <Trash2 className=\"h-4 w-4 text-destructive\" />\n                        </Button>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n      </TabsContent>\n    </Tabs>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\MarketingFunnelSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\NotesSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\PreviewSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\RollbackModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\SelectFeaturedModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\SortableCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\gestao\\UsersSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\stripe\\CheckoutForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\stripe\\StripeCheckoutModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1519,1522],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1519,1522],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useCallback, useState, useEffect } from \"react\";\r\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport {\r\n    EmbeddedCheckoutProvider,\r\n    EmbeddedCheckout,\r\n} from \"@stripe/react-stripe-js\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Loader2 } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\n\r\n// Use public key from env or fallback (user provided)\r\nconst stripePromise = loadStripe(\r\n    import.meta.env.VITE_STRIPE_PUBLISHABLE_KEY ||\r\n    \"pk_live_51SnPUhLXUoWoiE4TnMl4F5nX7vb1jLjYNqBvcJCJ9OGmq7KpMIBtaMDdGqheu1GU0hKgccdVb2R77zrxIzF3gvwt00TNCSsQ4s\"\r\n);\r\n\r\ninterface Props {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport function StripeCheckoutModal({ open, onOpenChange }: Props) {\r\n    const [clientSecret, setClientSecret] = useState<string | null>(null);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const fetchClientSecret = useCallback(async () => {\r\n        try {\r\n            setError(null);\r\n            const { data, error } = await supabase.functions.invoke(\"create-subscription\");\r\n\r\n            if (error) {\r\n                console.error(\"Function error:\", error);\r\n                throw new Error(error.message || \"Erro ao conectar com servidor\");\r\n            }\r\n\r\n            if (data?.error) {\r\n                throw new Error(data.error);\r\n            }\r\n\r\n            setClientSecret(data.clientSecret);\r\n        } catch (err: any) {\r\n            console.error(\"Checkout invalid:\", err);\r\n            setError(err.message);\r\n            toast.error(`Erro: ${err.message}`);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (open && !clientSecret) {\r\n            fetchClientSecret();\r\n        }\r\n    }, [open, clientSecret, fetchClientSecret]);\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"max-w-4xl w-full h-[90vh] p-0 overflow-hidden bg-white\">\r\n                {error ? (\r\n                    <div className=\"flex flex-col items-center justify-center h-full gap-4\">\r\n                        <p className=\"text-destructive font-bold\">{error}</p>\r\n                        <button onClick={() => window.location.reload()} className=\"underline\">Recarregar</button>\r\n                    </div>\r\n                ) : clientSecret ? (\r\n                    <EmbeddedCheckoutProvider\r\n                        stripe={stripePromise}\r\n                        options={{ clientSecret }}\r\n                    >\r\n                        <EmbeddedCheckout className=\"h-full w-full\" />\r\n                    </EmbeddedCheckoutProvider>\r\n                ) : (\r\n                    <div className=\"flex items-center justify-center h-full\">\r\n                        <Loader2 className=\"h-12 w-12 animate-spin text-primary\" />\r\n                    </div>\r\n                )}\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\aspect-ratio.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\badge.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":29,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":29,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default: \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive: \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n);\n\nexport interface BadgeProps extends React.HTMLAttributes<HTMLDivElement>, VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return <div className={cn(badgeVariants({ variant }), className)} {...props} />;\n}\n\nexport { Badge, badgeVariants };\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\button.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":47,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":47,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n    return <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />;\n  },\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\carousel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\command.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":24,"column":11,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":24,"endColumn":29,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[710,761],"text":"type CommandDialogProps = DialogProps"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport { type DialogProps } from \"@radix-ui/react-dialog\";\nimport { Command as CommandPrimitive } from \"cmdk\";\nimport { Search } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className,\n    )}\n    {...props}\n  />\n));\nCommand.displayName = CommandPrimitive.displayName;\n\ninterface CommandDialogProps extends DialogProps {}\n\nconst CommandDialog = ({ children, ...props }: CommandDialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className,\n      )}\n      {...props}\n    />\n  </div>\n));\n\nCommandInput.displayName = CommandPrimitive.Input.displayName;\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n));\n\nCommandList.displayName = CommandPrimitive.List.displayName;\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => <CommandPrimitive.Empty ref={ref} className=\"py-6 text-center text-sm\" {...props} />);\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName;\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className,\n    )}\n    {...props}\n  />\n));\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName;\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator ref={ref} className={cn(\"-mx-1 h-px bg-border\", className)} {...props} />\n));\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName;\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50\",\n      className,\n    )}\n    {...props}\n  />\n));\n\nCommandItem.displayName = CommandPrimitive.Item.displayName;\n\nconst CommandShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {\n  return <span className={cn(\"ml-auto text-xs tracking-widest text-muted-foreground\", className)} {...props} />;\n};\nCommandShortcut.displayName = \"CommandShortcut\";\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\context-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\form.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":129,"column":10,"nodeType":"Identifier","messageId":"namedExport","endLine":129,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { Controller, ControllerProps, FieldPath, FieldValues, FormProvider, useFormContext } from \"react-hook-form\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Label } from \"@/components/ui/label\";\n\nconst Form = FormProvider;\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n> = {\n  name: TName;\n};\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>({} as FormFieldContextValue);\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  );\n};\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext);\n  const itemContext = React.useContext(FormItemContext);\n  const { getFieldState, formState } = useFormContext();\n\n  const fieldState = getFieldState(fieldContext.name, formState);\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\");\n  }\n\n  const { id } = itemContext;\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  };\n};\n\ntype FormItemContextValue = {\n  id: string;\n};\n\nconst FormItemContext = React.createContext<FormItemContextValue>({} as FormItemContextValue);\n\nconst FormItem = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => {\n    const id = React.useId();\n\n    return (\n      <FormItemContext.Provider value={{ id }}>\n        <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n      </FormItemContext.Provider>\n    );\n  },\n);\nFormItem.displayName = \"FormItem\";\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField();\n\n  return <Label ref={ref} className={cn(error && \"text-destructive\", className)} htmlFor={formItemId} {...props} />;\n});\nFormLabel.displayName = \"FormLabel\";\n\nconst FormControl = React.forwardRef<React.ElementRef<typeof Slot>, React.ComponentPropsWithoutRef<typeof Slot>>(\n  ({ ...props }, ref) => {\n    const { error, formItemId, formDescriptionId, formMessageId } = useFormField();\n\n    return (\n      <Slot\n        ref={ref}\n        id={formItemId}\n        aria-describedby={!error ? `${formDescriptionId}` : `${formDescriptionId} ${formMessageId}`}\n        aria-invalid={!!error}\n        {...props}\n      />\n    );\n  },\n);\nFormControl.displayName = \"FormControl\";\n\nconst FormDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\n  ({ className, ...props }, ref) => {\n    const { formDescriptionId } = useFormField();\n\n    return <p ref={ref} id={formDescriptionId} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />;\n  },\n);\nFormDescription.displayName = \"FormDescription\";\n\nconst FormMessage = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\n  ({ className, children, ...props }, ref) => {\n    const { error, formMessageId } = useFormField();\n    const body = error ? String(error?.message) : children;\n\n    if (!body) {\n      return null;\n    }\n\n    return (\n      <p ref={ref} id={formMessageId} className={cn(\"text-sm font-medium text-destructive\", className)} {...props}>\n        {body}\n      </p>\n    );\n  },\n);\nFormMessage.displayName = \"FormMessage\";\n\nexport { useFormField, Form, FormItem, FormLabel, FormControl, FormDescription, FormMessage, FormField };\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\hover-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\input-otp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\menubar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\navigation-menu.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":111,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":111,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\";\nimport { cva } from \"class-variance-authority\";\nimport { ChevronDown } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\"relative z-10 flex max-w-max flex-1 items-center justify-center\", className)}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n));\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName;\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\"group flex flex-1 list-none items-center justify-center space-x-1\", className)}\n    {...props}\n  />\n));\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName;\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item;\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50\",\n);\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n));\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName;\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto\",\n      className,\n    )}\n    {...props}\n  />\n));\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName;\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link;\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className,\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n));\nNavigationMenuViewport.displayName = NavigationMenuPrimitive.Viewport.displayName;\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className,\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n));\nNavigationMenuIndicator.displayName = NavigationMenuPrimitive.Indicator.displayName;\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\resizable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\sidebar.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":636,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":636,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { VariantProps, cva } from \"class-variance-authority\";\nimport { PanelLeft } from \"lucide-react\";\n\nimport { useIsMobile } from \"@/hooks/use-mobile\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Sheet, SheetContent } from \"@/components/ui/sheet\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar:state\";\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7;\nconst SIDEBAR_WIDTH = \"16rem\";\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\";\nconst SIDEBAR_WIDTH_ICON = \"3rem\";\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\";\n\ntype SidebarContext = {\n  state: \"expanded\" | \"collapsed\";\n  open: boolean;\n  setOpen: (open: boolean) => void;\n  openMobile: boolean;\n  setOpenMobile: (open: boolean) => void;\n  isMobile: boolean;\n  toggleSidebar: () => void;\n};\n\nconst SidebarContext = React.createContext<SidebarContext | null>(null);\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext);\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\");\n  }\n\n  return context;\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean;\n    open?: boolean;\n    onOpenChange?: (open: boolean) => void;\n  }\n>(({ defaultOpen = true, open: openProp, onOpenChange: setOpenProp, className, style, children, ...props }, ref) => {\n  const isMobile = useIsMobile();\n  const [openMobile, setOpenMobile] = React.useState(false);\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen);\n  const open = openProp ?? _open;\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value;\n      if (setOpenProp) {\n        setOpenProp(openState);\n      } else {\n        _setOpen(openState);\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`;\n    },\n    [setOpenProp, open],\n  );\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open);\n  }, [isMobile, setOpen, setOpenMobile]);\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === SIDEBAR_KEYBOARD_SHORTCUT && (event.metaKey || event.ctrlKey)) {\n        event.preventDefault();\n        toggleSidebar();\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [toggleSidebar]);\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\";\n\n  const contextValue = React.useMemo<SidebarContext>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar],\n  );\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\", className)}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  );\n});\nSidebarProvider.displayName = \"SidebarProvider\";\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\";\n    variant?: \"sidebar\" | \"floating\" | \"inset\";\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\";\n  }\n>(({ side = \"left\", variant = \"sidebar\", collapsible = \"offcanvas\", className, children, ...props }, ref) => {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar();\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        className={cn(\"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\", className)}\n        ref={ref}\n        {...props}\n      >\n        {children}\n      </div>\n    );\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    );\n  }\n\n  return (\n    <div\n      ref={ref}\n      className=\"group peer hidden text-sidebar-foreground md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        className={cn(\n          \"relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n            : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\",\n        )}\n      />\n      <div\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className,\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n});\nSidebar.displayName = \"Sidebar\";\n\nconst SidebarTrigger = React.forwardRef<React.ElementRef<typeof Button>, React.ComponentProps<typeof Button>>(\n  ({ className, onClick, ...props }, ref) => {\n    const { toggleSidebar } = useSidebar();\n\n    return (\n      <Button\n        ref={ref}\n        data-sidebar=\"trigger\"\n        variant=\"ghost\"\n        size=\"icon\"\n        className={cn(\"h-7 w-7\", className)}\n        onClick={(event) => {\n          onClick?.(event);\n          toggleSidebar();\n        }}\n        {...props}\n      >\n        <PanelLeft />\n        <span className=\"sr-only\">Toggle Sidebar</span>\n      </Button>\n    );\n  },\n);\nSidebarTrigger.displayName = \"SidebarTrigger\";\n\nconst SidebarRail = React.forwardRef<HTMLButtonElement, React.ComponentProps<\"button\">>(\n  ({ className, ...props }, ref) => {\n    const { toggleSidebar } = useSidebar();\n\n    return (\n      <button\n        ref={ref}\n        data-sidebar=\"rail\"\n        aria-label=\"Toggle Sidebar\"\n        tabIndex={-1}\n        onClick={toggleSidebar}\n        title=\"Toggle Sidebar\"\n        className={cn(\n          \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex\",\n          \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n          \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n          \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n          \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n          \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarRail.displayName = \"SidebarRail\";\n\nconst SidebarInset = React.forwardRef<HTMLDivElement, React.ComponentProps<\"main\">>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex min-h-svh flex-1 flex-col bg-background\",\n        \"peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarInset.displayName = \"SidebarInset\";\n\nconst SidebarInput = React.forwardRef<React.ElementRef<typeof Input>, React.ComponentProps<typeof Input>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <Input\n        ref={ref}\n        data-sidebar=\"input\"\n        className={cn(\n          \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarInput.displayName = \"SidebarInput\";\n\nconst SidebarHeader = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\n  return <div ref={ref} data-sidebar=\"header\" className={cn(\"flex flex-col gap-2 p-2\", className)} {...props} />;\n});\nSidebarHeader.displayName = \"SidebarHeader\";\n\nconst SidebarFooter = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\n  return <div ref={ref} data-sidebar=\"footer\" className={cn(\"flex flex-col gap-2 p-2\", className)} {...props} />;\n});\nSidebarFooter.displayName = \"SidebarFooter\";\n\nconst SidebarSeparator = React.forwardRef<React.ElementRef<typeof Separator>, React.ComponentProps<typeof Separator>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <Separator\n        ref={ref}\n        data-sidebar=\"separator\"\n        className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n        {...props}\n      />\n    );\n  },\n);\nSidebarSeparator.displayName = \"SidebarSeparator\";\n\nconst SidebarContent = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarContent.displayName = \"SidebarContent\";\n\nconst SidebarGroup = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  );\n});\nSidebarGroup.displayName = \"SidebarGroup\";\n\nconst SidebarGroupLabel = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\"> & { asChild?: boolean }>(\n  ({ className, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"div\";\n\n    return (\n      <Comp\n        ref={ref}\n        data-sidebar=\"group-label\"\n        className={cn(\n          \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n          \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\";\n\nconst SidebarGroupAction = React.forwardRef<HTMLButtonElement, React.ComponentProps<\"button\"> & { asChild?: boolean }>(\n  ({ className, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n\n    return (\n      <Comp\n        ref={ref}\n        data-sidebar=\"group-action\"\n        className={cn(\n          \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n          // Increases the hit area of the button on mobile.\n          \"after:absolute after:-inset-2 after:md:hidden\",\n          \"group-data-[collapsible=icon]:hidden\",\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarGroupAction.displayName = \"SidebarGroupAction\";\n\nconst SidebarGroupContent = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} data-sidebar=\"group-content\" className={cn(\"w-full text-sm\", className)} {...props} />\n  ),\n);\nSidebarGroupContent.displayName = \"SidebarGroupContent\";\n\nconst SidebarMenu = React.forwardRef<HTMLUListElement, React.ComponentProps<\"ul\">>(({ className, ...props }, ref) => (\n  <ul ref={ref} data-sidebar=\"menu\" className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)} {...props} />\n));\nSidebarMenu.displayName = \"SidebarMenu\";\n\nconst SidebarMenuItem = React.forwardRef<HTMLLIElement, React.ComponentProps<\"li\">>(({ className, ...props }, ref) => (\n  <li ref={ref} data-sidebar=\"menu-item\" className={cn(\"group/menu-item relative\", className)} {...props} />\n));\nSidebarMenuItem.displayName = \"SidebarMenuItem\";\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean;\n    isActive?: boolean;\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>;\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(({ asChild = false, isActive = false, variant = \"default\", size = \"default\", tooltip, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\";\n  const { isMobile, state } = useSidebar();\n\n  const button = (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  );\n\n  if (!tooltip) {\n    return button;\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    };\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent side=\"right\" align=\"center\" hidden={state !== \"collapsed\" || isMobile} {...tooltip} />\n    </Tooltip>\n  );\n});\nSidebarMenuButton.displayName = \"SidebarMenuButton\";\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean;\n    showOnHover?: boolean;\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\";\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarMenuAction.displayName = \"SidebarMenuAction\";\n\nconst SidebarMenuBadge = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  ),\n);\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\";\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean;\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`;\n  }, []);\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && <Skeleton className=\"size-4 rounded-md\" data-sidebar=\"menu-skeleton-icon\" />}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  );\n});\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\";\n\nconst SidebarMenuSub = React.forwardRef<HTMLUListElement, React.ComponentProps<\"ul\">>(\n  ({ className, ...props }, ref) => (\n    <ul\n      ref={ref}\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  ),\n);\nSidebarMenuSub.displayName = \"SidebarMenuSub\";\n\nconst SidebarMenuSubItem = React.forwardRef<HTMLLIElement, React.ComponentProps<\"li\">>(({ ...props }, ref) => (\n  <li ref={ref} {...props} />\n));\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\";\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean;\n    size?: \"sm\" | \"md\";\n    isActive?: boolean;\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\";\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\";\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\sonner.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":27,"column":19,"nodeType":"Identifier","messageId":"namedExport","endLine":27,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTheme } from \"next-themes\";\nimport { Toaster as Sonner, toast } from \"sonner\";\n\ntype ToasterProps = React.ComponentProps<typeof Sonner>;\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme();\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      toastOptions={{\n        classNames: {\n          toast:\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\n          description: \"group-[.toast]:text-muted-foreground\",\n          actionButton: \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\n          cancelButton: \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\n        },\n      }}\n      {...props}\n    />\n  );\n};\n\nexport { Toaster, toast };\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\textarea.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":5,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":5,"endColumn":31,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[75,159],"text":"type TextareaProps = React.TextareaHTMLAttributes<HTMLTextAreaElement>"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nexport interface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className,\n      )}\n      ref={ref}\n      {...props}\n    />\n  );\n});\nTextarea.displayName = \"Textarea\";\n\nexport { Textarea };\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\toaster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\toggle-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\toggle.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":37,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":37,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline: \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3\",\n        sm: \"h-9 px-2.5\",\n        lg: \"h-11 px-5\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> & VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root ref={ref} className={cn(toggleVariants({ variant, size, className }))} {...props} />\n));\n\nToggle.displayName = TogglePrimitive.Root.displayName;\n\nexport { Toggle, toggleVariants };\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\components\\ui\\use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\contexts\\AuthContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":70,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":70,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useEffect, useState, useRef, useCallback } from 'react';\nimport { User, Session } from '@supabase/supabase-js';\nimport { supabase } from '@/integrations/supabase/client';\n\ntype JwtPayload = {\n  exp?: number;\n  [key: string]: unknown;\n};\n\nconst decodeJwtPayload = (jwt: string): JwtPayload | null => {\n  try {\n    const parts = jwt.split('.');\n    if (parts.length < 2) return null;\n\n    // base64url -> base64\n    const base64Url = parts[1];\n    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n    const padded = base64.padEnd(base64.length + ((4 - (base64.length % 4)) % 4), '=');\n\n    const json = atob(padded);\n    return JSON.parse(json) as JwtPayload;\n  } catch {\n    return null;\n  }\n};\n\n/**\n * SECURITY NOTE: Admin verification\n * \n * The isAdmin state in this context is used for UI/UX purposes only (showing/hiding admin menus).\n * ALL actual authorization is enforced server-side via:\n * 1. RLS policies using the is_admin() database function\n * 2. Edge functions that verify user_roles table directly\n * \n * Client-side admin checks can be bypassed by modifying JavaScript, but this only grants\n * access to UI elements - not actual data or operations, which are protected server-side.\n */\n\ninterface SubscriptionStatus {\n  subscribed: boolean;\n  productId: string | null;\n  subscriptionEnd: string | null;\n  loading: boolean;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  session: Session | null;\n  loading: boolean;\n  subscription: SubscriptionStatus;\n  isAdmin: boolean;\n  signOut: () => Promise<void>;\n  refreshSubscription: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\n// Cache for subscription status to avoid rate limits\nconst CACHE_DURATION = 30000; // 30 seconds cache\nlet subscriptionCache: {\n  data: SubscriptionStatus | null;\n  timestamp: number;\n  userId: string | null;\n} = {\n  data: null,\n  timestamp: 0,\n  userId: null,\n};\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [user, setUser] = useState<User | null>(null);\n  const [session, setSession] = useState<Session | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [subscription, setSubscription] = useState<SubscriptionStatus>({\n    subscribed: false,\n    productId: null,\n    subscriptionEnd: null,\n    loading: true,\n  });\n\n  // Refs to prevent concurrent calls and track if check is in progress\n  const isCheckingRef = useRef(false);\n  const lastCheckRef = useRef<number>(0);\n  const initializedRef = useRef(false);\n  \n  /**\n   * Check if user is admin by querying the database user_roles table.\n   * This is the ONLY source of truth for admin status.\n   * UI state is updated for UX purposes, but actual authorization is enforced server-side.\n   */\n  const checkAdminStatus = useCallback(async (currentUser: User | null) => {\n    if (!currentUser) {\n      setIsAdmin(false);\n      return false;\n    }\n    \n    // Check database for admin role - this is the authoritative source\n    try {\n      const { data } = await supabase\n        .from('user_roles')\n        .select('role')\n        .eq('user_id', currentUser.id)\n        .eq('role', 'admin')\n        .maybeSingle();\n      \n      const dbIsAdmin = !!data;\n      setIsAdmin(dbIsAdmin);\n      \n      if (dbIsAdmin) {\n        console.log('[AuthContext] User has admin role in database');\n      }\n      \n      return dbIsAdmin;\n    } catch (error) {\n      console.error('[AuthContext] Error checking admin status:', error);\n      setIsAdmin(false);\n      return false;\n    }\n  }, []);\n\n  const checkSubscription = useCallback(async (accessToken: string, currentUser: User | null, forceRefresh = false) => {\n    const now = Date.now();\n    let token = accessToken;\n    let userId = currentUser?.id || null;\n    let userForChecks = currentUser;\n\n    // Guard against clearly invalid tokens\n    if (!token || token === 'null' || token === 'undefined') {\n      console.log('[AuthContext] Missing/invalid token, skipping subscription check');\n      setSubscription(prev => ({ ...prev, loading: false }));\n      return;\n    }\n\n    // Refresh session if token is expired OR close to expiring (prevents 401s)\n    const payload = decodeJwtPayload(token);\n    const expMs = typeof payload?.exp === 'number' ? payload.exp * 1000 : null;\n    const REFRESH_SKEW_MS = 30_000; // 30s safety window\n\n    if (expMs && expMs <= now + REFRESH_SKEW_MS) {\n      console.log('[AuthContext] Token expired/near expiry, attempting refreshSession');\n      try {\n        const { data, error } = await supabase.auth.refreshSession();\n        if (error || !data.session?.access_token) {\n          console.log('[AuthContext] refreshSession failed, skipping subscription check');\n          setSubscription(prev => ({ ...prev, loading: false }));\n          return;\n        }\n\n        token = data.session.access_token;\n        userForChecks = data.session.user;\n        userId = userForChecks?.id || userId;\n      } catch {\n        setSubscription(prev => ({ ...prev, loading: false }));\n        return;\n      }\n    } else if (!payload) {\n      // If we can't decode the token reliably, don't call the backend function.\n      console.log('[AuthContext] Could not decode token, skipping subscription check');\n      setSubscription(prev => ({ ...prev, loading: false }));\n      return;\n    }\n    \n    // Check admin status first (server-side verification via database query)\n    const userIsAdmin = await checkAdminStatus(userForChecks);\n    \n    // If admin, bypass subscription check entirely\n    if (userIsAdmin) {\n      console.log('[AuthContext] Admin user - bypassing subscription check');\n      const adminStatus = {\n        subscribed: true,\n        productId: 'admin_bypass',\n        subscriptionEnd: null,\n        loading: false,\n      };\n      setSubscription(adminStatus);\n      subscriptionCache = {\n        data: adminStatus,\n        timestamp: now,\n        userId,\n      };\n      return;\n    }\n\n    // Check cache first (unless forcing refresh)\n    if (\n      !forceRefresh &&\n      subscriptionCache.data &&\n      subscriptionCache.userId === userId &&\n      now - subscriptionCache.timestamp < CACHE_DURATION\n    ) {\n      console.log('[AuthContext] Using cached subscription status');\n      setSubscription(subscriptionCache.data);\n      return;\n    }\n\n    // Prevent concurrent calls\n    if (isCheckingRef.current) {\n      console.log('[AuthContext] Subscription check already in progress, skipping');\n      return;\n    }\n\n    // Debounce: minimum 5 seconds between calls\n    if (!forceRefresh && now - lastCheckRef.current < 5000) {\n      console.log('[AuthContext] Debouncing subscription check');\n      return;\n    }\n\n    try {\n      isCheckingRef.current = true;\n      lastCheckRef.current = now;\n      setSubscription(prev => ({ ...prev, loading: true }));\n      \n      console.log('[AuthContext] Checking subscription status...');\n      \n       const { data, error } = await supabase.functions.invoke('check-subscription', {\n        headers: {\n           Authorization: `Bearer ${token}`,\n        },\n      });\n\n      if (error) {\n        console.error('Error checking subscription:', error);\n        const errorStatus = {\n          subscribed: false,\n          productId: null,\n          subscriptionEnd: null,\n          loading: false,\n        };\n        setSubscription(errorStatus);\n        return;\n      }\n\n      const newStatus = {\n        subscribed: data.subscribed || false,\n        productId: data.product_id || null,\n        subscriptionEnd: data.subscription_end || null,\n        loading: false,\n      };\n\n      // Update cache\n      subscriptionCache = {\n        data: newStatus,\n        timestamp: now,\n        userId,\n      };\n\n      setSubscription(newStatus);\n      console.log('[AuthContext] Subscription status updated:', newStatus);\n    } catch (error) {\n      console.error('Error checking subscription:', error);\n      setSubscription({\n        subscribed: false,\n        productId: null,\n        subscriptionEnd: null,\n        loading: false,\n      });\n    } finally {\n      isCheckingRef.current = false;\n    }\n  }, [checkAdminStatus]);\n\n  const refreshSubscription = useCallback(async () => {\n    if (session?.access_token && user) {\n      // Force refresh bypasses cache\n      await checkSubscription(session.access_token, user, true);\n    }\n  }, [session?.access_token, user, checkSubscription]);\n\n  const signOut = async () => {\n    await supabase.auth.signOut();\n    setUser(null);\n    setSession(null);\n    setIsAdmin(false);\n    setSubscription({\n      subscribed: false,\n      productId: null,\n      subscriptionEnd: null,\n      loading: false,\n    });\n    // Clear cache on sign out\n    subscriptionCache = { data: null, timestamp: 0, userId: null };\n  };\n\n  useEffect(() => {\n    // Prevent double initialization in StrictMode\n    if (initializedRef.current) return;\n    initializedRef.current = true;\n\n    // Set up auth state listener FIRST\n    const { data: { subscription: authSubscription } } = supabase.auth.onAuthStateChange(\n      (event, currentSession) => {\n        console.log('[AuthContext] Auth state changed:', event);\n        setSession(currentSession);\n        setUser(currentSession?.user ?? null);\n        setLoading(false);\n        \n        // Only check subscription on specific events, not every state change\n        if (currentSession?.access_token && (event === 'SIGNED_IN' || event === 'TOKEN_REFRESHED')) {\n          setTimeout(() => {\n            checkSubscription(currentSession.access_token, currentSession?.user ?? null);\n          }, 100);\n        } else if (!currentSession) {\n          setIsAdmin(false);\n          setSubscription({\n            subscribed: false,\n            productId: null,\n            subscriptionEnd: null,\n            loading: false,\n          });\n          subscriptionCache = { data: null, timestamp: 0, userId: null };\n        }\n      }\n    );\n\n    // THEN check for existing session\n    supabase.auth.getSession().then(({ data: { session: existingSession } }) => {\n      setSession(existingSession);\n      setUser(existingSession?.user ?? null);\n      setLoading(false);\n      \n      if (existingSession?.access_token) {\n        checkSubscription(existingSession.access_token, existingSession?.user ?? null);\n      } else {\n        setSubscription(prev => ({ ...prev, loading: false }));\n      }\n    });\n\n    return () => authSubscription.unsubscribe();\n  }, [checkSubscription]);\n\n  // Auto-refresh subscription every 2 minutes (reduced frequency)\n  useEffect(() => {\n    if (!session?.access_token || !user) return;\n\n    const interval = setInterval(() => {\n      checkSubscription(session.access_token, user);\n    }, 120000); // 2 minutes instead of 1\n\n    return () => clearInterval(interval);\n  }, [session?.access_token, user, checkSubscription]);\n\n  return (\n    <AuthContext.Provider value={{ \n      user, \n      session, \n      loading, \n      subscription,\n      isAdmin,\n      signOut, \n      refreshSubscription \n    }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\contexts\\LanguageContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":86,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":86,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport { translations, interpolate, type Language } from '@/lib/translations';\n\ninterface LanguageContextType {\n  language: Language;\n  setLanguage: (lang: Language) => void;\n  t: (key: string, vars?: Record<string, string | number>) => string;\n}\n\nconst LanguageContext = createContext<LanguageContextType | undefined>(undefined);\n\nconst STORAGE_KEY = 'canva-viagem-language';\n\nconst getStoredLanguage = (): Language => {\n  try {\n    const stored = localStorage.getItem(STORAGE_KEY);\n    if (stored === 'es') return 'es';\n    return 'pt';\n  } catch {\n    // localStorage unavailable (e.g., Safari private mode)\n    return 'pt';\n  }\n};\n\nconst saveLanguage = (lang: Language): void => {\n  try {\n    localStorage.setItem(STORAGE_KEY, lang);\n  } catch {\n    // localStorage unavailable - language will still work in memory\n    console.warn('localStorage unavailable, language preference will not persist');\n  }\n};\n\nexport const LanguageProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [language, setLanguageState] = useState<Language>(getStoredLanguage);\n\n  // Update language and persist to localStorage\n  const setLanguage = useCallback((newLang: Language) => {\n    setLanguageState(newLang);\n    saveLanguage(newLang);\n  }, []);\n\n  // Translation function with fallback chain: current language ‚Üí PT ‚Üí key itself\n  const t = useCallback((key: string, vars?: Record<string, string | number>): string => {\n    let translation = translations[language]?.[key];\n    \n    // Fallback to Portuguese if not found in current language\n    if (!translation && language !== 'pt') {\n      translation = translations.pt?.[key];\n    }\n    \n    // If still not found, return the key itself (helps with debugging)\n    if (!translation) {\n      console.warn(`Missing translation for key: ${key}`);\n      return key;\n    }\n\n    // Interpolate variables if provided\n    if (vars) {\n      return interpolate(translation, vars);\n    }\n\n    return translation;\n  }, [language]);\n\n  // Sync with localStorage on mount (handles cases where storage changed in another tab)\n  useEffect(() => {\n    const handleStorageChange = (e: StorageEvent) => {\n      if (e.key === STORAGE_KEY && e.newValue) {\n        const newLang = e.newValue === 'es' ? 'es' : 'pt';\n        setLanguageState(newLang);\n      }\n    };\n\n    window.addEventListener('storage', handleStorageChange);\n    return () => window.removeEventListener('storage', handleStorageChange);\n  }, []);\n\n  return (\n    <LanguageContext.Provider value={{ language, setLanguage, t }}>\n      {children}\n    </LanguageContext.Provider>\n  );\n};\n\nexport const useLanguage = (): LanguageContextType => {\n  const context = useContext(LanguageContext);\n  if (!context) {\n    throw new Error('useLanguage must be used within a LanguageProvider');\n  }\n  return context;\n};\n\nexport type { Language };\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\contexts\\ThemeContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":46,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":46,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useEffect, useState, ReactNode } from 'react';\n\ntype Theme = 'light' | 'dark';\n\ninterface ThemeContextType {\n  theme: Theme;\n  toggleTheme: () => void;\n  setTheme: (theme: Theme) => void;\n}\n\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\n\nexport function ThemeProvider({ children }: { children: ReactNode }) {\n  const [theme, setThemeState] = useState<Theme>(() => {\n    if (typeof window === 'undefined') return 'light';\n    \n    const stored = localStorage.getItem('theme') as Theme | null;\n    if (stored === 'light' || stored === 'dark') return stored;\n    \n    // Sempre inicia em modo claro por padr√£o\n    return 'light';\n  });\n\n  useEffect(() => {\n    const root = document.documentElement;\n    root.classList.remove('light', 'dark');\n    root.classList.add(theme);\n    localStorage.setItem('theme', theme);\n  }, [theme]);\n\n  const toggleTheme = () => {\n    setThemeState(prev => prev === 'light' ? 'dark' : 'light');\n  };\n\n  const setTheme = (newTheme: Theme) => {\n    setThemeState(newTheme);\n  };\n\n  return (\n    <ThemeContext.Provider value={{ theme, toggleTheme, setTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n\nexport function useTheme() {\n  const context = useContext(ThemeContext);\n  if (!context) {\n    throw new Error('useTheme must be used within a ThemeProvider');\n  }\n  return context;\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\data\\captions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\data\\templates.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\hooks\\use-mobile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\hooks\\use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\hooks\\useActiveUsers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\hooks\\useAdminDashboard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\hooks\\useAnalyticsEvents.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\hooks\\useAuditLog.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":85,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":88,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3117,3120],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3117,3120],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":103,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3284,3287],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3284,3287],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":106,"column":87,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":90,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3465,3468],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3465,3468],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":164,"column":89,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":164,"endColumn":92,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5720,5723],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5720,5723],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":167,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":167,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5899,5902],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5899,5902],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":170,"column":91,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":170,"endColumn":94,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6092,6095],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6092,6095],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { supabase } from \"@/integrations/supabase/client\";\n\nexport interface AuditLogEntry {\n  id: string;\n  table_name: string;\n  record_id: string;\n  action: \"INSERT\" | \"UPDATE\" | \"DELETE\";\n  old_data: Record<string, unknown> | null;\n  new_data: Record<string, unknown> | null;\n  user_id: string | null;\n  user_email: string | null;\n  created_at: string;\n  is_rolled_back: boolean;\n}\n\ninterface AuditLogFilters {\n  action?: string;\n  table_name?: string;\n  limit?: number;\n}\n\nconst tableNameMap: Record<string, string> = {\n  content_items: \"Conte√∫do\",\n  captions: \"Legendas\",\n  marketing_tools: \"Ferramentas\",\n};\n\nconst actionNameMap: Record<string, string> = {\n  INSERT: \"Criado\",\n  UPDATE: \"Editado\",\n  DELETE: \"Removido\",\n};\n\nexport const getTableDisplayName = (tableName: string) => {\n  return tableNameMap[tableName] || tableName;\n};\n\nexport const getActionDisplayName = (action: string) => {\n  return actionNameMap[action] || action;\n};\n\nexport const useAuditLogs = (filters: AuditLogFilters = {}) => {\n  return useQuery({\n    queryKey: [\"audit-logs\", filters],\n    queryFn: async () => {\n      let query = supabase\n        .from(\"audit_log\")\n        .select(\"*\")\n        .order(\"created_at\", { ascending: false })\n        .limit(filters.limit || 50);\n\n      if (filters.action) {\n        query = query.eq(\"action\", filters.action);\n      }\n      if (filters.table_name) {\n        query = query.eq(\"table_name\", filters.table_name);\n      }\n\n      const { data, error } = await query;\n      if (error) throw error;\n      return data as AuditLogEntry[];\n    },\n  });\n};\n\nexport const useRollbackAction = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (entry: AuditLogEntry) => {\n      const { table_name, record_id, action, old_data, new_data } = entry;\n\n      // Perform rollback based on action type\n      if (action === \"INSERT\") {\n        // Undo INSERT: Delete the created record\n        const { error } = await supabase\n          .from(table_name as \"content_items\" | \"captions\" | \"marketing_tools\")\n          .delete()\n          .eq(\"id\", record_id);\n        if (error) throw error;\n      } else if (action === \"UPDATE\") {\n        // Undo UPDATE: Restore old_data\n        if (!old_data) throw new Error(\"Dados anteriores n√£o dispon√≠veis\");\n        \n        // Remove fields that shouldn't be updated\n        const { id, created_at, ...updateData } = old_data as Record<string, unknown>;\n        \n        const { error } = await supabase\n          .from(table_name as \"content_items\" | \"captions\" | \"marketing_tools\")\n          .update(updateData)\n          .eq(\"id\", record_id);\n        if (error) throw error;\n      } else if (action === \"DELETE\") {\n        // Undo DELETE: Recreate the record\n        if (!old_data) throw new Error(\"Dados anteriores n√£o dispon√≠veis\");\n        \n        // Use type assertion for each table to satisfy TypeScript\n        if (table_name === \"content_items\") {\n          const { error } = await supabase.from(\"content_items\").insert(old_data as any);\n          if (error) throw error;\n        } else if (table_name === \"captions\") {\n          const { error } = await supabase.from(\"captions\").insert(old_data as any);\n          if (error) throw error;\n        } else if (table_name === \"marketing_tools\") {\n          const { error } = await supabase.from(\"marketing_tools\").insert(old_data as any);\n          if (error) throw error;\n        }\n      }\n\n      // Mark audit log entry as rolled back\n      await supabase\n        .from(\"audit_log\")\n        .update({ is_rolled_back: true })\n        .eq(\"id\", entry.id);\n\n      return entry;\n    },\n    onSuccess: () => {\n      // Invalidate all related queries\n      queryClient.invalidateQueries({ queryKey: [\"audit-logs\"] });\n      queryClient.invalidateQueries({ queryKey: [\"content-items\"] });\n      queryClient.invalidateQueries({ queryKey: [\"captions\"] });\n      queryClient.invalidateQueries({ queryKey: [\"marketing-tools\"] });\n      queryClient.invalidateQueries({ queryKey: [\"all-content-items\"] });\n      queryClient.invalidateQueries({ queryKey: [\"all-captions\"] });\n      queryClient.invalidateQueries({ queryKey: [\"all-marketing-tools\"] });\n    },\n  });\n};\n\nexport const useBatchRollback = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (entries: AuditLogEntry[]) => {\n      const results: { success: AuditLogEntry[]; failed: AuditLogEntry[] } = {\n        success: [],\n        failed: [],\n      };\n\n      // Process in sequence to avoid conflicts\n      for (const entry of entries) {\n        try {\n          const { table_name, record_id, action, old_data } = entry;\n\n          if (action === \"INSERT\") {\n            const { error } = await supabase\n              .from(table_name as \"content_items\" | \"captions\" | \"marketing_tools\")\n              .delete()\n              .eq(\"id\", record_id);\n            if (error) throw error;\n          } else if (action === \"UPDATE\") {\n            if (!old_data) throw new Error(\"Dados anteriores n√£o dispon√≠veis\");\n            const { id, created_at, ...updateData } = old_data as Record<string, unknown>;\n            const { error } = await supabase\n              .from(table_name as \"content_items\" | \"captions\" | \"marketing_tools\")\n              .update(updateData)\n              .eq(\"id\", record_id);\n            if (error) throw error;\n          } else if (action === \"DELETE\") {\n            if (!old_data) throw new Error(\"Dados anteriores n√£o dispon√≠veis\");\n            if (table_name === \"content_items\") {\n              const { error } = await supabase.from(\"content_items\").insert(old_data as any);\n              if (error) throw error;\n            } else if (table_name === \"captions\") {\n              const { error } = await supabase.from(\"captions\").insert(old_data as any);\n              if (error) throw error;\n            } else if (table_name === \"marketing_tools\") {\n              const { error } = await supabase.from(\"marketing_tools\").insert(old_data as any);\n              if (error) throw error;\n            }\n          }\n\n          // Mark as rolled back\n          await supabase\n            .from(\"audit_log\")\n            .update({ is_rolled_back: true })\n            .eq(\"id\", entry.id);\n\n          results.success.push(entry);\n        } catch (error) {\n          console.error(\"Rollback failed for entry:\", entry.id, error);\n          results.failed.push(entry);\n        }\n      }\n\n      if (results.failed.length > 0 && results.success.length === 0) {\n        throw new Error(`Falha ao desfazer ${results.failed.length} altera√ß√µes`);\n      }\n\n      return results;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"audit-logs\"] });\n      queryClient.invalidateQueries({ queryKey: [\"content-items\"] });\n      queryClient.invalidateQueries({ queryKey: [\"captions\"] });\n      queryClient.invalidateQueries({ queryKey: [\"marketing-tools\"] });\n      queryClient.invalidateQueries({ queryKey: [\"all-content-items\"] });\n      queryClient.invalidateQueries({ queryKey: [\"all-captions\"] });\n      queryClient.invalidateQueries({ queryKey: [\"all-marketing-tools\"] });\n    },\n  });\n};\n\nexport const getItemTitle = (entry: AuditLogEntry): string => {\n  const data = entry.new_data || entry.old_data;\n  if (!data) return \"Item desconhecido\";\n  \n  // Try common title fields\n  return (data.title as string) || (data.text as string)?.substring(0, 30) || \"Sem t√≠tulo\";\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\hooks\\useCalendarEntries.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\hooks\\useContent.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\hooks\\useEmailDashboard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\hooks\\useFavorites.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\hooks\\useGamification.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[664,667],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[664,667],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1581,1584],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1581,1584],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1958,1961],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1958,1961],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":91,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2944,2947],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2944,2947],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":99,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":99,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3245,3248],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3245,3248],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":135,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":135,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4715,4718],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4715,4718],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport {\r\n    UserProgress,\r\n    UserActivity,\r\n    ActivityType,\r\n    calculateLevel,\r\n    getLevelInfo,\r\n    calculateLevelProgress,\r\n    getPointsToNextLevel,\r\n    getActivityPoints,\r\n} from '@/lib/gamification';\r\nimport { toast } from 'sonner';\r\n\r\nexport interface GamificationState {\r\n    progress: UserProgress | null;\r\n    loading: boolean;\r\n    error: Error | null;\r\n}\r\n\r\nexport interface GamificationActions {\r\n    trackActivity: (activityType: ActivityType, metadata?: Record<string, any>) => Promise<void>;\r\n    refreshProgress: () => Promise<void>;\r\n    level: number;\r\n    levelName: string;\r\n    progressPercent: number;\r\n    pointsToNext: number;\r\n}\r\n\r\n/**\r\n * Hook for managing user gamification progress\r\n */\r\nexport function useGamification(): GamificationState & GamificationActions {\r\n    const { user } = useAuth();\r\n    const [progress, setProgress] = useState<UserProgress | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<Error | null>(null);\r\n\r\n    // Fetch user progress\r\n    const fetchProgress = useCallback(async () => {\r\n        if (!user) {\r\n            setProgress(null);\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            const { data, error: fetchError } = await (supabase\r\n                .from('user_progress') as any)\r\n                .select('*')\r\n                .eq('user_id', user.id)\r\n                .maybeSingle();\r\n\r\n            if (fetchError) throw fetchError;\r\n\r\n            if (!data) {\r\n                // Create initial progress if doesn't exist\r\n                const { data: newProgress, error: insertError } = await (supabase\r\n                    .from('user_progress') as any)\r\n                    .insert({\r\n                        user_id: user.id,\r\n                        level: 1,\r\n                        total_points: 0,\r\n                        videos_opened: 0,\r\n                        arts_clicked: 0,\r\n                        calendar_used: 0,\r\n                        tools_used: 0,\r\n                    })\r\n                    .select()\r\n                    .single();\r\n\r\n                if (insertError) throw insertError;\r\n                setProgress(newProgress as UserProgress);\r\n            } else {\r\n                setProgress(data as UserProgress);\r\n            }\r\n        } catch (err) {\r\n            console.error('Error fetching gamification progress:', err);\r\n            setError(err as Error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [user]);\r\n\r\n    // Track activity and update progress\r\n    const trackActivity = useCallback(\r\n        async (activityType: ActivityType, metadata?: Record<string, any>) => {\r\n            if (!user || !progress) return;\r\n\r\n            const pointsEarned = getActivityPoints(activityType);\r\n\r\n            try {\r\n                // Insert activity log\r\n                const { error: activityError } = await (supabase\r\n                    .from('user_activities') as any)\r\n                    .insert({\r\n                        user_id: user.id,\r\n                        activity_type: activityType,\r\n                        points_earned: pointsEarned,\r\n                        metadata,\r\n                    });\r\n\r\n                if (activityError) throw activityError;\r\n\r\n                // Update progress\r\n                const newTotalPoints = progress.total_points + pointsEarned;\r\n                const newLevel = calculateLevel(newTotalPoints);\r\n\r\n                const updates: Partial<UserProgress> = {\r\n                    total_points: newTotalPoints,\r\n                    level: newLevel,\r\n                };\r\n\r\n                // Increment specific counter\r\n                switch (activityType) {\r\n                    case 'video':\r\n                        updates.videos_opened = progress.videos_opened + 1;\r\n                        break;\r\n                    case 'art':\r\n                        updates.arts_clicked = progress.arts_clicked + 1;\r\n                        break;\r\n                    case 'calendar':\r\n                        updates.calendar_used = progress.calendar_used + 1;\r\n                        break;\r\n                    case 'tool':\r\n                        updates.tools_used = progress.tools_used + 1;\r\n                        break;\r\n                }\r\n\r\n                const { data: updatedProgress, error: updateError } = await (supabase\r\n                    .from('user_progress') as any)\r\n                    .update(updates)\r\n                    .eq('user_id', user.id)\r\n                    .select()\r\n                    .single();\r\n\r\n                if (updateError) throw updateError;\r\n\r\n                setProgress(updatedProgress as UserProgress);\r\n\r\n                // Show level up toast\r\n                if (newLevel > progress.level) {\r\n                    const levelInfo = getLevelInfo(newLevel);\r\n                    toast.success(`üéâ Parab√©ns! Voc√™ subiu para ${levelInfo.name}!`, {\r\n                        duration: 5000,\r\n                    });\r\n                } else {\r\n                    // Show points earned\r\n                    toast.success(`+${pointsEarned} pontos! üåü`, {\r\n                        duration: 2000,\r\n                    });\r\n                }\r\n            } catch (err) {\r\n                console.error('Error tracking activity:', err);\r\n                toast.error('Erro ao registrar atividade');\r\n            }\r\n        },\r\n        [user, progress]\r\n    );\r\n\r\n    // Refresh progress manually\r\n    const refreshProgress = useCallback(async () => {\r\n        await fetchProgress();\r\n    }, [fetchProgress]);\r\n\r\n    // Auto-fetch on mount and user change\r\n    useEffect(() => {\r\n        fetchProgress();\r\n    }, [fetchProgress]);\r\n\r\n    // Realtime subscription\r\n    useEffect(() => {\r\n        if (!user) return;\r\n\r\n        const channel = supabase\r\n            .channel(`user_progress:${user.id}`)\r\n            .on(\r\n                'postgres_changes',\r\n                {\r\n                    event: '*',\r\n                    schema: 'public',\r\n                    table: 'user_progress',\r\n                    filter: `user_id=eq.${user.id}`,\r\n                },\r\n                (payload) => {\r\n                    console.log('[useGamification] Progress updated:', payload);\r\n                    setProgress(payload.new as UserProgress);\r\n                }\r\n            )\r\n            .subscribe();\r\n\r\n        return () => {\r\n            supabase.removeChannel(channel);\r\n        };\r\n    }, [user]);\r\n\r\n    // Computed values\r\n    const level = progress?.level || 1;\r\n    const levelName = getLevelInfo(level).name;\r\n    const progressPercent = calculateLevelProgress(progress?.total_points || 0);\r\n    const pointsToNext = getPointsToNextLevel(progress?.total_points || 0);\r\n\r\n    return {\r\n        progress,\r\n        loading,\r\n        error,\r\n        trackActivity,\r\n        refreshProgress,\r\n        level,\r\n        levelName,\r\n        progressPercent,\r\n        pointsToNext,\r\n    };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\hooks\\useImportCaptions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\hooks\\useImportContent.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\hooks\\useInvalidateContent.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\hooks\\useMarketingFunnel.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\hooks\\useMarketingStats.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\hooks\\useStripeDashboard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\hooks\\useTrackUtm.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\integrations\\supabase\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\integrations\\supabase\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\lib\\gamification.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[911,914],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[911,914],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Gamification logic and utilities\r\nexport const POINTS_CONFIG = {\r\n    VIDEO_OPENED: 10,\r\n    ART_CLICKED: 5,\r\n    CALENDAR_USED: 15,\r\n    TOOL_USED: 20,\r\n} as const;\r\n\r\nexport const LEVELS = {\r\n    1: { name: 'üéØ Jr', minPoints: 0, maxPoints: 100 },\r\n    2: { name: 'üöÄ Master', minPoints: 101, maxPoints: 300 },\r\n    3: { name: '‚≠ê Max', minPoints: 301, maxPoints: Infinity },\r\n} as const;\r\n\r\nexport type ActivityType = 'video' | 'art' | 'calendar' | 'tool';\r\n\r\nexport interface UserProgress {\r\n    id: string;\r\n    user_id: string;\r\n    level: number;\r\n    total_points: number;\r\n    videos_opened: number;\r\n    arts_clicked: number;\r\n    calendar_used: number;\r\n    tools_used: number;\r\n    created_at: string;\r\n    updated_at: string;\r\n}\r\n\r\nexport interface UserActivity {\r\n    id: string;\r\n    user_id: string;\r\n    activity_type: ActivityType;\r\n    points_earned: number;\r\n    metadata?: Record<string, any>;\r\n    created_at: string;\r\n}\r\n\r\n/**\r\n * Calculate user level based on total points\r\n */\r\nexport function calculateLevel(totalPoints: number): number {\r\n    if (totalPoints <= 100) return 1;\r\n    if (totalPoints <= 300) return 2;\r\n    return 3;\r\n}\r\n\r\n/**\r\n * Get level info by level number\r\n */\r\nexport function getLevelInfo(level: number) {\r\n    return LEVELS[level as keyof typeof LEVELS] || LEVELS[1];\r\n}\r\n\r\n/**\r\n * Calculate progress percentage within current level\r\n */\r\nexport function calculateLevelProgress(totalPoints: number): number {\r\n    const level = calculateLevel(totalPoints);\r\n    const levelInfo = getLevelInfo(level);\r\n\r\n    if (level === 3) {\r\n        // Max level - always show 100%\r\n        return 100;\r\n    }\r\n\r\n    const pointsInLevel = totalPoints - levelInfo.minPoints;\r\n    const levelRange = levelInfo.maxPoints - levelInfo.minPoints;\r\n\r\n    return Math.min(100, Math.round((pointsInLevel / levelRange) * 100));\r\n}\r\n\r\n/**\r\n * Get points to next level\r\n */\r\nexport function getPointsToNextLevel(totalPoints: number): number {\r\n    const level = calculateLevel(totalPoints);\r\n\r\n    if (level === 3) {\r\n        return 0; // Already at max level\r\n    }\r\n\r\n    const nextLevelInfo = getLevelInfo(level + 1);\r\n    return nextLevelInfo.minPoints - totalPoints;\r\n}\r\n\r\n/**\r\n * Get activity points based on type\r\n */\r\nexport function getActivityPoints(activityType: ActivityType): number {\r\n    switch (activityType) {\r\n        case 'video':\r\n            return POINTS_CONFIG.VIDEO_OPENED;\r\n        case 'art':\r\n            return POINTS_CONFIG.ART_CLICKED;\r\n        case 'calendar':\r\n            return POINTS_CONFIG.CALENDAR_USED;\r\n        case 'tool':\r\n            return POINTS_CONFIG.TOOL_USED;\r\n        default:\r\n            return 0;\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\lib\\language-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\lib\\meta-pixel-es.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\lib\\meta-pixel.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\lib\\phone-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\lib\\stripe.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\lib\\translations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\AdminLogin.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\Auth.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\AuthVerify.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'verifyToken'. Either include it or remove the dependency array.","line":24,"column":6,"nodeType":"ArrayExpression","endLine":24,"endColumn":13,"suggestions":[{"desc":"Update the dependencies array to be: [token, verifyToken]","fix":{"range":[804,811],"text":"[token, verifyToken]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from \"react\";\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Loader2, CheckCircle, XCircle, RefreshCw } from \"lucide-react\";\nimport { supabase } from \"@/integrations/supabase/client\";\n\nconst AuthVerify = () => {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const token = searchParams.get(\"token\");\n\n  const [status, setStatus] = useState<\"loading\" | \"success\" | \"error\">(\"loading\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  useEffect(() => {\n    if (!token) {\n      setStatus(\"error\");\n      setErrorMessage(\"Token n√£o encontrado na URL.\");\n      return;\n    }\n\n    verifyToken();\n  }, [token]);\n\n  const verifyToken = async () => {\n    setStatus(\"loading\");\n    setErrorMessage(\"\");\n\n    try {\n      const { data, error } = await supabase.functions.invoke(\"verify-magic-link\", {\n        body: { token },\n      });\n\n      if (error || !data?.success) {\n        setStatus(\"error\");\n        setErrorMessage(data?.error || error?.message || \"Erro ao verificar token\");\n        return;\n      }\n\n      // Configurar sess√£o com os tokens recebidos\n      const { access_token, refresh_token } = data.session;\n\n      const { error: sessionError } = await supabase.auth.setSession({\n        access_token,\n        refresh_token,\n      });\n\n      if (sessionError) {\n        console.error(\"Session error:\", sessionError);\n        setStatus(\"error\");\n        setErrorMessage(\"Erro ao criar sess√£o. Tente novamente.\");\n        return;\n      }\n\n      setStatus(\"success\");\n\n      // Redirecionar ap√≥s 2 segundos\n      setTimeout(() => {\n        navigate(\"/\", { replace: true });\n      }, 2000);\n    } catch (error) {\n      console.error(\"Verify error:\", error);\n      setStatus(\"error\");\n      setErrorMessage(\"Erro ao processar verifica√ß√£o.\");\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-background via-primary/5 to-accent/10 flex items-center justify-center p-4\">\n      <Card className=\"w-full max-w-md text-center border-primary/20 shadow-2xl\">\n        <CardContent className=\"pt-12 pb-8 px-8 space-y-6\">\n          {status === \"loading\" && (\n            <>\n              <div className=\"mx-auto w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center\">\n                <Loader2 className=\"h-10 w-10 text-primary animate-spin\" />\n              </div>\n              <div className=\"space-y-2\">\n                <h1 className=\"text-2xl font-bold text-foreground\">\n                  Verificando seu acesso...\n                </h1>\n                <p className=\"text-muted-foreground\">\n                  Aguarde enquanto validamos seu link.\n                </p>\n              </div>\n            </>\n          )}\n\n          {status === \"success\" && (\n            <>\n              <div className=\"mx-auto w-20 h-20 bg-primary/20 rounded-full flex items-center justify-center\">\n                <CheckCircle className=\"h-10 w-10 text-primary\" />\n              </div>\n              <div className=\"space-y-2\">\n                <h1 className=\"text-2xl font-bold text-primary\">\n                  Acesso Confirmado! ‚ú®\n                </h1>\n                <p className=\"text-muted-foreground\">\n                  Redirecionando para a plataforma...\n                </p>\n              </div>\n            </>\n          )}\n\n          {status === \"error\" && (\n            <>\n              <div className=\"mx-auto w-20 h-20 bg-destructive/20 rounded-full flex items-center justify-center\">\n                <XCircle className=\"h-10 w-10 text-destructive\" />\n              </div>\n              <div className=\"space-y-2\">\n                <h1 className=\"text-2xl font-bold text-destructive\">\n                  Erro na Verifica√ß√£o\n                </h1>\n                <p className=\"text-muted-foreground\">\n                  {errorMessage}\n                </p>\n              </div>\n\n              <div className=\"space-y-3 pt-4\">\n                <Button\n                  onClick={() => navigate(\"/auth\")}\n                  className=\"w-full\"\n                >\n                  <RefreshCw className=\"mr-2 h-4 w-4\" />\n                  Solicitar Novo Link\n                </Button>\n                <Button\n                  variant=\"ghost\"\n                  onClick={() => navigate(\"/\")}\n                  className=\"w-full\"\n                >\n                  Voltar para Home\n                </Button>\n              </div>\n            </>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default AuthVerify;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\Calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\CalendarES.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\Gestao.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\Index.tsx","messages":[{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":246,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":251,"endColumn":12,"suggestions":[{"messageId":"addBrackets","fix":{"range":[9467,16824],"text":"{ const sortedVideos = [...filteredVideos].sort((a, b) => {\n          if (a.is_featured && !b.is_featured) return -1;\n          if (!a.is_featured && b.is_featured) return 1;\n          // Ordenar por data - mais recente primeiro\n          return new Date(b.created_at).getTime() - new Date(a.created_at).getTime();\n        });\n        const displayedSortedVideos = showAllVideos ? sortedVideos : sortedVideos.slice(0, 10);\n\n        return (\n          <section className=\"animate-fade-in\">\n            {/* Highlights Section - Show at top if there are highlighted items */}\n            {highlightedItems && highlightedItems.length > 0 && (\n              <div className=\"mb-8\">\n                <SectionHeader\n                  title=\"‚ú® Destaques da Semana\"\n                  subtitle=\"Conte√∫dos em destaque selecionados para voc√™\"\n                />\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  {highlightedItems.map(item => (\n                    <Card key={item.id} className=\"overflow-hidden border-primary/30 shadow-lg hover:shadow-xl transition-shadow\">\n                      {/* Animated Media (GIF or Video) */}\n                      {item.media_url ? (\n                        <div className=\"aspect-video bg-muted\">\n                          {item.media_type === 'gif' ? (\n                            <img\n                              src={item.media_url}\n                              alt={item.title}\n                              className=\"w-full h-full object-cover\"\n                              loading=\"lazy\"\n                              onError={(e) => {\n                                e.currentTarget.src = '/placeholder.svg';\n                              }}\n                            />\n                          ) : (\n                            <video\n                              src={item.media_url}\n                              autoPlay\n                              loop\n                              muted\n                              playsInline\n                              className=\"w-full h-full object-cover\"\n                              onError={(e) => {\n                                e.currentTarget.style.display = 'none';\n                              }}\n                            />\n                          )}\n                        </div>\n                      ) : item.image_url ? (\n                        <div className=\"aspect-video bg-muted\">\n                          <img\n                            src={item.image_url}\n                            alt={item.title}\n                            className=\"w-full h-full object-cover\"\n                            loading=\"lazy\"\n                          />\n                        </div>\n                      ) : (\n                        <div className=\"aspect-video bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center\">\n                          <span className=\"text-4xl\">{item.icon || \"‚ú®\"}</span>\n                        </div>\n                      )}\n                      <CardContent className=\"p-4\">\n                        <Badge className=\"mb-2 bg-gradient-to-r from-primary to-accent text-primary-foreground\">\n                          Destaque\n                        </Badge>\n                        <h3 className=\"font-bold text-lg line-clamp-1\">{item.title}</h3>\n                        {item.description && (\n                          <p className=\"text-sm text-muted-foreground line-clamp-2 mt-1\">{item.description}</p>\n                        )}\n                        <Button\n                          className=\"w-full mt-3\"\n                          onClick={() => {\n                            trackClick(item.type, item.id);\n                            window.open(item.url, '_blank');\n                          }}\n                        >\n                          <ExternalLink className=\"w-4 h-4 mr-2\" />\n                          Editar no Canva\n                        </Button>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            <SectionHeader\n              title=\"V√≠deos Reels Edit√°veis\"\n              subtitle=\"Templates prontos para editar no Canva e publicar\"\n            />\n\n            <div className=\"flex justify-center mb-6\">\n              <ContentFilterDropdown\n                selectedFilters={contentFilters}\n                onFiltersChange={setContentFilters}\n              />\n            </div>\n\n            {videosLoading ? (\n              <div className=\"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4\">\n                {[...Array(10)].map((_, i) => (\n                  <Skeleton key={i} className=\"aspect-[9/16] rounded-xl\" />\n                ))}\n              </div>\n            ) : (\n              <>\n                {/* Grid unificado: 5 colunas desktop, 2 mobile */}\n                <div className=\"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4\">\n                  {displayedSortedVideos.map((template, index) => (\n                    <PremiumCard\n                      key={template.id}\n                      id={template.id}\n                      title={template.title}\n                      url={template.url}\n                      isNew={newestIds.includes(template.id)}\n                      icon={getIcon(template.type, template.icon)}\n                      // Os 10 primeiros (featured) podem ter imagem personalizada\n                      imageUrl={index < 10 && template.image_url ? template.image_url : undefined}\n                      aspectRatio=\"9/16\"\n                      onClick={() => handleCardClick(template)}\n                      isFavorite={isFavorite(\"content_item\", template.id)}\n                      onToggleFavorite={() => handleToggleFavorite(\"content_item\", template.id)}\n                      onPremiumRequired={getPremiumCallback()}\n                    />\n                  ))}\n                </div>\n\n                {sortedVideos.length > 10 && (\n                  <div className=\"flex justify-center mt-8\">\n                    <Button\n                      variant=\"outline\"\n                      onClick={() => setShowAllVideos(!showAllVideos)}\n                      className=\"gap-2 rounded-full px-6\"\n                    >\n                      {showAllVideos ? (\n                        <>\n                          <ChevronUp className=\"h-4 w-4\" />\n                          Mostrar menos\n                        </>\n                      ) : (\n                        <>\n                          <ChevronDown className=\"h-4 w-4\" />\n                          Ver mais v√≠deos ({sortedVideos.length - 10} restantes)\n                        </>\n                      )}\n                    </Button>\n                  </div>\n                )}\n\n                {/* Floating minimize button when expanded */}\n                {showAllVideos && (\n                  <Button\n                    onClick={() => setShowAllVideos(false)}\n                    className=\"fixed bottom-24 md:bottom-8 right-4 z-50 rounded-full shadow-xl gap-2\"\n                    size=\"lg\"\n                  >\n                    <ChevronUp className=\"h-5 w-5\" />\n                    Minimizar\n                  </Button>\n                )}\n              </>\n            )}\n          </section>\n        ); }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":252,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":252,"endColumn":96,"suggestions":[{"messageId":"addBrackets","fix":{"range":[9467,16824],"text":"{ const sortedVideos = [...filteredVideos].sort((a, b) => {\n          if (a.is_featured && !b.is_featured) return -1;\n          if (!a.is_featured && b.is_featured) return 1;\n          // Ordenar por data - mais recente primeiro\n          return new Date(b.created_at).getTime() - new Date(a.created_at).getTime();\n        });\n        const displayedSortedVideos = showAllVideos ? sortedVideos : sortedVideos.slice(0, 10);\n\n        return (\n          <section className=\"animate-fade-in\">\n            {/* Highlights Section - Show at top if there are highlighted items */}\n            {highlightedItems && highlightedItems.length > 0 && (\n              <div className=\"mb-8\">\n                <SectionHeader\n                  title=\"‚ú® Destaques da Semana\"\n                  subtitle=\"Conte√∫dos em destaque selecionados para voc√™\"\n                />\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  {highlightedItems.map(item => (\n                    <Card key={item.id} className=\"overflow-hidden border-primary/30 shadow-lg hover:shadow-xl transition-shadow\">\n                      {/* Animated Media (GIF or Video) */}\n                      {item.media_url ? (\n                        <div className=\"aspect-video bg-muted\">\n                          {item.media_type === 'gif' ? (\n                            <img\n                              src={item.media_url}\n                              alt={item.title}\n                              className=\"w-full h-full object-cover\"\n                              loading=\"lazy\"\n                              onError={(e) => {\n                                e.currentTarget.src = '/placeholder.svg';\n                              }}\n                            />\n                          ) : (\n                            <video\n                              src={item.media_url}\n                              autoPlay\n                              loop\n                              muted\n                              playsInline\n                              className=\"w-full h-full object-cover\"\n                              onError={(e) => {\n                                e.currentTarget.style.display = 'none';\n                              }}\n                            />\n                          )}\n                        </div>\n                      ) : item.image_url ? (\n                        <div className=\"aspect-video bg-muted\">\n                          <img\n                            src={item.image_url}\n                            alt={item.title}\n                            className=\"w-full h-full object-cover\"\n                            loading=\"lazy\"\n                          />\n                        </div>\n                      ) : (\n                        <div className=\"aspect-video bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center\">\n                          <span className=\"text-4xl\">{item.icon || \"‚ú®\"}</span>\n                        </div>\n                      )}\n                      <CardContent className=\"p-4\">\n                        <Badge className=\"mb-2 bg-gradient-to-r from-primary to-accent text-primary-foreground\">\n                          Destaque\n                        </Badge>\n                        <h3 className=\"font-bold text-lg line-clamp-1\">{item.title}</h3>\n                        {item.description && (\n                          <p className=\"text-sm text-muted-foreground line-clamp-2 mt-1\">{item.description}</p>\n                        )}\n                        <Button\n                          className=\"w-full mt-3\"\n                          onClick={() => {\n                            trackClick(item.type, item.id);\n                            window.open(item.url, '_blank');\n                          }}\n                        >\n                          <ExternalLink className=\"w-4 h-4 mr-2\" />\n                          Editar no Canva\n                        </Button>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            <SectionHeader\n              title=\"V√≠deos Reels Edit√°veis\"\n              subtitle=\"Templates prontos para editar no Canva e publicar\"\n            />\n\n            <div className=\"flex justify-center mb-6\">\n              <ContentFilterDropdown\n                selectedFilters={contentFilters}\n                onFiltersChange={setContentFilters}\n              />\n            </div>\n\n            {videosLoading ? (\n              <div className=\"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4\">\n                {[...Array(10)].map((_, i) => (\n                  <Skeleton key={i} className=\"aspect-[9/16] rounded-xl\" />\n                ))}\n              </div>\n            ) : (\n              <>\n                {/* Grid unificado: 5 colunas desktop, 2 mobile */}\n                <div className=\"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4\">\n                  {displayedSortedVideos.map((template, index) => (\n                    <PremiumCard\n                      key={template.id}\n                      id={template.id}\n                      title={template.title}\n                      url={template.url}\n                      isNew={newestIds.includes(template.id)}\n                      icon={getIcon(template.type, template.icon)}\n                      // Os 10 primeiros (featured) podem ter imagem personalizada\n                      imageUrl={index < 10 && template.image_url ? template.image_url : undefined}\n                      aspectRatio=\"9/16\"\n                      onClick={() => handleCardClick(template)}\n                      isFavorite={isFavorite(\"content_item\", template.id)}\n                      onToggleFavorite={() => handleToggleFavorite(\"content_item\", template.id)}\n                      onPremiumRequired={getPremiumCallback()}\n                    />\n                  ))}\n                </div>\n\n                {sortedVideos.length > 10 && (\n                  <div className=\"flex justify-center mt-8\">\n                    <Button\n                      variant=\"outline\"\n                      onClick={() => setShowAllVideos(!showAllVideos)}\n                      className=\"gap-2 rounded-full px-6\"\n                    >\n                      {showAllVideos ? (\n                        <>\n                          <ChevronUp className=\"h-4 w-4\" />\n                          Mostrar menos\n                        </>\n                      ) : (\n                        <>\n                          <ChevronDown className=\"h-4 w-4\" />\n                          Ver mais v√≠deos ({sortedVideos.length - 10} restantes)\n                        </>\n                      )}\n                    </Button>\n                  </div>\n                )}\n\n                {/* Floating minimize button when expanded */}\n                {showAllVideos && (\n                  <Button\n                    onClick={() => setShowAllVideos(false)}\n                    className=\"fixed bottom-24 md:bottom-8 right-4 z-50 rounded-full shadow-xl gap-2\"\n                    size=\"lg\"\n                  >\n                    <ChevronUp className=\"h-5 w-5\" />\n                    Minimizar\n                  </Button>\n                )}\n              </>\n            )}\n          </section>\n        ); }"},"desc":"Add {} brackets around the case block."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { PremiumGateModal } from \"@/components/PremiumGateModal\";\nimport { ResourceSection } from \"@/components/ResourceSection\";\nimport { Button } from \"@/components/ui/button\";\nimport { ChevronDown, ChevronUp, Loader2, Heart, Sparkles } from \"lucide-react\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { toast } from \"sonner\";\n\n// Canva-style components\nimport { HeroBanner } from \"@/components/canva/HeroBanner\";\nimport { CategoryNav, CategoryType } from \"@/components/canva/CategoryNav\";\nimport { PremiumCard } from \"@/components/canva/PremiumCard\";\nimport { ContentFilterDropdown, ContentFilterType } from \"@/components/canva/ContentFilterDropdown\";\nimport { SectionHeader } from \"@/components/canva/SectionHeader\";\nimport { CaptionCard } from \"@/components/canva/CaptionCard\";\nimport { ToolCard } from \"@/components/canva/ToolCard\";\nimport { BottomNav } from \"@/components/canva/BottomNav\";\n\n// Database hooks\nimport {\n  useContentItems,\n  useCaptions,\n  useMarketingTools,\n  useTrackClick,\n  useFeaturedItems,\n  useNewestItemIds,\n  useHighlightedItems,\n  ContentItem,\n  Caption,\n} from \"@/hooks/useContent\";\nimport { useTrackPageView } from \"@/hooks/useAdminDashboard\";\nimport { useFavorites } from \"@/hooks/useFavorites\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ExternalLink } from \"lucide-react\";\n\n// Static resources (downloads and resources that don't need DB management)\nimport { resources, videoDownloads } from \"@/data/templates\";\nimport { trackViewContent } from \"@/lib/meta-pixel\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { useGamification } from \"@/hooks/useGamification\";\n\n\n\nconst Index = () => {\n  const navigate = useNavigate();\n  const { user, loading, subscription } = useAuth();\n  const { setLanguage, t } = useLanguage();\n\n  // Force PT language on this page\n  useEffect(() => {\n    document.documentElement.lang = 'pt';\n    setLanguage('pt');\n  }, [setLanguage]);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [showAllVideos, setShowAllVideos] = useState(false);\n  const [showAllCaptions, setShowAllCaptions] = useState(false);\n  const [contentFilters, setContentFilters] = useState<ContentFilterType[]>([]);\n  const [activeCategory, setActiveCategory] = useState<CategoryType>('videos');\n  const [showPremiumGate, setShowPremiumGate] = useState(false);\n\n  // Database hooks\n  const { data: videoTemplates, isLoading: videosLoading } = useContentItems(['video', 'seasonal']);\n  const { data: featuredVideos, isLoading: featuredLoading } = useFeaturedItems();\n  const { data: feedTemplates, isLoading: feedLoading } = useContentItems('feed');\n  const { data: storyTemplates, isLoading: storiesLoading } = useContentItems(['story', 'weekly-story']);\n  const { data: captionsData, isLoading: captionsLoading } = useCaptions();\n  const { data: toolsData, isLoading: toolsLoading } = useMarketingTools();\n  const { data: newestIds = [] } = useNewestItemIds();\n  const { data: highlightedItems, isLoading: highlightsLoading } = useHighlightedItems();\n  const { trackClick } = useTrackClick();\n  const { trackPageView } = useTrackPageView();\n  const { favorites, isFavorite, toggleFavorite, favoritesCount, MAX_FAVORITES } = useFavorites();\n  const { trackActivity } = useGamification();\n\n  // Track view content when user is logged in\n  useEffect(() => {\n    if (user) {\n      trackViewContent('Plataforma Principal');\n      trackPageView('/');\n    }\n  }, [user, trackPageView]);\n\n  // Show loading while checking auth\n  if (loading || subscription.loading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  // Check if user is subscribed for showing premium content (logged in + active subscription)\n  const isSubscribed = user && subscription.subscribed;\n\n  // Function to get the premium required callback (only for non-subscribers)\n  const getPremiumCallback = () => {\n    if (isSubscribed) return undefined;\n    return () => setShowPremiumGate(true);\n  };\n  const destinosNacionais = [\n    'Maragogi', 'Salvador', 'Trancoso', 'Jalap√£o', 'Foz do Igua√ßu', 'Florian√≥polis',\n    'Gramado', 'Natal', 'Fortaleza', 'Pantanal', 'Rio de Janeiro', 'Recife',\n    'Balne√°rio Cambori√∫', 'Alter do Ch√£o', 'Arraial do Cabo', 'Rota das Emo√ß√µes',\n    'Macei√≥', 'Len√ß√≥is Maranhenses', 'Fernando de Noronha', 'Angra dos Reis',\n    'Jericoacoara', 'Porto de Galinhas', 'Amaz√¥nia', 'Amazonas', 'Alagoas',\n    'Jo√£o Pessoa', 'Ouro Preto', 'Genipabu', '5 Praias Floripa', 'Bonito',\n    'Chapada Diamantina', 'Curitiba', 'S√£o Paulo', 'Belo Horizonte', 'Manaus'\n  ];\n\n  const isNacional = (title: string, category?: string | null) => {\n    if (category === 'nacional') return true;\n    if (category === 'internacional') return false;\n    return destinosNacionais.some(destino =>\n      title.toLowerCase().includes(destino.toLowerCase())\n    ) || title.includes('- AL') || title.includes('- BA') || title.includes('- CE') ||\n      title.includes('- SC') || title.includes('- RN') || title.includes('- TO') ||\n      title.includes('- PE') || title.includes('- PB') || title.includes('- MG') ||\n      title.includes('- PR') || title.includes('- AM') || title.includes('- PA') ||\n      title.includes('- MS');\n  };\n\n  const isInfluencer = (title: string, influencer: string) => {\n    return title.toLowerCase().includes(influencer.toLowerCase());\n  };\n\n  const filterTemplates = (items: ContentItem[] | undefined) => {\n    if (!items) return [];\n    let filtered = items.filter(item =>\n      item.title.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n\n    // Aplicar filtro multi-select\n    if (contentFilters.length > 0) {\n      filtered = filtered.filter(item => {\n        // Se nenhum filtro selecionado, mostra todos\n        let matches = false;\n\n        if (contentFilters.includes('nacionais') && isNacional(item.title, item.category)) {\n          matches = true;\n        }\n        if (contentFilters.includes('internacionais') && !isNacional(item.title, item.category) && item.type === 'video') {\n          matches = true;\n        }\n        if (contentFilters.includes('artes') && item.type === 'feed') {\n          matches = true;\n        }\n        if (contentFilters.includes('stories') && (item.type === 'story' || item.type === 'weekly-story')) {\n          matches = true;\n        }\n\n        return matches;\n      });\n    }\n\n    return filtered;\n  };\n\n  const filterCaptions = () => {\n    if (!captionsData) return [];\n    return captionsData.filter(caption =>\n      caption.destination.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      caption.text.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n  };\n\n  const getIcon = (type: string, icon?: string) => {\n    if (icon) return icon;\n    switch (type) {\n      case \"video\": return \"üé¨\";\n      case \"feed\": return \"üñºÔ∏è\";\n      case \"story\": return \"üì±\";\n      default: return \"‚ú®\";\n    }\n  };\n\n  const handleCardClick = (item: ContentItem) => {\n    trackClick(item.type, item.id);\n\n    // Gamification tracking\n    if (item.type === 'video' || item.type === 'seasonal') {\n      trackActivity('video'); // +10 pts\n    } else if (item.type === 'feed') {\n      trackActivity('art'); // +5 pts\n    } else if (item.type === 'story' || item.type === 'weekly-story') {\n      trackActivity('art'); // +5 pts\n    }\n\n    // Nota: a abertura da aba agora √© controlada pelo PremiumCard\n  };\n\n  const handleCaptionClick = (caption: Caption) => {\n    trackClick('caption', caption.id);\n  };\n\n  const handleToggleFavorite = (contentType: \"content_item\" | \"caption\" | \"marketing_tool\", contentId: string) => {\n    if (!user) {\n      toast.error(\"Fa√ßa login para salvar favoritos\");\n      return;\n    }\n    toggleFavorite.mutate(\n      { contentType, contentId },\n      {\n        onSuccess: (result) => {\n          if (result.action === \"added\") {\n            toast.success(\"Adicionado aos favoritos!\");\n          } else {\n            toast.info(\"Removido dos favoritos\");\n          }\n        },\n        onError: () => {\n          toast.error(\"Erro ao atualizar favoritos\");\n        },\n      }\n    );\n  };\n\n  const filteredVideos = filterTemplates(videoTemplates);\n  const displayedVideos = showAllVideos ? filteredVideos : filteredVideos.slice(0, 8);\n\n  const filteredCaptions = filterCaptions();\n  const displayedCaptions = showAllCaptions ? filteredCaptions : filteredCaptions.slice(0, 8);\n\n  // Get weekly stories from story templates\n  const weeklyStories = storyTemplates?.filter(s => s.type === 'weekly-story') || [];\n  const regularStories = storyTemplates?.filter(s => s.type === 'story') || [];\n\n  // Loading skeleton for content\n  const ContentSkeleton = () => (\n    <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n      {[...Array(8)].map((_, i) => (\n        <Skeleton key={i} className=\"aspect-[9/16] rounded-xl\" />\n      ))}\n    </div>\n  );\n\n  // Content sections based on active category\n  const renderContent = () => {\n    switch (activeCategory) {\n      case 'videos':\n        // Ordenar: featured primeiro, depois por data (mais recente primeiro)\n        const sortedVideos = [...filteredVideos].sort((a, b) => {\n          if (a.is_featured && !b.is_featured) return -1;\n          if (!a.is_featured && b.is_featured) return 1;\n          // Ordenar por data - mais recente primeiro\n          return new Date(b.created_at).getTime() - new Date(a.created_at).getTime();\n        });\n        const displayedSortedVideos = showAllVideos ? sortedVideos : sortedVideos.slice(0, 10);\n\n        return (\n          <section className=\"animate-fade-in\">\n            {/* Highlights Section - Show at top if there are highlighted items */}\n            {highlightedItems && highlightedItems.length > 0 && (\n              <div className=\"mb-8\">\n                <SectionHeader\n                  title=\"‚ú® Destaques da Semana\"\n                  subtitle=\"Conte√∫dos em destaque selecionados para voc√™\"\n                />\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  {highlightedItems.map(item => (\n                    <Card key={item.id} className=\"overflow-hidden border-primary/30 shadow-lg hover:shadow-xl transition-shadow\">\n                      {/* Animated Media (GIF or Video) */}\n                      {item.media_url ? (\n                        <div className=\"aspect-video bg-muted\">\n                          {item.media_type === 'gif' ? (\n                            <img\n                              src={item.media_url}\n                              alt={item.title}\n                              className=\"w-full h-full object-cover\"\n                              loading=\"lazy\"\n                              onError={(e) => {\n                                e.currentTarget.src = '/placeholder.svg';\n                              }}\n                            />\n                          ) : (\n                            <video\n                              src={item.media_url}\n                              autoPlay\n                              loop\n                              muted\n                              playsInline\n                              className=\"w-full h-full object-cover\"\n                              onError={(e) => {\n                                e.currentTarget.style.display = 'none';\n                              }}\n                            />\n                          )}\n                        </div>\n                      ) : item.image_url ? (\n                        <div className=\"aspect-video bg-muted\">\n                          <img\n                            src={item.image_url}\n                            alt={item.title}\n                            className=\"w-full h-full object-cover\"\n                            loading=\"lazy\"\n                          />\n                        </div>\n                      ) : (\n                        <div className=\"aspect-video bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center\">\n                          <span className=\"text-4xl\">{item.icon || \"‚ú®\"}</span>\n                        </div>\n                      )}\n                      <CardContent className=\"p-4\">\n                        <Badge className=\"mb-2 bg-gradient-to-r from-primary to-accent text-primary-foreground\">\n                          Destaque\n                        </Badge>\n                        <h3 className=\"font-bold text-lg line-clamp-1\">{item.title}</h3>\n                        {item.description && (\n                          <p className=\"text-sm text-muted-foreground line-clamp-2 mt-1\">{item.description}</p>\n                        )}\n                        <Button\n                          className=\"w-full mt-3\"\n                          onClick={() => {\n                            trackClick(item.type, item.id);\n                            window.open(item.url, '_blank');\n                          }}\n                        >\n                          <ExternalLink className=\"w-4 h-4 mr-2\" />\n                          Editar no Canva\n                        </Button>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            <SectionHeader\n              title=\"V√≠deos Reels Edit√°veis\"\n              subtitle=\"Templates prontos para editar no Canva e publicar\"\n            />\n\n            <div className=\"flex justify-center mb-6\">\n              <ContentFilterDropdown\n                selectedFilters={contentFilters}\n                onFiltersChange={setContentFilters}\n              />\n            </div>\n\n            {videosLoading ? (\n              <div className=\"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4\">\n                {[...Array(10)].map((_, i) => (\n                  <Skeleton key={i} className=\"aspect-[9/16] rounded-xl\" />\n                ))}\n              </div>\n            ) : (\n              <>\n                {/* Grid unificado: 5 colunas desktop, 2 mobile */}\n                <div className=\"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4\">\n                  {displayedSortedVideos.map((template, index) => (\n                    <PremiumCard\n                      key={template.id}\n                      id={template.id}\n                      title={template.title}\n                      url={template.url}\n                      isNew={newestIds.includes(template.id)}\n                      icon={getIcon(template.type, template.icon)}\n                      // Os 10 primeiros (featured) podem ter imagem personalizada\n                      imageUrl={index < 10 && template.image_url ? template.image_url : undefined}\n                      aspectRatio=\"9/16\"\n                      onClick={() => handleCardClick(template)}\n                      isFavorite={isFavorite(\"content_item\", template.id)}\n                      onToggleFavorite={() => handleToggleFavorite(\"content_item\", template.id)}\n                      onPremiumRequired={getPremiumCallback()}\n                    />\n                  ))}\n                </div>\n\n                {sortedVideos.length > 10 && (\n                  <div className=\"flex justify-center mt-8\">\n                    <Button\n                      variant=\"outline\"\n                      onClick={() => setShowAllVideos(!showAllVideos)}\n                      className=\"gap-2 rounded-full px-6\"\n                    >\n                      {showAllVideos ? (\n                        <>\n                          <ChevronUp className=\"h-4 w-4\" />\n                          Mostrar menos\n                        </>\n                      ) : (\n                        <>\n                          <ChevronDown className=\"h-4 w-4\" />\n                          Ver mais v√≠deos ({sortedVideos.length - 10} restantes)\n                        </>\n                      )}\n                    </Button>\n                  </div>\n                )}\n\n                {/* Floating minimize button when expanded */}\n                {showAllVideos && (\n                  <Button\n                    onClick={() => setShowAllVideos(false)}\n                    className=\"fixed bottom-24 md:bottom-8 right-4 z-50 rounded-full shadow-xl gap-2\"\n                    size=\"lg\"\n                  >\n                    <ChevronUp className=\"h-5 w-5\" />\n                    Minimizar\n                  </Button>\n                )}\n              </>\n            )}\n          </section>\n        );\n\n      case 'feed':\n        return (\n          <section className=\"animate-fade-in\">\n            <SectionHeader\n              title=\"Arte para Ag√™ncia de Viagens\"\n              subtitle=\"Posts prontos para engajar seu p√∫blico\"\n            />\n\n            {feedLoading ? (\n              <ContentSkeleton />\n            ) : (\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                {filterTemplates(feedTemplates).map((template) => (\n                  <PremiumCard\n                    key={template.id}\n                    id={template.id}\n                    title={template.title}\n                    url={template.url}\n                    isNew={newestIds.includes(template.id)}\n                    icon={getIcon(template.type, template.icon)}\n                    aspectRatio=\"4/5\"\n                    onClick={() => handleCardClick(template)}\n                    isFavorite={isFavorite(\"content_item\", template.id)}\n                    onToggleFavorite={() => handleToggleFavorite(\"content_item\", template.id)}\n                    onPremiumRequired={getPremiumCallback()}\n                  />\n                ))}\n              </div>\n            )}\n          </section>\n        );\n\n      case 'stories':\n        return (\n          <section className=\"space-y-12 animate-fade-in\">\n            {storiesLoading ? (\n              <ContentSkeleton />\n            ) : (\n              <>\n                {weeklyStories.length > 0 && (\n                  <div>\n                    <SectionHeader\n                      title=\"Stories Semanais\"\n                      subtitle=\"Planejamento semanal de conte√∫do\"\n                    />\n\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                      {weeklyStories.map((story) => (\n                        <PremiumCard\n                          key={story.id}\n                          id={story.id}\n                          title={story.title}\n                          url={story.url}\n                          icon=\"üìÖ\"\n                          aspectRatio=\"1/1\"\n                          onClick={() => handleCardClick(story)}\n                          isFavorite={isFavorite(\"content_item\", story.id)}\n                          onToggleFavorite={() => handleToggleFavorite(\"content_item\", story.id)}\n                          onPremiumRequired={getPremiumCallback()}\n                        />\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                <div>\n                  <SectionHeader\n                    title=\"Templates de Stories\"\n                    subtitle=\"Artes individuais para stories\"\n                  />\n\n                  <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                    {filterTemplates(regularStories).map((template) => (\n                      <PremiumCard\n                        key={template.id}\n                        id={template.id}\n                        title={template.title}\n                        url={template.url}\n                        isNew={newestIds.includes(template.id)}\n                        icon={getIcon(template.type, template.icon)}\n                        aspectRatio=\"9/16\"\n                        onClick={() => handleCardClick(template)}\n                        isFavorite={isFavorite(\"content_item\", template.id)}\n                        onToggleFavorite={() => handleToggleFavorite(\"content_item\", template.id)}\n                        onPremiumRequired={getPremiumCallback()}\n                      />\n                    ))}\n                  </div>\n                </div>\n              </>\n            )}\n          </section>\n        );\n\n      case 'captions':\n        return (\n          <section className=\"animate-fade-in\">\n            <SectionHeader\n              title=\"Legendas Prontas\"\n              subtitle=\"Copie e cole legendas profissionais para seus posts\"\n            />\n\n            {captionsLoading ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {[...Array(6)].map((_, i) => (\n                  <Skeleton key={i} className=\"h-48 rounded-xl\" />\n                ))}\n              </div>\n            ) : (\n              <>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  {displayedCaptions.map((caption) => (\n                    <div key={caption.id} onClick={() => handleCaptionClick(caption)}>\n                      <CaptionCard\n                        id={caption.id}\n                        destination={caption.destination}\n                        text={caption.text}\n                        hashtags={caption.hashtags}\n                        isFavorite={isFavorite(\"caption\", caption.id)}\n                        onToggleFavorite={() => handleToggleFavorite(\"caption\", caption.id)}\n                        onPremiumRequired={getPremiumCallback()}\n                      />\n                    </div>\n                  ))}\n                </div>\n\n                {filteredCaptions.length > 8 && (\n                  <div className=\"flex justify-center mt-8\">\n                    <Button\n                      variant=\"outline\"\n                      onClick={() => setShowAllCaptions(!showAllCaptions)}\n                      className=\"gap-2 rounded-full px-6\"\n                    >\n                      {showAllCaptions ? (\n                        <>\n                          <ChevronUp className=\"h-4 w-4\" />\n                          Mostrar menos\n                        </>\n                      ) : (\n                        <>\n                          <ChevronDown className=\"h-4 w-4\" />\n                          Ver mais legendas\n                        </>\n                      )}\n                    </Button>\n                  </div>\n                )}\n              </>\n            )}\n          </section>\n        );\n\n      case 'downloads':\n        return (\n          <section className=\"animate-fade-in\">\n            <SectionHeader\n              title=\"Downloads de V√≠deos\"\n              subtitle=\"Acesse v√≠deos prontos para usar\"\n            />\n\n            <div className=\"max-w-2xl mx-auto bg-card rounded-3xl shadow-canva p-6\">\n              <ResourceSection\n                title=\"üì• Biblioteca de V√≠deos\"\n                resources={videoDownloads}\n                description=\"V√≠deos prontos organizados por categoria\"\n              />\n            </div>\n          </section>\n        );\n\n      case 'tools':\n        return (\n          <section className=\"animate-fade-in\">\n            <SectionHeader\n              title=\"Ferramentas de Marketing\"\n              subtitle=\"Rob√¥s de IA e recursos para ag√™ncias\"\n            />\n\n            <h3 className=\"font-bold text-foreground mb-5 text-xl\">\n              Rob√¥s de IA para Marketing\n            </h3>\n\n            {toolsLoading ? (\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                {[...Array(6)].map((_, i) => (\n                  <Skeleton key={i} className=\"h-32 rounded-xl\" />\n                ))}\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-12\">\n                {toolsData?.map((tool) => (\n                  <ToolCard\n                    key={tool.id}\n                    id={tool.id}\n                    title={tool.title}\n                    url={tool.url}\n                    icon={tool.icon}\n                    description={tool.description || \"Ferramenta de IA para marketing\"}\n                    isNew={tool.is_new}\n                    onClick={() => {\n                      trackClick('tool', tool.id);\n                      trackActivity('tool'); // +20 pts\n                    }}\n                    isFavorite={isFavorite(\"marketing_tool\", tool.id)}\n                    onToggleFavorite={() => handleToggleFavorite(\"marketing_tool\", tool.id)}\n                    onPremiumRequired={getPremiumCallback()}\n                  />\n                ))}\n              </div>\n            )}\n\n            <div className=\"bg-card rounded-3xl shadow-canva p-6\">\n              <ResourceSection\n                title=\"üìö Materiais e Recursos\"\n                resources={resources}\n                description=\"PDFs, comunidade e calend√°rio editorial\"\n              />\n            </div>\n          </section>\n        );\n\n      case 'videoaula':\n        return (\n          <section className=\"animate-fade-in\">\n            <SectionHeader\n              title=\"Videoaulas\"\n              subtitle=\"Aprenda a criar conte√∫do profissional\"\n            />\n\n            <div className=\"space-y-6\">\n              {/* Primeira Videoaula */}\n              <div className=\"bg-card rounded-3xl shadow-canva p-6\">\n                <h3 className=\"text-lg font-bold mb-4 flex items-center gap-2\">\n                  <span>üéì</span>\n                  Como Usar a Plataforma\n                </h3>\n                <div className=\"aspect-video w-full rounded-2xl overflow-hidden\">\n                  <iframe\n                    src=\"https://www.youtube.com/embed/1Or9QJPn6OA\"\n                    title=\"Como Usar a Plataforma - Videoaula\"\n                    className=\"w-full h-full\"\n                    allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n                    allowFullScreen\n                  />\n                </div>\n              </div>\n            </div>\n          </section>\n        );\n\n      case 'favorites':\n        return (\n          <section className=\"animate-fade-in\">\n            <SectionHeader\n              title=\"Meus Favoritos\"\n              subtitle=\"Itens salvos para acesso r√°pido\"\n            />\n\n            {favorites.length === 0 ? (\n              <div className=\"text-center py-12 text-muted-foreground\">\n                <Heart className=\"h-16 w-16 mx-auto mb-4 opacity-30\" />\n                <p className=\"text-lg mb-2\">Nenhum favorito ainda</p>\n                <p className=\"text-sm\">Clique no cora√ß√£o nos itens para salv√°-los aqui</p>\n              </div>\n            ) : (\n              <div className=\"space-y-8\">\n                {/* Favorite Videos */}\n                {(() => {\n                  const favoriteVideos = videoTemplates?.filter(v => isFavorite(\"content_item\", v.id)) || [];\n                  if (favoriteVideos.length === 0) return null;\n                  return (\n                    <div>\n                      <h3 className=\"font-bold text-foreground mb-4 text-lg\">üé¨ V√≠deos</h3>\n                      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                        {favoriteVideos.map((template) => (\n                          <PremiumCard\n                            key={template.id}\n                            id={template.id}\n                            title={template.title}\n                            url={template.url}\n                            icon={getIcon(template.type, template.icon)}\n                            aspectRatio=\"9/16\"\n                            onClick={() => handleCardClick(template)}\n                            isFavorite={true}\n                            onToggleFavorite={() => handleToggleFavorite(\"content_item\", template.id)}\n                            onPremiumRequired={getPremiumCallback()}\n                          />\n                        ))}\n                      </div>\n                    </div>\n                  );\n                })()}\n\n                {/* Favorite Feed */}\n                {(() => {\n                  const favoriteFeed = feedTemplates?.filter(f => isFavorite(\"content_item\", f.id)) || [];\n                  if (favoriteFeed.length === 0) return null;\n                  return (\n                    <div>\n                      <h3 className=\"font-bold text-foreground mb-4 text-lg\">üñºÔ∏è Artes</h3>\n                      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                        {favoriteFeed.map((template) => (\n                          <PremiumCard\n                            key={template.id}\n                            id={template.id}\n                            title={template.title}\n                            url={template.url}\n                            icon={getIcon(template.type, template.icon)}\n                            aspectRatio=\"4/5\"\n                            onClick={() => handleCardClick(template)}\n                            isFavorite={true}\n                            onToggleFavorite={() => handleToggleFavorite(\"content_item\", template.id)}\n                            onPremiumRequired={getPremiumCallback()}\n                          />\n                        ))}\n                      </div>\n                    </div>\n                  );\n                })()}\n\n                {/* Favorite Stories */}\n                {(() => {\n                  const favoriteStories = storyTemplates?.filter(s => isFavorite(\"content_item\", s.id)) || [];\n                  if (favoriteStories.length === 0) return null;\n                  return (\n                    <div>\n                      <h3 className=\"font-bold text-foreground mb-4 text-lg\">üì± Stories</h3>\n                      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                        {favoriteStories.map((template) => (\n                          <PremiumCard\n                            key={template.id}\n                            id={template.id}\n                            title={template.title}\n                            url={template.url}\n                            icon={getIcon(template.type, template.icon)}\n                            aspectRatio=\"9/16\"\n                            onClick={() => handleCardClick(template)}\n                            isFavorite={true}\n                            onToggleFavorite={() => handleToggleFavorite(\"content_item\", template.id)}\n                            onPremiumRequired={getPremiumCallback()}\n                          />\n                        ))}\n                      </div>\n                    </div>\n                  );\n                })()}\n\n                {/* Favorite Captions */}\n                {(() => {\n                  const favoriteCaptions = captionsData?.filter(c => isFavorite(\"caption\", c.id)) || [];\n                  if (favoriteCaptions.length === 0) return null;\n                  return (\n                    <div>\n                      <h3 className=\"font-bold text-foreground mb-4 text-lg\">‚úçÔ∏è Legendas</h3>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {favoriteCaptions.map((caption) => (\n                          <CaptionCard\n                            key={caption.id}\n                            id={caption.id}\n                            destination={caption.destination}\n                            text={caption.text}\n                            hashtags={caption.hashtags}\n                            isFavorite={true}\n                            onToggleFavorite={() => handleToggleFavorite(\"caption\", caption.id)}\n                            onPremiumRequired={getPremiumCallback()}\n                          />\n                        ))}\n                      </div>\n                    </div>\n                  );\n                })()}\n\n                {/* Favorite Tools */}\n                {(() => {\n                  const favoriteTools = toolsData?.filter(t => isFavorite(\"marketing_tool\", t.id)) || [];\n                  if (favoriteTools.length === 0) return null;\n                  return (\n                    <div>\n                      <h3 className=\"font-bold text-foreground mb-4 text-lg\">ü§ñ Ferramentas</h3>\n                      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                        {favoriteTools.map((tool) => (\n                          <ToolCard\n                            key={tool.id}\n                            id={tool.id}\n                            title={tool.title}\n                            url={tool.url}\n                            icon={tool.icon}\n                            description={tool.description || \"\"}\n                            isFavorite={true}\n                            onToggleFavorite={() => handleToggleFavorite(\"marketing_tool\", tool.id)}\n                            onPremiumRequired={getPremiumCallback()}\n                          />\n                        ))}\n                      </div>\n                    </div>\n                  );\n                })()}\n              </div>\n            )}\n          </section>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  const mainContent = (\n    <>\n      {/* Hero Banner with Search */}\n      <HeroBanner\n        searchValue={searchQuery}\n        onSearchChange={setSearchQuery}\n      />\n\n      {/* Category Navigation - Horizontal scroll with icons */}\n      <CategoryNav\n        activeCategory={activeCategory}\n        onCategoryChange={setActiveCategory}\n        showFavorites={!!user}\n      />\n\n      {/* Dynamic Content based on category */}\n      {renderContent()}\n    </>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-background pb-20 md:pb-0\">\n      <Header onCategoryChange={setActiveCategory} />\n\n      <main className=\"container mx-auto px-4 py-4 md:py-6 max-w-7xl\">\n        {mainContent}\n      </main>\n\n      <Footer />\n\n      {/* Bottom Navigation - Mobile only */}\n      <BottomNav\n        activeCategory={activeCategory}\n        onCategoryChange={setActiveCategory}\n      />\n\n      {/* Premium Gate Modal - triggered by action */}\n      <PremiumGateModal\n        isOpen={showPremiumGate}\n        onClose={() => setShowPremiumGate(false)}\n      />\n    </div>\n  );\n};\n\nexport default Index;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\IndexES.tsx","messages":[{"ruleId":"prefer-const","severity":2,"message":"'filtered' is never reassigned. Use 'const' instead.","line":112,"column":9,"nodeType":"Identifier","messageId":"useConst","endLine":112,"endColumn":17,"fix":{"range":[4754,4863],"text":"const filtered = items.filter(item =>\n      item.title.toLowerCase().includes(searchQuery.toLowerCase())\n    );"}},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":192,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":197,"endColumn":12,"suggestions":[{"messageId":"addBrackets","fix":{"range":[7261,14091],"text":"{ const sortedVideos = [...filteredVideos].sort((a, b) => {\n          if (a.is_featured && !b.is_featured) return -1;\n          if (!a.is_featured && b.is_featured) return 1;\n          // Ordenar por data - mais recente primeiro\n          return new Date(b.created_at).getTime() - new Date(a.created_at).getTime();\n        });\n        const displayedSortedVideos = showAllVideos ? sortedVideos : sortedVideos.slice(0, 10);\n        \n        return (\n          <section className=\"animate-fade-in\">\n            {/* Highlights Section - Show at top if there are highlighted items */}\n            {highlightedItems && highlightedItems.length > 0 && (\n              <div className=\"mb-8\">\n                <SectionHeader \n                  title=\"‚ú® Destacados de la Semana\" \n                  subtitle=\"Contenidos destacados seleccionados para ti\"\n                />\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  {highlightedItems.map(item => (\n                    <Card key={item.id} className=\"overflow-hidden border-primary/30 shadow-lg hover:shadow-xl transition-shadow\">\n                      {/* Animated Media (GIF or Video) */}\n                      {item.media_url ? (\n                        <div className=\"aspect-video bg-muted\">\n                          {item.media_type === 'gif' ? (\n                            <img \n                              src={item.media_url} \n                              alt={item.title} \n                              className=\"w-full h-full object-cover\" \n                              loading=\"lazy\"\n                              onError={(e) => {\n                                e.currentTarget.src = '/placeholder.svg';\n                              }}\n                            />\n                          ) : (\n                            <video \n                              src={item.media_url} \n                              autoPlay \n                              loop \n                              muted \n                              playsInline\n                              className=\"w-full h-full object-cover\"\n                              onError={(e) => {\n                                e.currentTarget.style.display = 'none';\n                              }}\n                            />\n                          )}\n                        </div>\n                      ) : item.image_url ? (\n                        <div className=\"aspect-video bg-muted\">\n                          <img \n                            src={item.image_url} \n                            alt={item.title} \n                            className=\"w-full h-full object-cover\" \n                            loading=\"lazy\"\n                          />\n                        </div>\n                      ) : (\n                        <div className=\"aspect-video bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center\">\n                          <span className=\"text-4xl\">{item.icon || \"‚ú®\"}</span>\n                        </div>\n                      )}\n                      <CardContent className=\"p-4\">\n                        <Badge className=\"mb-2 bg-gradient-to-r from-primary to-accent text-primary-foreground\">\n                          Destacado\n                        </Badge>\n                        <h3 className=\"font-bold text-lg line-clamp-1\">{item.title}</h3>\n                        {item.description && (\n                          <p className=\"text-sm text-muted-foreground line-clamp-2 mt-1\">{item.description}</p>\n                        )}\n                        <Button \n                          className=\"w-full mt-3\" \n                          onClick={() => {\n                            trackClick(item.type, item.id);\n                            window.open(item.url, '_blank');\n                          }}\n                        >\n                          <ExternalLink className=\"w-4 h-4 mr-2\" />\n                          Editar en Canva\n                        </Button>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              </div>\n            )}\n            \n            <SectionHeader \n              title=\"Videos Reels Editables\" \n              subtitle=\"Plantillas listas para editar en Canva y publicar\"\n            />\n            \n            {/* FilterChips removed - ES version shows all content without filters */}\n            \n            {videosLoading ? (\n              <div className=\"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4\">\n                {[...Array(10)].map((_, i) => (\n                  <Skeleton key={i} className=\"aspect-[9/16] rounded-xl\" />\n                ))}\n              </div>\n            ) : (\n              <>\n                {/* Grid unificado: 5 colunas desktop, 2 mobile */}\n                <div className=\"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4\">\n                  {displayedSortedVideos.map((template, index) => (\n                    <PremiumCard\n                      key={template.id}\n                      id={template.id}\n                      title={template.title}\n                      url={template.url}\n                      isNew={newestIds.includes(template.id)}\n                      icon={getIcon(template.type, template.icon)}\n                      // Os 10 primeiros (featured) podem ter imagem personalizada\n                      imageUrl={index < 10 && template.image_url ? template.image_url : undefined}\n                      aspectRatio=\"9/16\"\n                      onClick={() => handleCardClick(template)}\n                      isFavorite={isFavorite(\"content_item\", template.id)}\n                      onToggleFavorite={() => handleToggleFavorite(\"content_item\", template.id)}\n                      onPremiumRequired={getPremiumCallback()}\n                    />\n                  ))}\n                </div>\n                \n                {sortedVideos.length > 10 && (\n                  <div className=\"flex justify-center mt-8\">\n                    <Button \n                      variant=\"outline\" \n                      onClick={() => setShowAllVideos(!showAllVideos)}\n                      className=\"gap-2 rounded-full px-6\"\n                    >\n                      {showAllVideos ? (\n                        <>\n                          <ChevronUp className=\"h-4 w-4\" />\n                          Mostrar menos\n                        </>\n                      ) : (\n                        <>\n                          <ChevronDown className=\"h-4 w-4\" />\n                          Ver m√°s videos ({sortedVideos.length - 10} restantes)\n                        </>\n                      )}\n                    </Button>\n                  </div>\n                )}\n              </>\n            )}\n          </section>\n        ); }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":198,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":198,"endColumn":96,"suggestions":[{"messageId":"addBrackets","fix":{"range":[7261,14091],"text":"{ const sortedVideos = [...filteredVideos].sort((a, b) => {\n          if (a.is_featured && !b.is_featured) return -1;\n          if (!a.is_featured && b.is_featured) return 1;\n          // Ordenar por data - mais recente primeiro\n          return new Date(b.created_at).getTime() - new Date(a.created_at).getTime();\n        });\n        const displayedSortedVideos = showAllVideos ? sortedVideos : sortedVideos.slice(0, 10);\n        \n        return (\n          <section className=\"animate-fade-in\">\n            {/* Highlights Section - Show at top if there are highlighted items */}\n            {highlightedItems && highlightedItems.length > 0 && (\n              <div className=\"mb-8\">\n                <SectionHeader \n                  title=\"‚ú® Destacados de la Semana\" \n                  subtitle=\"Contenidos destacados seleccionados para ti\"\n                />\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  {highlightedItems.map(item => (\n                    <Card key={item.id} className=\"overflow-hidden border-primary/30 shadow-lg hover:shadow-xl transition-shadow\">\n                      {/* Animated Media (GIF or Video) */}\n                      {item.media_url ? (\n                        <div className=\"aspect-video bg-muted\">\n                          {item.media_type === 'gif' ? (\n                            <img \n                              src={item.media_url} \n                              alt={item.title} \n                              className=\"w-full h-full object-cover\" \n                              loading=\"lazy\"\n                              onError={(e) => {\n                                e.currentTarget.src = '/placeholder.svg';\n                              }}\n                            />\n                          ) : (\n                            <video \n                              src={item.media_url} \n                              autoPlay \n                              loop \n                              muted \n                              playsInline\n                              className=\"w-full h-full object-cover\"\n                              onError={(e) => {\n                                e.currentTarget.style.display = 'none';\n                              }}\n                            />\n                          )}\n                        </div>\n                      ) : item.image_url ? (\n                        <div className=\"aspect-video bg-muted\">\n                          <img \n                            src={item.image_url} \n                            alt={item.title} \n                            className=\"w-full h-full object-cover\" \n                            loading=\"lazy\"\n                          />\n                        </div>\n                      ) : (\n                        <div className=\"aspect-video bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center\">\n                          <span className=\"text-4xl\">{item.icon || \"‚ú®\"}</span>\n                        </div>\n                      )}\n                      <CardContent className=\"p-4\">\n                        <Badge className=\"mb-2 bg-gradient-to-r from-primary to-accent text-primary-foreground\">\n                          Destacado\n                        </Badge>\n                        <h3 className=\"font-bold text-lg line-clamp-1\">{item.title}</h3>\n                        {item.description && (\n                          <p className=\"text-sm text-muted-foreground line-clamp-2 mt-1\">{item.description}</p>\n                        )}\n                        <Button \n                          className=\"w-full mt-3\" \n                          onClick={() => {\n                            trackClick(item.type, item.id);\n                            window.open(item.url, '_blank');\n                          }}\n                        >\n                          <ExternalLink className=\"w-4 h-4 mr-2\" />\n                          Editar en Canva\n                        </Button>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              </div>\n            )}\n            \n            <SectionHeader \n              title=\"Videos Reels Editables\" \n              subtitle=\"Plantillas listas para editar en Canva y publicar\"\n            />\n            \n            {/* FilterChips removed - ES version shows all content without filters */}\n            \n            {videosLoading ? (\n              <div className=\"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4\">\n                {[...Array(10)].map((_, i) => (\n                  <Skeleton key={i} className=\"aspect-[9/16] rounded-xl\" />\n                ))}\n              </div>\n            ) : (\n              <>\n                {/* Grid unificado: 5 colunas desktop, 2 mobile */}\n                <div className=\"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4\">\n                  {displayedSortedVideos.map((template, index) => (\n                    <PremiumCard\n                      key={template.id}\n                      id={template.id}\n                      title={template.title}\n                      url={template.url}\n                      isNew={newestIds.includes(template.id)}\n                      icon={getIcon(template.type, template.icon)}\n                      // Os 10 primeiros (featured) podem ter imagem personalizada\n                      imageUrl={index < 10 && template.image_url ? template.image_url : undefined}\n                      aspectRatio=\"9/16\"\n                      onClick={() => handleCardClick(template)}\n                      isFavorite={isFavorite(\"content_item\", template.id)}\n                      onToggleFavorite={() => handleToggleFavorite(\"content_item\", template.id)}\n                      onPremiumRequired={getPremiumCallback()}\n                    />\n                  ))}\n                </div>\n                \n                {sortedVideos.length > 10 && (\n                  <div className=\"flex justify-center mt-8\">\n                    <Button \n                      variant=\"outline\" \n                      onClick={() => setShowAllVideos(!showAllVideos)}\n                      className=\"gap-2 rounded-full px-6\"\n                    >\n                      {showAllVideos ? (\n                        <>\n                          <ChevronUp className=\"h-4 w-4\" />\n                          Mostrar menos\n                        </>\n                      ) : (\n                        <>\n                          <ChevronDown className=\"h-4 w-4\" />\n                          Ver m√°s videos ({sortedVideos.length - 10} restantes)\n                        </>\n                      )}\n                    </Button>\n                  </div>\n                )}\n              </>\n            )}\n          </section>\n        ); }"},"desc":"Add {} brackets around the case block."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { PremiumGateModal } from \"@/components/PremiumGateModal\";\nimport { ResourceSection } from \"@/components/ResourceSection\";\nimport { Button } from \"@/components/ui/button\";\nimport { ChevronDown, ChevronUp, Loader2, Heart, Sparkles } from \"lucide-react\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { toast } from \"sonner\";\nimport { SpanishPixel } from \"@/components/SpanishPixel\";\n\n// Canva-style components\nimport { HeroBanner } from \"@/components/canva/HeroBanner\";\nimport { CategoryNav, CategoryType } from \"@/components/canva/CategoryNav\";\nimport { PremiumCard } from \"@/components/canva/PremiumCard\";\n// FilterChips removed for ES version\nimport { SectionHeader } from \"@/components/canva/SectionHeader\";\nimport { CaptionCard } from \"@/components/canva/CaptionCard\";\nimport { ToolCard } from \"@/components/canva/ToolCard\";\nimport { BottomNav } from \"@/components/canva/BottomNav\";\n\n// Database hooks\nimport { \n  useContentItems, \n  useCaptions, \n  useMarketingTools,\n  useTrackClick,\n  useFeaturedItems,\n  useNewestItemIds,\n  useHighlightedItems,\n  ContentItem,\n  Caption,\n} from \"@/hooks/useContent\";\nimport { useTrackPageView } from \"@/hooks/useAdminDashboard\";\nimport { useFavorites } from \"@/hooks/useFavorites\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ExternalLink } from \"lucide-react\";\n\n// Static resources (downloads and resources that don't need DB management)\nimport { resources, videoDownloads } from \"@/data/templates\";\nimport { trackViewContent } from \"@/lib/meta-pixel\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\n\n// ‚≠ê FORCE SPANISH LANGUAGE ‚≠ê\nconst FORCED_LANGUAGE = 'es' as const;\n\n// VideoFilter type removed - ES version shows all content without filters\n\nconst IndexES = () => {\n  const navigate = useNavigate();\n  const { user, loading, subscription } = useAuth();\n  const { setLanguage, t } = useLanguage();\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [showAllVideos, setShowAllVideos] = useState(false);\n  const [showAllCaptions, setShowAllCaptions] = useState(false);\n  // Filters removed for ES - showing all content\n  const [activeCategory, setActiveCategory] = useState<CategoryType>('videos');\n  const [showPremiumGate, setShowPremiumGate] = useState(false);\n\n  // ‚≠ê Set document language and context on mount ‚≠ê\n  useEffect(() => {\n    document.documentElement.lang = 'es';\n    setLanguage('es');\n  }, [setLanguage]);\n\n  // Video filters removed for ES version - show all content directly\n\n  // ‚≠ê ALL HOOKS FORCED TO 'es' ‚≠ê\n  const { data: videoTemplates, isLoading: videosLoading } = useContentItems(['video', 'seasonal'], undefined, FORCED_LANGUAGE);\n  const { data: featuredVideos, isLoading: featuredLoading } = useFeaturedItems(FORCED_LANGUAGE);\n  const { data: feedTemplates, isLoading: feedLoading } = useContentItems('feed', undefined, FORCED_LANGUAGE);\n  const { data: storyTemplates, isLoading: storiesLoading } = useContentItems(['story', 'weekly-story'], undefined, FORCED_LANGUAGE);\n  const { data: captionsData, isLoading: captionsLoading } = useCaptions(undefined, FORCED_LANGUAGE);\n  const { data: toolsData, isLoading: toolsLoading } = useMarketingTools(FORCED_LANGUAGE);\n  const { data: newestIds = [] } = useNewestItemIds();\n  const { data: highlightedItems, isLoading: highlightsLoading } = useHighlightedItems(FORCED_LANGUAGE);\n  const { trackClick } = useTrackClick();\n  const { trackPageView } = useTrackPageView();\n  const { favorites, isFavorite, toggleFavorite, favoritesCount, MAX_FAVORITES } = useFavorites();\n\n  // Track view content when user is logged in\n  useEffect(() => {\n    if (user) {\n      trackViewContent('Plataforma Principal ES');\n      trackPageView('/es');\n    }\n  }, [user, trackPageView]);\n\n  // Show loading while checking auth\n  if (loading || subscription.loading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  // Check if user is subscribed for showing premium content (logged in + active subscription)\n  const isSubscribed = user && subscription.subscribed;\n\n  // Function to get the premium required callback (only for non-subscribers)\n  const getPremiumCallback = () => {\n    if (isSubscribed) return undefined;\n    return () => setShowPremiumGate(true);\n  };\n\n  const filterTemplates = (items: ContentItem[] | undefined) => {\n    if (!items) return [];\n    let filtered = items.filter(item =>\n      item.title.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n\n    // Para ES, mostrar todo o conte√∫do (sem filtro de nacionais)\n    return filtered;\n  };\n\n  const filterCaptions = () => {\n    if (!captionsData) return [];\n    return captionsData.filter(caption =>\n      caption.destination.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      caption.text.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n  };\n\n  const getIcon = (type: string, icon?: string) => {\n    if (icon) return icon;\n    switch (type) {\n      case \"video\": return \"üé¨\";\n      case \"feed\": return \"üñºÔ∏è\";\n      case \"story\": return \"üì±\";\n      default: return \"‚ú®\";\n    }\n  };\n\n  const handleCardClick = (item: ContentItem) => {\n    trackClick(item.type, item.id);\n  };\n\n  const handleCaptionClick = (caption: Caption) => {\n    trackClick('caption', caption.id);\n  };\n\n  const handleToggleFavorite = (contentType: \"content_item\" | \"caption\" | \"marketing_tool\", contentId: string) => {\n    if (!user) {\n      toast.error(\"Inicia sesi√≥n para guardar favoritos\");\n      return;\n    }\n    toggleFavorite.mutate(\n      { contentType, contentId },\n      {\n        onSuccess: (result) => {\n          if (result.action === \"added\") {\n            toast.success(\"¬°Agregado a favoritos!\");\n          } else {\n            toast.info(\"Eliminado de favoritos\");\n          }\n        },\n        onError: () => {\n          toast.error(\"Error al actualizar favoritos\");\n        },\n      }\n    );\n  };\n\n  const filteredVideos = filterTemplates(videoTemplates);\n  const displayedVideos = showAllVideos ? filteredVideos : filteredVideos.slice(0, 8);\n\n  const filteredCaptions = filterCaptions();\n  const displayedCaptions = showAllCaptions ? filteredCaptions : filteredCaptions.slice(0, 8);\n\n  // Get weekly stories from story templates\n  const weeklyStories = storyTemplates?.filter(s => s.type === 'weekly-story') || [];\n  const regularStories = storyTemplates?.filter(s => s.type === 'story') || [];\n\n  // Loading skeleton for content\n  const ContentSkeleton = () => (\n    <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n      {[...Array(8)].map((_, i) => (\n        <Skeleton key={i} className=\"aspect-[9/16] rounded-xl\" />\n      ))}\n    </div>\n  );\n\n  // Content sections based on active category\n  const renderContent = () => {\n    switch (activeCategory) {\n      case 'videos':\n        // Ordenar: featured primeiro, depois por data (mais recente primeiro)\n        const sortedVideos = [...filteredVideos].sort((a, b) => {\n          if (a.is_featured && !b.is_featured) return -1;\n          if (!a.is_featured && b.is_featured) return 1;\n          // Ordenar por data - mais recente primeiro\n          return new Date(b.created_at).getTime() - new Date(a.created_at).getTime();\n        });\n        const displayedSortedVideos = showAllVideos ? sortedVideos : sortedVideos.slice(0, 10);\n        \n        return (\n          <section className=\"animate-fade-in\">\n            {/* Highlights Section - Show at top if there are highlighted items */}\n            {highlightedItems && highlightedItems.length > 0 && (\n              <div className=\"mb-8\">\n                <SectionHeader \n                  title=\"‚ú® Destacados de la Semana\" \n                  subtitle=\"Contenidos destacados seleccionados para ti\"\n                />\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  {highlightedItems.map(item => (\n                    <Card key={item.id} className=\"overflow-hidden border-primary/30 shadow-lg hover:shadow-xl transition-shadow\">\n                      {/* Animated Media (GIF or Video) */}\n                      {item.media_url ? (\n                        <div className=\"aspect-video bg-muted\">\n                          {item.media_type === 'gif' ? (\n                            <img \n                              src={item.media_url} \n                              alt={item.title} \n                              className=\"w-full h-full object-cover\" \n                              loading=\"lazy\"\n                              onError={(e) => {\n                                e.currentTarget.src = '/placeholder.svg';\n                              }}\n                            />\n                          ) : (\n                            <video \n                              src={item.media_url} \n                              autoPlay \n                              loop \n                              muted \n                              playsInline\n                              className=\"w-full h-full object-cover\"\n                              onError={(e) => {\n                                e.currentTarget.style.display = 'none';\n                              }}\n                            />\n                          )}\n                        </div>\n                      ) : item.image_url ? (\n                        <div className=\"aspect-video bg-muted\">\n                          <img \n                            src={item.image_url} \n                            alt={item.title} \n                            className=\"w-full h-full object-cover\" \n                            loading=\"lazy\"\n                          />\n                        </div>\n                      ) : (\n                        <div className=\"aspect-video bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center\">\n                          <span className=\"text-4xl\">{item.icon || \"‚ú®\"}</span>\n                        </div>\n                      )}\n                      <CardContent className=\"p-4\">\n                        <Badge className=\"mb-2 bg-gradient-to-r from-primary to-accent text-primary-foreground\">\n                          Destacado\n                        </Badge>\n                        <h3 className=\"font-bold text-lg line-clamp-1\">{item.title}</h3>\n                        {item.description && (\n                          <p className=\"text-sm text-muted-foreground line-clamp-2 mt-1\">{item.description}</p>\n                        )}\n                        <Button \n                          className=\"w-full mt-3\" \n                          onClick={() => {\n                            trackClick(item.type, item.id);\n                            window.open(item.url, '_blank');\n                          }}\n                        >\n                          <ExternalLink className=\"w-4 h-4 mr-2\" />\n                          Editar en Canva\n                        </Button>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              </div>\n            )}\n            \n            <SectionHeader \n              title=\"Videos Reels Editables\" \n              subtitle=\"Plantillas listas para editar en Canva y publicar\"\n            />\n            \n            {/* FilterChips removed - ES version shows all content without filters */}\n            \n            {videosLoading ? (\n              <div className=\"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4\">\n                {[...Array(10)].map((_, i) => (\n                  <Skeleton key={i} className=\"aspect-[9/16] rounded-xl\" />\n                ))}\n              </div>\n            ) : (\n              <>\n                {/* Grid unificado: 5 colunas desktop, 2 mobile */}\n                <div className=\"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4\">\n                  {displayedSortedVideos.map((template, index) => (\n                    <PremiumCard\n                      key={template.id}\n                      id={template.id}\n                      title={template.title}\n                      url={template.url}\n                      isNew={newestIds.includes(template.id)}\n                      icon={getIcon(template.type, template.icon)}\n                      // Os 10 primeiros (featured) podem ter imagem personalizada\n                      imageUrl={index < 10 && template.image_url ? template.image_url : undefined}\n                      aspectRatio=\"9/16\"\n                      onClick={() => handleCardClick(template)}\n                      isFavorite={isFavorite(\"content_item\", template.id)}\n                      onToggleFavorite={() => handleToggleFavorite(\"content_item\", template.id)}\n                      onPremiumRequired={getPremiumCallback()}\n                    />\n                  ))}\n                </div>\n                \n                {sortedVideos.length > 10 && (\n                  <div className=\"flex justify-center mt-8\">\n                    <Button \n                      variant=\"outline\" \n                      onClick={() => setShowAllVideos(!showAllVideos)}\n                      className=\"gap-2 rounded-full px-6\"\n                    >\n                      {showAllVideos ? (\n                        <>\n                          <ChevronUp className=\"h-4 w-4\" />\n                          Mostrar menos\n                        </>\n                      ) : (\n                        <>\n                          <ChevronDown className=\"h-4 w-4\" />\n                          Ver m√°s videos ({sortedVideos.length - 10} restantes)\n                        </>\n                      )}\n                    </Button>\n                  </div>\n                )}\n              </>\n            )}\n          </section>\n        );\n\n      case 'feed':\n        return (\n          <section className=\"animate-fade-in\">\n            <SectionHeader \n              title=\"Arte para Agencia de Viajes\" \n              subtitle=\"Posts listos para enganchar a tu p√∫blico\"\n            />\n            \n            {feedLoading ? (\n              <ContentSkeleton />\n            ) : (\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                {filterTemplates(feedTemplates).map((template) => (\n                  <PremiumCard\n                    key={template.id}\n                    id={template.id}\n                    title={template.title}\n                    url={template.url}\n                    isNew={newestIds.includes(template.id)}\n                    icon={getIcon(template.type, template.icon)}\n                    aspectRatio=\"4/5\"\n                    onClick={() => handleCardClick(template)}\n                    isFavorite={isFavorite(\"content_item\", template.id)}\n                    onToggleFavorite={() => handleToggleFavorite(\"content_item\", template.id)}\n                    onPremiumRequired={getPremiumCallback()}\n                  />\n                ))}\n              </div>\n            )}\n          </section>\n        );\n\n      case 'stories':\n        return (\n          <section className=\"space-y-12 animate-fade-in\">\n            {storiesLoading ? (\n              <ContentSkeleton />\n            ) : (\n              <>\n                {weeklyStories.length > 0 && (\n                  <div>\n                    <SectionHeader \n                      title=\"Stories Semanales\" \n                      subtitle=\"Planificaci√≥n semanal de contenido\"\n                    />\n                    \n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                      {weeklyStories.map((story) => (\n                        <PremiumCard\n                          key={story.id}\n                          id={story.id}\n                          title={story.title}\n                          url={story.url}\n                          icon=\"üìÖ\"\n                          aspectRatio=\"1/1\"\n                          onClick={() => handleCardClick(story)}\n                          isFavorite={isFavorite(\"content_item\", story.id)}\n                          onToggleFavorite={() => handleToggleFavorite(\"content_item\", story.id)}\n                          onPremiumRequired={getPremiumCallback()}\n                        />\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                <div>\n                  <SectionHeader \n                    title=\"Plantillas de Stories\" \n                    subtitle=\"Artes individuales para stories\"\n                  />\n                  \n                  <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                    {filterTemplates(regularStories).map((template) => (\n                      <PremiumCard\n                        key={template.id}\n                        id={template.id}\n                        title={template.title}\n                        url={template.url}\n                        isNew={newestIds.includes(template.id)}\n                        icon={getIcon(template.type, template.icon)}\n                        aspectRatio=\"9/16\"\n                        onClick={() => handleCardClick(template)}\n                        isFavorite={isFavorite(\"content_item\", template.id)}\n                        onToggleFavorite={() => handleToggleFavorite(\"content_item\", template.id)}\n                        onPremiumRequired={getPremiumCallback()}\n                      />\n                    ))}\n                  </div>\n                </div>\n              </>\n            )}\n          </section>\n        );\n\n      case 'captions':\n        return (\n          <section className=\"animate-fade-in\">\n            <SectionHeader \n              title=\"Subt√≠tulos Listos\" \n              subtitle=\"Copia y pega subt√≠tulos profesionales para tus posts\"\n            />\n            \n            {captionsLoading ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {[...Array(6)].map((_, i) => (\n                  <Skeleton key={i} className=\"h-48 rounded-xl\" />\n                ))}\n              </div>\n            ) : (\n              <>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  {displayedCaptions.map((caption) => (\n                    <div key={caption.id} onClick={() => handleCaptionClick(caption)}>\n                      <CaptionCard\n                        id={caption.id}\n                        destination={caption.destination}\n                        text={caption.text}\n                        hashtags={caption.hashtags}\n                        isFavorite={isFavorite(\"caption\", caption.id)}\n                        onToggleFavorite={() => handleToggleFavorite(\"caption\", caption.id)}\n                        onPremiumRequired={getPremiumCallback()}\n                      />\n                    </div>\n                  ))}\n                </div>\n                \n                {filteredCaptions.length > 8 && (\n                  <div className=\"flex justify-center mt-8\">\n                    <Button \n                      variant=\"outline\" \n                      onClick={() => setShowAllCaptions(!showAllCaptions)}\n                      className=\"gap-2 rounded-full px-6\"\n                    >\n                      {showAllCaptions ? (\n                        <>\n                          <ChevronUp className=\"h-4 w-4\" />\n                          Mostrar menos\n                        </>\n                      ) : (\n                        <>\n                          <ChevronDown className=\"h-4 w-4\" />\n                          Ver m√°s subt√≠tulos\n                        </>\n                      )}\n                    </Button>\n                  </div>\n                )}\n              </>\n            )}\n          </section>\n        );\n\n      case 'downloads':\n        return (\n          <section className=\"animate-fade-in\">\n            <SectionHeader \n              title=\"Descargas de Videos\" \n              subtitle=\"Accede a videos listos para usar\"\n            />\n            \n            <div className=\"max-w-2xl mx-auto bg-card rounded-3xl shadow-canva p-6\">\n              <ResourceSection\n                title=\"üì• Biblioteca de Videos\"\n                resources={videoDownloads}\n                description=\"Videos listos organizados por categor√≠a\"\n              />\n            </div>\n          </section>\n        );\n\n      case 'tools':\n        return (\n          <section className=\"animate-fade-in\">\n            <SectionHeader \n              title=\"Herramientas de Marketing\" \n              subtitle=\"Robots de IA y recursos para agencias\"\n            />\n            \n            <h3 className=\"font-bold text-foreground mb-5 text-xl\">\n              Robots de IA para Marketing\n            </h3>\n            \n            {toolsLoading ? (\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                {[...Array(6)].map((_, i) => (\n                  <Skeleton key={i} className=\"h-32 rounded-xl\" />\n                ))}\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-12\">\n                {toolsData?.map((tool) => (\n                  <ToolCard\n                    key={tool.id}\n                    id={tool.id}\n                    title={tool.title}\n                    url={tool.url}\n                    icon={tool.icon}\n                    description={tool.description || \"Herramienta de IA para marketing\"}\n                    isNew={tool.is_new}\n                    onClick={() => trackClick('tool', tool.id)}\n                    isFavorite={isFavorite(\"marketing_tool\", tool.id)}\n                    onToggleFavorite={() => handleToggleFavorite(\"marketing_tool\", tool.id)}\n                    onPremiumRequired={getPremiumCallback()}\n                  />\n                ))}\n              </div>\n            )}\n            \n            <div className=\"bg-card rounded-3xl shadow-canva p-6\">\n              <ResourceSection\n                title=\"üìö Materiales y Recursos\"\n                resources={resources}\n                description=\"PDFs, comunidad y calendario editorial\"\n              />\n            </div>\n          </section>\n        );\n\n      case 'videoaula':\n        return (\n          <section className=\"animate-fade-in\">\n            <SectionHeader \n              title=\"Videoclases\" \n              subtitle=\"Aprende a crear contenido profesional\"\n            />\n            \n            <div className=\"space-y-6\">\n              <div className=\"bg-card rounded-3xl shadow-canva p-6\">\n                <h3 className=\"text-lg font-bold mb-4 flex items-center gap-2\">\n                  <span>üéì</span>\n                  C√≥mo Usar la Plataforma\n                </h3>\n                <div className=\"aspect-video w-full rounded-2xl overflow-hidden\">\n                  <iframe\n                    src=\"https://www.youtube.com/embed/1Or9QJPn6OA\"\n                    title=\"C√≥mo Usar la Plataforma - Videoclase\"\n                    className=\"w-full h-full\"\n                    allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n                    allowFullScreen\n                  />\n                </div>\n              </div>\n            </div>\n          </section>\n        );\n\n      case 'favorites':\n        return (\n          <section className=\"animate-fade-in\">\n            <SectionHeader \n              title=\"Mis Favoritos\" \n              subtitle=\"Elementos guardados para acceso r√°pido\"\n            />\n            \n            {favorites.length === 0 ? (\n              <div className=\"text-center py-12 text-muted-foreground\">\n                <Heart className=\"h-16 w-16 mx-auto mb-4 opacity-30\" />\n                <p className=\"text-lg mb-2\">A√∫n no tienes favoritos</p>\n                <p className=\"text-sm\">Haz clic en el coraz√≥n de los elementos para guardarlos aqu√≠</p>\n              </div>\n            ) : (\n              <div className=\"space-y-8\">\n                {/* Favorite Videos */}\n                {(() => {\n                  const favoriteVideos = videoTemplates?.filter(v => isFavorite(\"content_item\", v.id)) || [];\n                  if (favoriteVideos.length === 0) return null;\n                  return (\n                    <div>\n                      <h3 className=\"font-bold text-foreground mb-4 text-lg\">üé¨ Videos</h3>\n                      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                        {favoriteVideos.map((template) => (\n                          <PremiumCard\n                            key={template.id}\n                            id={template.id}\n                            title={template.title}\n                            url={template.url}\n                            icon={getIcon(template.type, template.icon)}\n                            aspectRatio=\"9/16\"\n                            onClick={() => handleCardClick(template)}\n                            isFavorite={true}\n                            onToggleFavorite={() => handleToggleFavorite(\"content_item\", template.id)}\n                            onPremiumRequired={getPremiumCallback()}\n                          />\n                        ))}\n                      </div>\n                    </div>\n                  );\n                })()}\n\n                {/* Favorite Feed */}\n                {(() => {\n                  const favoriteFeed = feedTemplates?.filter(f => isFavorite(\"content_item\", f.id)) || [];\n                  if (favoriteFeed.length === 0) return null;\n                  return (\n                    <div>\n                      <h3 className=\"font-bold text-foreground mb-4 text-lg\">üñºÔ∏è Artes</h3>\n                      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                        {favoriteFeed.map((template) => (\n                          <PremiumCard\n                            key={template.id}\n                            id={template.id}\n                            title={template.title}\n                            url={template.url}\n                            icon={getIcon(template.type, template.icon)}\n                            aspectRatio=\"4/5\"\n                            onClick={() => handleCardClick(template)}\n                            isFavorite={true}\n                            onToggleFavorite={() => handleToggleFavorite(\"content_item\", template.id)}\n                            onPremiumRequired={getPremiumCallback()}\n                          />\n                        ))}\n                      </div>\n                    </div>\n                  );\n                })()}\n\n                {/* Favorite Stories */}\n                {(() => {\n                  const favoriteStories = storyTemplates?.filter(s => isFavorite(\"content_item\", s.id)) || [];\n                  if (favoriteStories.length === 0) return null;\n                  return (\n                    <div>\n                      <h3 className=\"font-bold text-foreground mb-4 text-lg\">üì± Stories</h3>\n                      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                        {favoriteStories.map((template) => (\n                          <PremiumCard\n                            key={template.id}\n                            id={template.id}\n                            title={template.title}\n                            url={template.url}\n                            icon={getIcon(template.type, template.icon)}\n                            aspectRatio=\"9/16\"\n                            onClick={() => handleCardClick(template)}\n                            isFavorite={true}\n                            onToggleFavorite={() => handleToggleFavorite(\"content_item\", template.id)}\n                            onPremiumRequired={getPremiumCallback()}\n                          />\n                        ))}\n                      </div>\n                    </div>\n                  );\n                })()}\n\n                {/* Favorite Captions */}\n                {(() => {\n                  const favoriteCaptions = captionsData?.filter(c => isFavorite(\"caption\", c.id)) || [];\n                  if (favoriteCaptions.length === 0) return null;\n                  return (\n                    <div>\n                      <h3 className=\"font-bold text-foreground mb-4 text-lg\">‚úçÔ∏è Subt√≠tulos</h3>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {favoriteCaptions.map((caption) => (\n                          <CaptionCard\n                            key={caption.id}\n                            id={caption.id}\n                            destination={caption.destination}\n                            text={caption.text}\n                            hashtags={caption.hashtags}\n                            isFavorite={true}\n                            onToggleFavorite={() => handleToggleFavorite(\"caption\", caption.id)}\n                            onPremiumRequired={getPremiumCallback()}\n                          />\n                        ))}\n                      </div>\n                    </div>\n                  );\n                })()}\n\n                {/* Favorite Tools */}\n                {(() => {\n                  const favoriteTools = toolsData?.filter(t => isFavorite(\"marketing_tool\", t.id)) || [];\n                  if (favoriteTools.length === 0) return null;\n                  return (\n                    <div>\n                      <h3 className=\"font-bold text-foreground mb-4 text-lg\">ü§ñ Herramientas</h3>\n                      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                        {favoriteTools.map((tool) => (\n                          <ToolCard\n                            key={tool.id}\n                            id={tool.id}\n                            title={tool.title}\n                            url={tool.url}\n                            icon={tool.icon}\n                            description={tool.description || \"\"}\n                            isFavorite={true}\n                            onToggleFavorite={() => handleToggleFavorite(\"marketing_tool\", tool.id)}\n                            onPremiumRequired={getPremiumCallback()}\n                          />\n                        ))}\n                      </div>\n                    </div>\n                  );\n                })()}\n              </div>\n            )}\n          </section>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  const mainContent = (\n    <>\n      {/* Hero Banner with Search */}\n      <HeroBanner \n        searchValue={searchQuery}\n        onSearchChange={setSearchQuery}\n      />\n      \n      {/* Category Navigation - Horizontal scroll with icons */}\n      <CategoryNav \n        activeCategory={activeCategory}\n        onCategoryChange={setActiveCategory}\n        showFavorites={!!user}\n      />\n      \n      {/* Dynamic Content based on category */}\n      {renderContent()}\n    </>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-background pb-20 md:pb-0\">\n      <SpanishPixel />\n      <Header onCategoryChange={setActiveCategory} />\n      \n      <main className=\"container mx-auto px-4 py-4 md:py-6 max-w-7xl\">\n        {mainContent}\n      </main>\n      \n      <Footer />\n      \n      {/* Bottom Navigation - Mobile only */}\n      <BottomNav \n        activeCategory={activeCategory} \n        onCategoryChange={setActiveCategory} \n      />\n\n      {/* Premium Gate Modal - triggered by action */}\n      <PremiumGateModal \n        isOpen={showPremiumGate} \n        onClose={() => setShowPremiumGate(false)} \n      />\n    </div>\n  );\n};\n\nexport default IndexES;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\NotFound.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\Obrigado.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\ObrigadoES.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\Planos.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: JSX expressions must have one parent element.","line":293,"column":8}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from \"react\";\r\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { useLanguage } from \"@/contexts/LanguageContext\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Header } from \"@/components/Header\";\r\nimport { Footer } from \"@/components/Footer\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { toast } from \"sonner\";\r\nimport { UserInfoCard } from \"@/components/UserInfoCard\";\r\nimport { trackViewContent, trackInitiateCheckout } from \"@/lib/meta-pixel\";\r\nimport { Loader2, Check, Plane, Settings, Video, Image, MessageSquare, Bot, Calendar, Sparkles, RefreshCw, Users, FileText, Shield, Clock, Infinity, GraduationCap, Star } from \"lucide-react\";\r\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from \"@/components/ui/accordion\";\r\nimport garantia7dias from \"@/assets/garantia-7-dias.png\";\r\n\r\n// GIFs e Videos constants\r\nconst heroGif = \"https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExZm5kcmcybmE2aTFkOTU3ZDNqYmZkbHQ2YjRibjB1NjFtN2RoNWdrMyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/6osnZ6joYcPfERZsaE/giphy.gif\";\r\nconst proofGifs = [\"https://media4.giphy.com/media/tJPdq4gvTvr8CgIyWI/giphy.gif\", \"https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExbWt3MGhsd3g1MnJtbzlkMDloczlhdTJvNWhubjZ4Z3FtNnJkeDd1aCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/ZQZVm01DFW3qHY0ZKs/giphy.gif\", \"https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExb3J2anV0aTVkYWowbDl1ZXFtNnB4ZWUwcnVnZTVzOW91ZzNncGNvNSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/mbylDFYWSU46XeLcsS/giphy.gif\", \"https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExcXQ1dHAxM2JxcWM0N3VqdWhibnBtcDR5eWVmNTZwaGI1NTJjeml3diZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/VcFJaM72FG76eG75In/giphy.gif\", \"https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExa24wbWJoa2swZXVyY3h5eDgxY3FhdWR2cHg5MDhrN3p2ZGExYWtpNiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/22QqF0ECtSnOvpiQLZ/giphy.gif\", \"https://media4.giphy.com/media/VVMI7dobalrJhKmQOZ/giphy.gif\"];\r\nconst youtubeVideos = [{\r\n  id: \"dvInvZZ7fLY\",\r\n  title: \"Fernando de Noronha Takes\"\r\n}, {\r\n  id: \"vUgCtB-yUPg\",\r\n  title: \"Veneza It√°lia\"\r\n}, {\r\n  id: \"KsGg1kWgFjA\",\r\n  title: \"Fernando de Noronha\"\r\n}, {\r\n  id: \"QcwzHP3Y3Nc\",\r\n  title: \"Jalap√£o\"\r\n}];\r\n\r\n// Checkout links by language\r\nconst STRIPE_LINKS = {\r\n  pt: \"https://buy.stripe.com/8x26oIgGuej656zaAY8so05\",\r\n  es: \"https://buy.stripe.com/bJedRa3TIej6cz15gE8so04\"\r\n};\r\nconst Planos = () => {\r\n  const navigate = useNavigate();\r\n  const [searchParams] = useSearchParams();\r\n  const {\r\n    setLanguage,\r\n    t\r\n  } = useLanguage();\r\n\r\n  // Force PT language on this page\r\n  const language = 'pt';\r\n  useEffect(() => {\r\n    document.documentElement.lang = 'pt';\r\n    setLanguage('pt');\r\n  }, [setLanguage]);\r\n  const {\r\n    user,\r\n    loading: authLoading,\r\n    subscription,\r\n    refreshSubscription\r\n  } = useAuth();\r\n  const [checkoutLoading, setCheckoutLoading] = useState(false);\r\n  const [portalLoading, setPortalLoading] = useState(false);\r\n  const [refreshLoading, setRefreshLoading] = useState(false);\r\n\r\n  // Benefits with icons - translated\r\n  const benefits = [{\r\n    icon: Video,\r\n    text: t('plans.benefit.videos'),\r\n    highlight: true\r\n  }, {\r\n    icon: MessageSquare,\r\n    text: t('plans.benefit.whatsapp'),\r\n    highlight: false\r\n  }, {\r\n    icon: Calendar,\r\n    text: t('plans.benefit.calendar'),\r\n    highlight: false\r\n  }, {\r\n    icon: FileText,\r\n    text: t('plans.benefit.captions'),\r\n    highlight: false\r\n  }, {\r\n    icon: Sparkles,\r\n    text: t('plans.benefit.canva'),\r\n    highlight: false\r\n  }, {\r\n    icon: Shield,\r\n    text: t('plans.benefit.copyright'),\r\n    highlight: false\r\n  }, {\r\n    icon: Bot,\r\n    text: t('plans.benefit.ai'),\r\n    highlight: true\r\n  }, {\r\n    icon: Image,\r\n    text: t('plans.benefit.arts'),\r\n    highlight: false\r\n  }, {\r\n    icon: Users,\r\n    text: t('plans.benefit.influencers'),\r\n    highlight: false\r\n  }, {\r\n    icon: Infinity,\r\n    text: t('plans.benefit.updates'),\r\n    highlight: false\r\n  }];\r\n\r\n  // FAQs - translated\r\n  const faqs = [{\r\n    question: t('plans.faq.1.question'),\r\n    answer: t('plans.faq.1.answer')\r\n  }, {\r\n    question: t('plans.faq.2.question'),\r\n    answer: t('plans.faq.2.answer')\r\n  }, {\r\n    question: t('plans.faq.3.question'),\r\n    answer: t('plans.faq.3.answer')\r\n  }, {\r\n    question: t('plans.faq.4.question'),\r\n    answer: t('plans.faq.4.answer')\r\n  }, {\r\n    question: t('plans.faq.5.question'),\r\n    answer: t('plans.faq.5.answer')\r\n  }];\r\n\r\n  // Track view content\r\n  useEffect(() => {\r\n    trackViewContent('P√°gina de Planos');\r\n  }, []);\r\n\r\n  // Handle success/cancel redirects from Stripe\r\n  useEffect(() => {\r\n    const success = searchParams.get(\"success\");\r\n    const canceled = searchParams.get(\"canceled\");\r\n    if (success === \"true\") {\r\n      toast.success(\"Pagamento realizado com sucesso!\");\r\n      refreshSubscription();\r\n      navigate(\"/sucesso\");\r\n    } else if (canceled === \"true\") {\r\n      toast.info(\"Pagamento cancelado.\");\r\n      window.history.replaceState({}, \"\", \"/planos\");\r\n    }\r\n  }, [searchParams, refreshSubscription, navigate]);\r\n  const handleCheckout = () => {\r\n    // Track with BRL currency for PT version\r\n    const price = 29.00;\r\n    const currency = 'BRL';\r\n    trackInitiateCheckout(price, currency);\r\n\r\n    // Redirect directly to Stripe Payment Link\r\n    window.location.href = STRIPE_LINKS.pt;\r\n  };\r\n  const handleRefreshSubscription = async () => {\r\n    setRefreshLoading(true);\r\n    try {\r\n      await refreshSubscription();\r\n      toast.success(\"Status da assinatura atualizado!\");\r\n    } catch (error) {\r\n      toast.error(\"Erro ao atualizar status\");\r\n    } finally {\r\n      setRefreshLoading(false);\r\n    }\r\n  };\r\n  const handleManageSubscription = async () => {\r\n    setPortalLoading(true);\r\n    try {\r\n      const {\r\n        data: {\r\n          session\r\n        }\r\n      } = await supabase.auth.getSession();\r\n      if (!session?.access_token) {\r\n        toast.error(\"Voc√™ precisa estar logado.\");\r\n        navigate(\"/auth\");\r\n        return;\r\n      }\r\n      const {\r\n        data,\r\n        error\r\n      } = await supabase.functions.invoke(\"customer-portal\", {\r\n        headers: {\r\n          Authorization: `Bearer ${session.access_token}`\r\n        }\r\n      });\r\n      if (error) {\r\n        console.error(\"Portal error:\", error);\r\n        toast.error(\"Erro ao acessar portal. Tente novamente.\");\r\n        return;\r\n      }\r\n      if (data?.url) {\r\n        window.location.href = data.url;\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Portal error:\", error);\r\n      toast.error(\"Erro ao processar. Tente novamente.\");\r\n    } finally {\r\n      setPortalLoading(false);\r\n    }\r\n  };\r\n  if (authLoading || subscription.loading) {\r\n    return <div className=\"min-h-screen bg-background\">\r\n      <Header />\r\n      <div className=\"container mx-auto px-4 py-16 flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n      </div>\r\n      <Footer />\r\n    </div>;\r\n  }\r\n\r\n  // If user has active subscription, show different view\r\n  if (subscription.subscribed) {\r\n    return <div className=\"min-h-screen bg-background\">\r\n      <Header />\r\n      <div className=\"container mx-auto px-3 md:px-4 py-6 md:py-8 max-w-4xl\">\r\n        <UserInfoCard />\r\n\r\n        <div className=\"text-center mb-8 md:mb-12\">\r\n          <Badge className=\"mb-4 bg-primary/10 text-primary border-primary/20\">\r\n            <Sparkles className=\"h-3 w-3 mr-1\" />\r\n            {t('plans.subscribedBadge')}\r\n          </Badge>\r\n          <h1 className=\"text-3xl md:text-4xl font-bold mb-4\">{t('plans.subscribedTitle')}</h1>\r\n          <p className=\"text-muted-foreground text-base md:text-lg\">\r\n            {t('plans.subscribedSubtitle')}\r\n          </p>\r\n        </div>\r\n\r\n        <Card className=\"border-primary border-2 mb-8\">\r\n          <CardHeader className=\"text-center p-4 md:p-6\">\r\n            <div className=\"h-16 w-16 md:h-20 md:w-20 mx-auto rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center mb-4\">\r\n              <Plane className=\"h-8 w-8 md:h-10 md:w-10 text-white\" />\r\n            </div>\r\n            <CardTitle className=\"text-xl md:text-2xl\">{t('plans.subscriptionPlan')}</CardTitle>\r\n            <p className=\"text-sm md:text-base text-muted-foreground\">{t('plans.activePlan')}</p>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4 md:space-y-6 p-4 md:p-6\">\r\n            <div className=\"p-3 md:p-4 bg-primary/10 rounded-lg text-center\">\r\n              <p className=\"font-semibold text-primary flex items-center justify-center gap-2 text-sm md:text-base\">\r\n                <Check className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                {t('plans.fullAccess')}\r\n              </p>\r\n              {subscription.subscriptionEnd && <p className=\"text-xs md:text-sm text-muted-foreground mt-1\">\r\n                {t('plans.nextRenewal').replace('{date}', new Date(subscription.subscriptionEnd).toLocaleDateString('pt-BR'))}\r\n              </p>}\r\n            </div>\r\n\r\n            <div className=\"flex flex-col gap-3\">\r\n              <Button onClick={() => navigate(\"/\")} className=\"w-full\" size=\"lg\">\r\n                <Plane className=\"mr-2 h-4 w-4\" />\r\n                {t('plans.accessPlatform')}\r\n              </Button>\r\n              <div className=\"flex flex-col sm:flex-row gap-3\">\r\n                <Button variant=\"outline\" onClick={handleManageSubscription} disabled={portalLoading} className=\"flex-1\">\r\n                  {portalLoading ? <>\r\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                    {t('common.loading')}\r\n                  </> : <>\r\n                    <Settings className=\"mr-2 h-4 w-4\" />\r\n                    {t('plans.manageSubscription')}\r\n                  </>}\r\n                </Button>\r\n                <Button variant=\"ghost\" onClick={handleRefreshSubscription} disabled={refreshLoading} className=\"flex-1\">\r\n                  {refreshLoading ? <>\r\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                    {t('plans.refreshing')}\r\n                  </> : <>\r\n                    <RefreshCw className=\"mr-2 h-4 w-4\" />\r\n                    {t('plans.refreshStatus')}\r\n                  </>}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n      <Footer />\r\n    </div>;\r\n  }\r\n  return <div className=\"min-h-screen bg-background\">\r\n    <Header />\r\n    <div className=\"container mx-auto px-3 md:px-4 py-6 md:py-8 max-w-5xl\">\r\n      {user && <UserInfoCard />}\r\n\r\n      {/* HERO SECTION - Minimalista Apple Style */}\r\n      <section className=\"text-center mb-16 md:mb-24 px-4\">\r\n        {/* Selo Pequeno - 1¬∞ App */}\r\n        <div className=\"inline-flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-amber-100 to-yellow-100 dark:from-amber-900/30 dark:to-yellow-900/30 border border-amber-300 dark:border-amber-700 rounded-full mb-4\">\r\n          <span className=\"text-xs font-semibold text-amber-800 dark:text-amber-200\">\r\n            üèÜ 1¬∞ App Travel Marketing Completo do Mundo\r\n          </span>\r\n        </div>\r\n\r\n        {/* Headline Principal - Clean */\r\n        <h1 className=\"text-5xl md:text-7xl font-semibold tracking-tight leading-tight mb-4 text-foreground\" style={{ fontFamily: '-apple-system, BlinkMacSystemFont, \"SF Pro Display\", \"Segoe UI\", Roboto, sans-serif' }}>\r\n          Venda Mais Viagens\r\n        </h1>\r\n\r\n        <p className=\"text-xl md:text-2xl text-muted-foreground mb-12 font-normal max-w-2xl mx-auto\" style={{ fontFamily: '-apple-system, BlinkMacSystemFont, \"SF Pro Text\", \"Segoe UI\", Roboto, sans-serif' }}>\r\n          Tudo que voc√™ precisa para crescer sua ag√™ncia\r\n        </p>\r\n\r\n        {/* GIF Hero - Mais espa√ßamento */}\r\n        <img loading=\"lazy\" src={heroGif} alt=\"V√≠deos de viagens profissionais\" className=\"mx-auto rounded-3xl shadow-2xl max-w-xs md:max-w-2xl mb-12\" />\r\n\r\n        {/* CTA Principal - Simple */}\r\n        <a href=\"#preco\">\r\n          <Button size=\"lg\" className=\"px-8 py-4 text-lg font-medium rounded-full bg-black dark:bg-white text-white dark:text-black hover:opacity-90 transition-opacity mb-3\">\r\n            Testar por 7 dias gr√°tis\r\n          </Button>\r\n        </a>\r\n        <p className=\"text-sm text-muted-foreground\">A partir de R$ 29/m√™s</p>\r\n      </section>\r\n\r\n      {/* GRID DE GIFS FORMATO REELS */}\r\n      <section className=\"mb-12 md:mb-20\">\r\n        <h2 className=\"text-3xl md:text-4xl font-bold text-center mb-8\">\r\n          {t('plans.proofTitle')}\r\n        </h2>\r\n        <div className=\"grid grid-cols-2 gap-3 md:gap-4 max-w-2xl mx-auto\">\r\n          {proofGifs.map((gif, index) => <div key={index} className=\"rounded-2xl overflow-hidden shadow-lg hover:scale-[1.02] transition-transform duration-300\">\r\n            <img src={gif} alt={`Exemplo de v√≠deo ${index + 1}`} className=\"w-full aspect-[9/16] object-cover\" />\r\n          </div>)}\r\n        </div>\r\n      </section>\r\n\r\n      {/* PLUG-AND-PLAY & EXCLUSIVIDADE - Nova Se√ß√£o */}\r\n      <section className=\"mb-12 md:mb-20\">\r\n        <div className=\"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 border-2 border-green-200 dark:border-green-800 rounded-3xl p-6 md:p-10\">\r\n          <div className=\"text-center mb-8\">\r\n            <h2 className=\"text-3xl md:text-4xl font-black mb-3 text-green-700 dark:text-green-300\">\r\n              ‚ö° Pegou, Usou e Postou em 2 Minutos\r\n            </h2>\r\n            <p className=\"text-lg md:text-xl text-muted-foreground\">\r\n              Sem design. Sem complica√ß√£o. S√≥ pegar e usar.\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto\">\r\n            {/* Plug and Play */}\r\n            <Card className=\"border-2 border-green-300 dark:border-green-700 bg-background/80\">\r\n              <CardContent className=\"p-6\">\r\n                <div className=\"flex items-center gap-3 mb-4\">\r\n                  <div className=\"h-12 w-12 rounded-full bg-green-500 flex items-center justify-center text-2xl\">\r\n                    üéØ\r\n                  </div>\r\n                  <h3 className=\"text-xl font-bold\">100% Plug-and-Play</h3>\r\n                </div>\r\n                <ul className=\"space-y-3 text-sm md:text-base\">\r\n                  <li className=\"flex items-start gap-2\">\r\n                    <Check className=\"h-5 w-5 text-green-600 shrink-0 mt-0.5\" />\r\n                    <span><strong>N√£o precisa</strong> saber design</span>\r\n                  </li>\r\n                  <li className=\"flex items-start gap-2\">\r\n                    <Check className=\"h-5 w-5 text-green-600 shrink-0 mt-0.5\" />\r\n                    <span><strong>N√£o precisa</strong> saber marketing</span>\r\n                  </li>\r\n                  <li className=\"flex items-start gap-2\">\r\n                    <Check className=\"h-5 w-5 text-green-600 shrink-0 mt-0.5\" />\r\n                    <span>Tudo <strong>100% pronto</strong> pra postar</span>\r\n                  </li>\r\n                  <li className=\"flex items-start gap-2\">\r\n                    <Check className=\"h-5 w-5 text-green-600 shrink-0 mt-0.5\" />\r\n                    <span><strong>2 minutos</strong> pra criar e publicar</span>\r\n                  </li>\r\n                </ul>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Exclusividade */}\r\n            <Card className=\"border-2 border-purple-300 dark:border-purple-700 bg-background/80\">\r\n              <CardContent className=\"p-6\">\r\n                <div className=\"flex items-center gap-3 mb-4\">\r\n                  <div className=\"h-12 w-12 rounded-full bg-purple-500 flex items-center justify-center text-2xl\">\r\n                    ‚ú®\r\n                  </div>\r\n                  <h3 className=\"text-xl font-bold\">Conte√∫do Exclusivo</h3>\r\n                </div>\r\n                <ul className=\"space-y-3 text-sm md:text-base\">\r\n                  <li className=\"flex items-start gap-2\">\r\n                    <Sparkles className=\"h-5 w-5 text-purple-600 shrink-0 mt-0.5\" />\r\n                    <span><strong>+250 v√≠deos</strong> √∫nicos e exclusivos</span>\r\n                  </li>\r\n                  <li className=\"flex items-start gap-2\">\r\n                    <Sparkles className=\"h-5 w-5 text-purple-600 shrink-0 mt-0.5\" />\r\n                    <span><strong>Pode personalizar</strong> tudo que quiser</span>\r\n                  </li>\r\n                  <li className=\"flex items-start gap-2\">\r\n                    <Sparkles className=\"h-5 w-5 text-purple-600 shrink-0 mt-0.5\" />\r\n                    <span><strong>Conte√∫do novo</strong> toda semana</span>\r\n                  </li>\r\n                  <li className=\"flex items-start gap-2\">\r\n                    <Sparkles className=\"h-5 w-5 text-purple-600 shrink-0 mt-0.5\" />\r\n                    <span><strong>Imposs√≠vel</strong> todo mundo usar o mesmo</span>\r\n                  </li>\r\n                </ul>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n\r\n          {/* CTA Box */}\r\n          <div className=\"mt-8 text-center bg-gradient-to-r from-green-500/10 to-purple-500/10 rounded-xl p-6 border-2 border-dashed border-green-300 dark:border-green-700\">\r\n            <p className=\"text-base md:text-lg font-bold text-foreground mb-2\">\r\n              üöÄ <strong>Plataforma nova = Poucas pessoas usando</strong>\r\n            </p>\r\n            <p className=\"text-sm md:text-base text-muted-foreground\">\r\n              Aproveite agora e seja um dos primeiros a ter acesso ao conte√∫do que <strong>ningu√©m mais tem</strong>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* SE√á√ÉO \"O QUE √â CANVA VIAGEM?\" */}\r\n      <section className=\"mb-12 md:mb-20\">\r\n        <div className=\"bg-gradient-to-br from-primary/10 to-accent/10 p-8 md:p-12 rounded-3xl\">\r\n          <h2 className=\"text-2xl md:text-3xl font-bold text-center mb-4\">\r\n            O que √© o Canva Viagem?\r\n          </h2>\r\n          <p className=\"text-center text-muted-foreground text-base md:text-lg mb-8 max-w-3xl mx-auto\">\r\n            Voc√™ recebe acesso √† plataforma completa de marketing, que tem tudo o que voc√™ precisa pra vender mais viagens, pra voc√™ s√≥ usar e publicar.\r\n          </p>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4 max-w-4xl mx-auto\">\r\n            <div className=\"flex items-start gap-3 p-3 md:p-4 rounded-lg bg-background/50 hover:bg-background/80 transition-all\">\r\n              <Video className=\"h-5 w-5 shrink-0 text-primary mt-0.5\" />\r\n              <div>\r\n                <p className=\"font-semibold text-sm md:text-base\">Mais de 250 v√≠deos prontos</p>\r\n                <p className=\"text-xs md:text-sm text-muted-foreground\">Pega e publica</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-start gap-3 p-3 md:p-4 rounded-lg bg-background/50 hover:bg-background/80 transition-all\">\r\n              <Calendar className=\"h-5 w-5 shrink-0 text-primary mt-0.5\" />\r\n              <div>\r\n                <p className=\"font-semibold text-sm md:text-base\">Calend√°rio com posts organizados</p>\r\n                <p className=\"text-xs md:text-sm text-muted-foreground\">Anual</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-start gap-3 p-3 md:p-4 rounded-lg bg-background/50 hover:bg-background/80 transition-all\">\r\n              <FileText className=\"h-5 w-5 shrink-0 text-primary mt-0.5\" />\r\n              <div>\r\n                <p className=\"font-semibold text-sm md:text-base\">Legendas para copiar e colar</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-start gap-3 p-3 md:p-4 rounded-lg bg-background/50 hover:bg-background/80 transition-all\">\r\n              <Image className=\"h-5 w-5 shrink-0 text-primary mt-0.5\" />\r\n              <div>\r\n                <p className=\"font-semibold text-sm md:text-base\">Artes de conte√∫dos e promo√ß√µes</p>\r\n                <p className=\"text-xs md:text-sm text-muted-foreground\">100% edit√°veis no Canva, livres de direitos autorais</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-start gap-3 p-3 md:p-4 rounded-lg bg-gradient-to-r from-primary to-accent text-white shadow-lg\">\r\n              <Bot className=\"h-5 w-5 shrink-0 mt-0.5\" />\r\n              <div>\r\n                <p className=\"font-semibold text-sm md:text-base\">10 agentes de IA de marketing</p>\r\n                <p className=\"text-xs md:text-sm opacity-90\">Para viagens</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-start gap-3 p-3 md:p-4 rounded-lg bg-gradient-to-r from-primary to-accent text-white shadow-lg\">\r\n              <Users className=\"h-5 w-5 shrink-0 mt-0.5\" />\r\n              <div>\r\n                <p className=\"font-semibold text-sm md:text-base\">3 influenciadoras de IA</p>\r\n                <p className=\"text-xs md:text-sm opacity-90\">De viagens</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-start gap-3 p-3 md:p-4 rounded-lg bg-background/50 hover:bg-background/80 transition-all\">\r\n              <RefreshCw className=\"h-5 w-5 shrink-0 text-primary mt-0.5\" />\r\n              <div>\r\n                <p className=\"font-semibold text-sm md:text-base\">Atualiza√ß√µes semanais</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-start gap-3 p-3 md:p-4 rounded-lg bg-background/50 hover:bg-background/80 transition-all\">\r\n              <MessageSquare className=\"h-5 w-5 shrink-0 text-primary mt-0.5\" />\r\n              <div>\r\n                <p className=\"font-semibold text-sm md:text-base\">Suporte no WhatsApp</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-start gap-3 p-3 md:p-4 rounded-lg bg-background/50 hover:bg-background/80 transition-all md:col-span-2\">\r\n              <GraduationCap className=\"h-5 w-5 shrink-0 text-primary mt-0.5\" />\r\n              <div>\r\n                <p className=\"font-semibold text-sm md:text-base\">Aula de como usar a ferramenta e postar em 2 minutos</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* V√çDEOS YOUTUBE COM OVERLAY - 2 por linha no mobile */}\r\n      <section className=\"mb-12 md:mb-20\">\r\n        <h2 className=\"text-2xl md:text-3xl font-bold text-center mb-8\">\r\n          Veja Exemplos Reais dos V√≠deos\r\n        </h2>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-6 max-w-4xl mx-auto\">\r\n          {youtubeVideos.map(video => <div key={video.id} className=\"bg-black rounded-xl overflow-hidden shadow-xl relative group\">\r\n            <iframe className=\"w-full aspect-[9/16]\" src={`https://www.youtube.com/embed/${video.id}`} title={video.title} allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowFullScreen />\r\n            <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2 md:p-3 pointer-events-none\">\r\n              <p className=\"text-white text-xs md:text-sm font-medium\">{video.title}</p>\r\n            </div>\r\n          </div>)}\r\n        </div>\r\n      </section>\r\n\r\n      {/* CARD DE PRE√áO APRIMORADO */}\r\n      <section id=\"preco\" className=\"mb-12 md:mb-20 scroll-mt-20\">\r\n        <Card className=\"max-w-2xl mx-auto border-2 border-primary/20 shadow-xl relative\">\r\n          {/* Floating Badge */}\r\n          <div className=\"absolute -top-4 left-1/2 -translate-x-1/2 z-10\">\r\n            <div className=\"bg-green-500/90 backdrop-blur-sm text-white px-4 md:px-6 py-1.5 md:py-2 rounded-full shadow-lg text-xs md:text-sm font-semibold whitespace-nowrap\">\r\n              ‚ú® 3 Dias Gr√°tis\r\n            </div>\r\n          </div>\r\n\r\n          <CardContent className=\"p-8 md:p-12 text-center pt-10 md:pt-12\">\r\n            <h3 className=\"text-lg md:text-xl font-bold mb-3\">Tenha acesso a todas as ferramentas</h3>\r\n            <p className=\"text-sm md:text-base text-muted-foreground mb-6\">\r\n              V√≠deos, artes, rob√¥s, influencers e todo o acesso\r\n            </p>\r\n\r\n            {/* Price Comparison - Show Value */}\r\n            <div className=\"bg-gradient-to-r from-red-50 to-orange-50 dark:from-red-950/20 dark:to-orange-950/20 rounded-lg p-4 mb-4 border border-red-200 dark:border-red-800\">\r\n              <p className=\"text-sm font-semibold text-red-600 dark:text-red-400 mb-1\">Quanto voc√™ pagaria?</p>\r\n              <p className=\"text-xs text-muted-foreground mb-2\">Designer freelancer cobra:</p>\r\n              <p className=\"text-2xl font-bold line-through text-red-500\">R$ 500/m√™s</p>\r\n              <p className=\"text-xs text-green-600 dark:text-green-400 font-semibold mt-1\">‚Üì Economize R$ 471 por m√™s = R$ 5.652/ano</p>\r\n            </div>\r\n\r\n            {/* Custom Price Display */}\r\n            <div className=\"flex items-baseline justify-center mb-2 gap-1\">\r\n              <span className=\"text-2xl md:text-3xl font-bold text-primary opacity-70\">R$</span>\r\n              <span className=\"text-5xl md:text-6xl font-black text-primary\">29</span>\r\n              <span className=\"text-2xl md:text-3xl font-bold text-primary opacity-70\">,00</span>\r\n              <span className=\"text-xl md:text-2xl text-muted-foreground ml-1\">/m√™s</span>\r\n            </div>\r\n            <p className=\"text-sm text-green-600 dark:text-green-400 font-bold mb-6\">94% mais barato que designer!</p>\r\n\r\n            <Button size=\"lg\" onClick={handleCheckout} disabled={checkoutLoading} className=\"w-full h-16 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-base md:text-lg font-black shadow-xl hover:shadow-2xl transition-all duration-300 text-white animate-pulse hover:animate-none\">\r\n              {checkoutLoading ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : <>\r\n                <Sparkles className=\"mr-2 h-5 w-5\" />\r\n                üî• COME√áAR TESTE GR√ÅTIS AGORA\r\n              </>}\r\n            </Button>\r\n\r\n            {/* Launch Phase - Exclusivity */}\r\n            <div className=\"mt-3 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-950/20 dark:to-blue-950/20 border-2 border-purple-300 dark:border-purple-700 rounded-lg p-4\">\r\n              <p className=\"text-xs md:text-sm font-bold text-purple-700 dark:text-purple-300 flex items-center justify-center gap-1.5 mb-1\">\r\n                üöÄ Plataforma em Fase de Lan√ßamento\r\n              </p>\r\n              <p className=\"text-xs text-purple-600 dark:text-purple-400 text-center\">\r\n                Seja um dos primeiros ‚Ä¢ Conte√∫do exclusivo que voc√™ n√£o viu em lugar nenhum\r\n              </p>\r\n            </div>\r\n\r\n            {/* Garantia ZERO Risco - Mensagem Clara */}\r\n            <div className=\"p-5 md:p-6 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 rounded-2xl border-2 border-green-200 dark:border-green-800 mt-6\">\r\n              <div className=\"flex items-center justify-center gap-2 mb-3\">\r\n                <Shield className=\"h-6 w-6 text-green-600\" />\r\n                <p className=\"font-bold text-lg md:text-xl text-green-900 dark:text-green-100\">\r\n                  Risco ZERO\r\n                </p>\r\n              </div>\r\n              <p className=\"text-sm md:text-base text-center text-foreground leading-relaxed px-2\">\r\n                Se por <strong>qualquer motivo</strong> voc√™ n√£o gostar, cancele dentro de <strong>7 dias</strong> e <strong className=\"text-green-600\">n√£o paga nada</strong>. Absolutamente nada.\r\n              </p>\r\n              <p className=\"text-sm text-center text-muted-foreground mt-3 italic\">\r\n                O risco √© meu. Teste agora sem preocupa√ß√£o.\r\n              </p>\r\n            </div>\r\n\r\n            <p className=\"text-xs font-medium text-center mt-4 flex items-center justify-center gap-1.5\">\r\n              <span className=\"text-muted-foreground\">üîí Pagamento 100% seguro via Stripe</span>\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      </section>\r\n\r\n      {/* MARKETING 360¬∞ - Tudo Inclu√≠do */}\r\n      <section className=\"mb-12 md:mb-20\">\r\n        <div className=\"max-w-4xl mx-auto\">\r\n          <div className=\"bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 dark:from-blue-950/20 dark:via-purple-950/20 dark:to-pink-950/20 border-2 border-primary rounded-3xl p-8 md:p-10 shadow-2xl\">\r\n            {/* Header */}\r\n            <div className=\"text-center mb-8\">\r\n              <div className=\"inline-block mb-4\">\r\n                <div className=\"bg-gradient-to-r from-primary to-accent text-white px-6 py-2 rounded-full text-sm font-bold shadow-lg\">\r\n                  üöÄ EXCLUSIVO\r\n                </div>\r\n              </div>\r\n              <h2 className=\"text-3xl md:text-4xl font-black mb-3\">\r\n                <span className=\"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent\">\r\n                  O Primeiro APP de Marketing Tur√≠stico 360¬∞\r\n                </span>\r\n              </h2>\r\n              <p className=\"text-lg text-muted-foreground\">\r\n                Tudo que voc√™ precisa para vender mais viagens, em um √∫nico lugar\r\n              </p>\r\n            </div>\r\n\r\n            {/* Grid de Features */}\r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n              {/* Feature 1 */}\r\n              <div className=\"text-center p-4 bg-white/50 dark:bg-background/50 rounded-xl hover:scale-105 transition-transform\">\r\n                <div className=\"text-3xl mb-2\">üé¨</div>\r\n                <p className=\"font-bold text-sm\">V√≠deos Prontos</p>\r\n                <p className=\"text-xs text-muted-foreground\">+250 templates</p>\r\n              </div>\r\n\r\n              {/* Feature 2 */}\r\n              <div className=\"text-center p-4 bg-white/50 dark:bg-background/50 rounded-xl hover:scale-105 transition-transform\">\r\n                <div className=\"text-3xl mb-2\">üé®</div>\r\n                <p className=\"font-bold text-sm\">Artes & Design</p>\r\n                <p className=\"text-xs text-muted-foreground\">Stories, posts, feeds</p>\r\n              </div>\r\n\r\n              {/* Feature 3 */}\r\n              <div className=\"text-center p-4 bg-white/50 dark:bg-background/50 rounded-xl hover:scale-105 transition-transform\">\r\n                <div className=\"text-3xl mb-2\">üì∏</div>\r\n                <p className=\"font-bold text-sm\">Banco de Fotos</p>\r\n                <p className=\"text-xs text-muted-foreground\">Alta qualidade</p>\r\n              </div>\r\n\r\n              {/* Feature 4 */}\r\n              <div className=\"text-center p-4 bg-white/50 dark:bg-background/50 rounded-xl hover:scale-105 transition-transform\">\r\n                <div className=\"text-3xl mb-2\">üì±</div>\r\n                <p className=\"font-bold text-sm\">Social Media</p>\r\n                <p className=\"text-xs text-muted-foreground\">Calend√°rio anual</p>\r\n              </div>\r\n\r\n              {/* Feature 5 */}\r\n              <div className=\"text-center p-4 bg-white/50 dark:bg-background/50 rounded-xl hover:scale-105 transition-transform\">\r\n                <div className=\"text-3xl mb-2\">‚úçÔ∏è</div>\r\n                <p className=\"font-bold text-sm\">Copywriting</p>\r\n                <p className=\"text-xs text-muted-foreground\">Legendas prontas</p>\r\n              </div>\r\n\r\n              {/* Feature 6 */}\r\n              <div className=\"text-center p-4 bg-white/50 dark:bg-background/50 rounded-xl hover:scale-105 transition-transform\">\r\n                <div className=\"text-3xl mb-2\">üéØ</div>\r\n                <p className=\"font-bold text-sm\">Estrat√©gias</p>\r\n                <p className=\"text-xs text-muted-foreground\">Tr√°fego & vendas</p>\r\n              </div>\r\n\r\n              {/* Feature 7 */}\r\n              <div className=\"text-center p-4 bg-white/50 dark:bg-background/50 rounded-xl hover:scale-105 transition-transform\">\r\n                <div className=\"text-3xl mb-2\">ü§ñ</div>\r\n                <p className=\"font-bold text-sm\">IA Integrada</p>\r\n                <p className=\"text-xs text-muted-foreground\">Edi√ß√£o assistida</p>\r\n              </div>\r\n\r\n              {/* Feature 8 */}\r\n              <div className=\"text-center p-4 bg-white/50 dark:bg-background/50 rounded-xl hover:scale-105 transition-transform\">\r\n                <div className=\"text-3xl mb-2\">‚ö°</div>\r\n                <p className=\"font-bold text-sm\">Automa√ß√£o</p>\r\n                <p className=\"text-xs text-muted-foreground\">Publique r√°pido</p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* CTA Bottom */}\r\n            <div className=\"mt-8 text-center bg-gradient-to-r from-primary/10 to-accent/10 rounded-xl p-6 border-2 border-dashed border-primary/30\">\r\n              <p className=\"text-base md:text-lg font-bold mb-2\">\r\n                ‚ú® Tudo isso por <span className=\"text-2xl text-primary\">R$ 29/m√™s</span>\r\n              </p>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Sem custo extra. Sem m√≥dulos separados. Tudo inclu√≠do.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* TESTIMONIALS - PROVA SOCIAL */}\r\n      <section className=\"mb-12 md:mb-20\">\r\n        <h2 className=\"text-2xl md:text-3xl font-bold text-center mb-3\">O Que as Ag√™ncias de Viagens Est√£o Falando?</h2>\r\n        <p className=\"text-center text-muted-foreground mb-8\">Depoimentos reais de quem j√° est√° usando o TravelMarketing</p>\r\n\r\n        {/* WhatsApp/Instagram Style Notifications */}\r\n        <div className=\"mb-10 max-w-4xl mx-auto space-y-3\">\r\n          {/* WhatsApp Notification 1 */}\r\n          <div className=\"bg-gradient-to-r from-green-50 to-green-100 dark:from-green-950/30 dark:to-green-900/30 border-l-4 border-green-500 rounded-lg p-4 shadow-md hover:shadow-lg transition-shadow\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <div className=\"flex-shrink-0 w-10 h-10 bg-green-500 rounded-full flex items-center justify-center\">\r\n                <span className=\"text-white text-xl\">üí¨</span>\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-xs text-green-700 dark:text-green-400 font-semibold mb-1\">WhatsApp ‚Ä¢ h√° 2 horas</p>\r\n                <p className=\"text-sm md:text-base font-medium text-foreground\">\r\n                  \"Parab√©ns pelo trabalho, ajudou muito aqui. Tava batendo cabe√ßa para criar v√≠deos dos lugares para postar\"\r\n                </p>\r\n                <p className=\"text-xs text-muted-foreground mt-2 italic\">- Cliente via WhatsApp</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Instagram Notification 2 */}\r\n          <div className=\"bg-gradient-to-r from-pink-50 to-purple-100 dark:from-pink-950/30 dark:to-purple-900/30 border-l-4 border-pink-500 rounded-lg p-4 shadow-md hover:shadow-lg transition-shadow\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <div className=\"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center\">\r\n                <span className=\"text-white text-xl\">üì±</span>\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-xs text-pink-700 dark:text-pink-400 font-semibold mb-1\">Instagram ‚Ä¢ h√° 5 horas</p>\r\n                <p className=\"text-sm md:text-base font-medium text-foreground\">\r\n                  \"vleviagens comentou: Eu comprei, estou usando e √© maravilhoso o conte√∫do üôè\"\r\n                </p>\r\n                <p className=\"text-xs text-muted-foreground mt-2 italic\">- @vleviagens</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* WhatsApp Notification 3 */}\r\n          <div className=\"bg-gradient-to-r from-green-50 to-green-100 dark:from-green-950/30 dark:to-green-900/30 border-l-4 border-green-500 rounded-lg p-4 shadow-md hover:shadow-lg transition-shadow\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <div className=\"flex-shrink-0 w-10 h-10 bg-green-500 rounded-full flex items-center justify-center\">\r\n                <span className=\"text-white text-xl\">üí¨</span>\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-xs text-green-700 dark:text-green-400 font-semibold mb-1\">WhatsApp ‚Ä¢ ontem</p>\r\n                <p className=\"text-sm md:text-base font-medium text-foreground\">\r\n                  \"Gostou dos v√≠deos de viagens? Ficou muito bom, n√©? Obrigado üôè\"\r\n                </p>\r\n                <p className=\"text-sm text-green-600 dark:text-green-400 mt-1\">\r\n                  \"Top demais da conta meu amigo!!!\"\r\n                </p>\r\n                <p className=\"text-xs text-muted-foreground mt-2 italic\">- Ag√™ncia de Turismo</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* WhatsApp Notification 4 */}\r\n          <div className=\"bg-gradient-to-r from-green-50 to-green-100 dark:from-green-950/30 dark:to-green-900/30 border-l-4 border-green-500 rounded-lg p-4 shadow-md hover:shadow-lg transition-shadow\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <div className=\"flex-shrink-0 w-10 h-10 bg-green-500 rounded-full flex items-center justify-center\">\r\n                <span className=\"text-white text-xl\">üí¨</span>\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-xs text-green-700 dark:text-green-400 font-semibold mb-1\">WhatsApp ‚Ä¢ h√° 1 dia</p>\r\n                <p className=\"text-sm md:text-base font-medium text-foreground\">\r\n                  \"Eu me surpreendi com o tanto de seguidores que consegui em poucas horas\"\r\n                </p>\r\n                <p className=\"text-sm text-green-600 dark:text-green-400 mt-1\">\r\n                  \"Ainda bem que eu peguei seu material, d√° para eu ir editando f√°cil e postando nesse come√ßo üëè\"\r\n                </p>\r\n                <p className=\"text-xs text-muted-foreground mt-2 italic\">- Agente de Viagens</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Cards de Depoimentos Tradicionais (ABAIXO) */}\r\n        <p className=\"text-center text-sm text-muted-foreground mb-6\">‚≠ê Avalia√ß√µes Verificadas</p>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto\">\r\n          {/* Testimonial 1 */}\r\n          <Card className=\"border-2 border-primary/20\">\r\n            <CardContent className=\"p-6\">\r\n              <div className=\"flex items-center gap-2 mb-3\">\r\n                {[...Array(5)].map((_, i) => <Star key={i} className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />)}\r\n              </div>\r\n              <p className=\"text-sm md:text-base mb-4 italic\">\r\n                \"Aumentei meu engajamento em 300% no primeiro m√™s. Consigo postar todo dia e meus clientes adoram!\"\r\n              </p>\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"h-10 w-10 bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center text-white font-bold\">\r\n                  M\r\n                </div>\r\n                <div>\r\n                  <p className=\"font-semibold text-sm\">Maria Silva</p>\r\n                  <p className=\"text-xs text-muted-foreground\">Ag√™ncia Viagens dos Sonhos</p>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Testimonial 2 */}\r\n          <Card className=\"border-2 border-accent/20\">\r\n            <CardContent className=\"p-6\">\r\n              <div className=\"flex items-center gap-2 mb-3\">\r\n                {[...Array(5)].map((_, i) => <Star key={i} className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />)}\r\n              </div>\r\n              <p className=\"text-sm md:text-base mb-4 italic\">\r\n                \"Fechei 5 pacotes extras este m√™s s√≥ com os v√≠deos do TravelMarketing. Melhor investimento!\"\r\n              </p>\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"h-10 w-10 bg-gradient-to-br from-accent to-primary rounded-full flex items-center justify-center text-white font-bold\">\r\n                  J\r\n                </div>\r\n                <div>\r\n                  <p className=\"font-semibold text-sm\">Jo√£o Santos</p>\r\n                  <p className=\"text-xs text-muted-foreground\">Travel Expert</p>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Testimonial 3 */}\r\n          <Card className=\"border-2 border-green-500/20\">\r\n            <CardContent className=\"p-6\">\r\n              <div className=\"flex items-center gap-2 mb-3\">\r\n                {[...Array(5)].map((_, i) => <Star key={i} className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />)}\r\n              </div>\r\n              <p className=\"text-sm md:text-base mb-4 italic\">\r\n                \"Economizei R$ 800/m√™s que gastava com designer. Agora crio tudo sozinha em minutos!\"\r\n              </p>\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"h-10 w-10 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center text-white font-bold\">\r\n                  A\r\n                </div>\r\n                <div>\r\n                  <p className=\"font-semibold text-sm\">Ana Costa</p>\r\n                  <p className=\"text-xs text-muted-foreground\">Mundo Viagens</p>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </section>\r\n\r\n      {/* COMPARISON TABLE */}\r\n      <section className=\"mb-12 md:mb-20\">\r\n        <h2 className=\"text-2xl md:text-3xl font-bold text-center mb-3\">Compare e Veja o Quanto Voc√™ Economiza</h2>\r\n        <p className=\"text-center text-muted-foreground mb-8\">Investir R$ 29/m√™s vs contratar profissionais</p>\r\n\r\n        {/* MOBILE: Cards Empilhados */}\r\n        <div className=\"md:hidden space-y-4 mb-8\">\r\n          {/* Card TravelMarketing - DESTAQUE */}\r\n          <Card className=\"border-2 border-primary bg-gradient-to-br from-primary/5 to-accent/5\">\r\n            <CardContent className=\"p-5\">\r\n              <div className=\"text-center mb-4\">\r\n                <Sparkles className=\"h-8 w-8 mx-auto text-primary mb-2\" />\r\n                <p className=\"font-black text-xl\">TravelMarketing</p>\r\n                <p className=\"text-3xl font-black text-green-600 mt-2\">R$ 29/m√™s</p>\r\n                <p className=\"text-xs text-green-600 font-semibold\">‚ú® Tudo incluso</p>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center gap-2 text-sm\">\r\n                  <Check className=\"h-5 w-5 text-green-600 shrink-0\" />\r\n                  <span>V√≠deos ilimitados</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-sm\">\r\n                  <Check className=\"h-5 w-5 text-green-600 shrink-0\" />\r\n                  <span>Artes/Posts ilimitados</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-sm\">\r\n                  <Check className=\"h-5 w-5 text-green-600 shrink-0\" />\r\n                  <span>10 Rob√¥s de IA Marketing</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-sm\">\r\n                  <Check className=\"h-5 w-5 text-green-600 shrink-0\" />\r\n                  <span>3 Influencers IA de Viagens</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-sm\">\r\n                  <Check className=\"h-5 w-5 text-green-600 shrink-0\" />\r\n                  <span>Calend√°rio de Conte√∫do</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-sm\">\r\n                  <Check className=\"h-5 w-5 text-green-600 shrink-0\" />\r\n                  <span>Suporte WhatsApp</span>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Card Designer Freelancer */}\r\n          <Card className=\"border opacity-70\">\r\n            <CardContent className=\"p-5\">\r\n              <div className=\"text-center mb-4\">\r\n                <p className=\"font-bold text-lg\">Designer Freelancer</p>\r\n                <p className=\"text-2xl font-bold text-red-600 mt-2\">R$ 600+/m√™s</p>\r\n                <p className=\"text-xs text-muted-foreground\">por projeto</p>\r\n              </div>\r\n              <div className=\"space-y-2 text-sm\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-red-600\">‚ùå</span>\r\n                  <span>R$ 300/v√≠deo</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-red-600\">‚ùå</span>\r\n                  <span>R$ 50/arte</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-red-600\">‚ùå</span>\r\n                  <span>Sem IA</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-red-600\">‚ùå</span>\r\n                  <span>Sem Influencers IA</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-red-600\">‚ùå</span>\r\n                  <span>Sem Calend√°rio</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-muted-foreground\">‚ö†Ô∏è</span>\r\n                  <span className=\"text-muted-foreground\">Suporte por projeto</span>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Card Ag√™ncia de Marketing */}\r\n          <Card className=\"border opacity-60\">\r\n            <CardContent className=\"p-5\">\r\n              <div className=\"text-center mb-4\">\r\n                <p className=\"font-bold text-lg\">Ag√™ncia Marketing</p>\r\n                <p className=\"text-2xl font-bold text-red-600 mt-2\">R$ 2.000+/m√™s</p>\r\n                <p className=\"text-xs text-muted-foreground\">mensalidade</p>\r\n              </div>\r\n              <div className=\"space-y-2 text-sm\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-red-600\">‚ùå</span>\r\n                  <span>R$ 500/v√≠deo</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-red-600\">‚ùå</span>\r\n                  <span>R$ 100/arte</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-red-600\">‚ùå</span>\r\n                  <span>Sem IA</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-red-600\">‚ùå</span>\r\n                  <span>Sem Influencers IA</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-green-600\">‚úÖ</span>\r\n                  <span>Calend√°rio R$ 200/m√™s</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-muted-foreground\">‚ö†Ô∏è</span>\r\n                  <span className=\"text-muted-foreground\">Email only</span>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* DESKTOP: Tabela (hidden mobile) */}\r\n        <div className=\"hidden md:block max-w-4xl mx-auto overflow-x-auto\">\r\n          <table className=\"w-full border-collapse\">\r\n            <thead>\r\n              <tr className=\"border-b-2\">\r\n                <th className=\"text-left p-3 md:p-4 text-sm md:text-base font-bold\">Recurso</th>\r\n                <th className=\"p-3 md:p-4 text-center bg-gradient-to-br from-primary/10 to-accent/10 border-2 border-primary/30 text-sm md:text-base font-bold\">\r\n                  <div className=\"flex flex-col items-center gap-1\">\r\n                    <Sparkles className=\"h-5 w-5 text-primary\" />\r\n                    Canva Viagem\r\n                  </div>\r\n                </th>\r\n                <th className=\"p-3 md:p-4 text-center text-sm md:text-base\">Designer<br /><span className=\"text-xs text-muted-foreground\">Freelancer</span></th>\r\n                <th className=\"p-3 md:p-4 text-center text-sm md:text-base\">Ag√™ncia<br /><span className=\"text-xs text-muted-foreground\">Marketing</span></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr className=\"border-b\">\r\n                <td className=\"p-3 md:p-4 text-sm md:text-base\">V√≠deos ilimitados</td>\r\n                <td className=\"p-3 md:p-4 text-center bg-primary/5\">\r\n                  <Check className=\"h-5 w-5 text-green-600 mx-auto\" />\r\n                </td>\r\n                <td className=\"p-3 md:p-4 text-center text-xs md:text-sm text-red-600\">R$ 300/v√≠deo</td>\r\n                <td className=\"p-3 md:p-4 text-center text-xs md:text-sm text-red-600\">R$ 500/v√≠deo</td>\r\n              </tr>\r\n              <tr className=\"border-b\">\r\n                <td className=\"p-3 md:p-4 text-sm md:text-base\">Artes/Posts ilimitados</td>\r\n                <td className=\"p-3 md:p-4 text-center bg-primary/5\">\r\n                  <Check className=\"h-5 w-5 text-green-600 mx-auto\" />\r\n                </td>\r\n                <td className=\"p-3 md:p-4 text-center text-xs md:text-sm text-red-600\">R$ 50/arte</td>\r\n                <td className=\"p-3 md:p-4 text-center text-xs md:text-sm text-red-600\">R$ 100/arte</td>\r\n              </tr>\r\n              <tr className=\"border-b\">\r\n                <td className=\"p-3 md:p-4 text-sm md:text-base\">10 Rob√¥s de IA Marketing</td>\r\n                <td className=\"p-3 md:p-4 text-center bg-primary/5\">\r\n                  <Check className=\"h-5 w-5 text-green-600 mx-auto\" />\r\n                </td>\r\n                <td className=\"p-3 md:p-4 text-center text-xs md:text-sm\">‚ùå</td>\r\n                <td className=\"p-3 md:p-4 text-center text-xs md:text-sm\">‚ùå</td>\r\n              </tr>\r\n              <tr className=\"border-b\">\r\n                <td className=\"p-3 md:p-4 text-sm md:text-base\">3 Influencers IA de Viagens</td>\r\n                <td className=\"p-3 md:p-4 text-center bg-primary/5\">\r\n                  <Check className=\"h-5 w-5 text-green-600 mx-auto\" />\r\n                </td>\r\n                <td className=\"p-3 md:p-4 text-center text-xs md:text-sm\">‚ùå</td>\r\n                <td className=\"p-3 md:p-4 text-center text-xs md:text-sm\">‚ùå</td>\r\n              </tr>\r\n              <tr className=\"border-b\">\r\n                <td className=\"p-3 md:p-4 text-sm md:text-base\">Calend√°rio de Conte√∫do</td>\r\n                <td className=\"p-3 md:p-4 text-center bg-primary/5\">\r\n                  <Check className=\"h-5 w-5 text-green-600 mx-auto\" />\r\n                </td>\r\n                <td className=\"p-3 md:p-4 text-center text-xs md:text-sm\">‚ùå</td>\r\n                <td className=\"p-3 md:p-4 text-center text-xs md:text-sm text-red-600\">R$ 200/m√™s</td>\r\n              </tr>\r\n              <tr className=\"border-b\">\r\n                <td className=\"p-3 md:p-4 text-sm md:text-base\">Suporte WhatsApp</td>\r\n                <td className=\"p-3 md:p-4 text-center bg-primary/5\">\r\n                  <Check className=\"h-5 w-5 text-green-600 mx-auto\" />\r\n                </td>\r\n                <td className=\"p-3 md:p-4 text-center text-xs md:text-sm\">Por projeto</td>\r\n                <td className=\"p-3 md:p-4 text-center text-xs md:text-sm\">Email only</td>\r\n              </tr>\r\n              <tr className=\"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-950/20 dark:to-blue-950/20 font-bold\">\r\n                <td className=\"p-3 md:p-4 text-sm md:text-base\">üí∞ Total por m√™s</td>\r\n                <td className=\"p-3 md:p-4 text-center text-lg md:text-xl text-green-600\">\r\n                  <div className=\"flex flex-col items-center\">\r\n                    <span className=\"text-2xl md:text-3xl font-black\">R$ 29</span>\r\n                    <span className=\"text-xs\">‚ú® Tudo incluso</span>\r\n                  </div>\r\n                </td>\r\n                <td className=\"p-3 md:p-4 text-center text-base md:text-lg text-red-600\">\r\n                  <div className=\"flex flex-col items-center\">\r\n                    <span className=\"font-bold\">R$ 600+</span>\r\n                    <span className=\"text-xs\">por projeto</span>\r\n                  </div>\r\n                </td>\r\n                <td className=\"p-3 md:p-4 text-center text-base md:text-lg text-red-600\">\r\n                  <div className=\"flex flex-col items-center\">\r\n                    <span className=\"font-bold\">R$ 2.000+</span>\r\n                    <span className=\"text-xs\">mensalidade</span>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <div className=\"mt-6 text-center\">\r\n          <p className=\"text-lg md:text-xl font-bold text-green-600\">\r\n            üéâ Economize at√© R$ 1.971/m√™s = R$ 23.652/ano!\r\n          </p>\r\n        </div>\r\n      </section>\r\n\r\n      {/* FAQ MATADOR - Remove Obje√ß√µes */}\r\n      <section className=\"mb-12 md:mb-20\">\r\n        <h2 className=\"text-2xl md:text-3xl font-bold text-center mb-3\">Perguntas Frequentes</h2>\r\n        <p className=\"text-center text-muted-foreground mb-8\">Tudo o que voc√™ precisa saber</p>\r\n\r\n        <Accordion type=\"single\" collapsible className=\"w-full max-w-3xl mx-auto\">\r\n          <AccordionItem value=\"item-1\">\r\n            <AccordionTrigger className=\"text-left text-base md:text-lg font-semibold\">\r\n              ‚ùì Preciso saber design para usar?\r\n            </AccordionTrigger>\r\n            <AccordionContent className=\"text-muted-foreground text-sm md:text-base\">\r\n              <strong className=\"text-foreground\">N√£o!</strong> A ferramenta √© super intuitiva. Tudo j√° vem pronto: v√≠deos, artes, legendas.\r\n              Voc√™ s√≥ escolhe o que quer e baixa. Em 2 minutos voc√™ cria um post profissional.\r\n              Temos tamb√©m uma aula completa mostrando como usar.\r\n            </AccordionContent>\r\n          </AccordionItem>\r\n\r\n          <AccordionItem value=\"item-2\">\r\n            <AccordionTrigger className=\"text-left text-base md:text-lg font-semibold\">\r\n              üì± Funciona no celular?\r\n            </AccordionTrigger>\r\n            <AccordionContent className=\"text-muted-foreground text-sm md:text-base\">\r\n              <strong className=\"text-foreground\">Sim!</strong> Canva Viagem funciona perfeitamente no celular, tablet e computador.\r\n              Acesse de qualquer lugar, a qualquer hora. Ideal para quem trabalha em movimento.\r\n            </AccordionContent>\r\n          </AccordionItem>\r\n\r\n          <AccordionItem value=\"item-3\">\r\n            <AccordionTrigger className=\"text-left text-base md:text-lg font-semibold\">\r\n              ‚ùå Posso cancelar quando quiser?\r\n            </AccordionTrigger>\r\n            <AccordionContent className=\"text-muted-foreground text-sm md:text-base\">\r\n              <strong className=\"text-foreground\">Sim, sem letras mi√∫das!</strong> Voc√™ pode cancelar a qualquer momento, sem burocracias.\r\n              E se cancelar nos primeiros 7 dias, devolvemos 100% do seu dinheiro. Risco ZERO.\r\n            </AccordionContent>\r\n          </AccordionItem>\r\n\r\n          <AccordionItem value=\"item-4\">\r\n            <AccordionTrigger className=\"text-left text-base md:text-lg font-semibold\">\r\n              ‚è±Ô∏è Quanto tempo leva para criar um post?\r\n            </AccordionTrigger>\r\n            <AccordionContent className=\"text-muted-foreground text-sm md:text-base\">\r\n              <strong className=\"text-foreground\">2 minutos!</strong> Escolha o v√≠deo ou arte ‚Üí Personalize (opcional) ‚Üí Baixe ‚Üí Poste.\r\n              Voc√™ pode criar conte√∫do para a semana inteira em menos de 15 minutos.\r\n            </AccordionContent>\r\n          </AccordionItem>\r\n\r\n          <AccordionItem value=\"item-5\">\r\n            <AccordionTrigger className=\"text-left text-base md:text-lg font-semibold\">\r\n              üìπ Os v√≠deos t√™m copyright?\r\n            </AccordionTrigger>\r\n            <AccordionContent className=\"text-muted-foreground text-sm md:text-base\">\r\n              <strong className=\"text-foreground\">N√£o!</strong> Todos os v√≠deos e artes s√£o 100% livres de direitos autorais.\r\n              Voc√™ pode usar com seguran√ßa no seu marketing sem preocupa√ß√µes.\r\n            </AccordionContent>\r\n          </AccordionItem>\r\n\r\n          <AccordionItem value=\"item-6\">\r\n            <AccordionTrigger className=\"text-left text-base md:text-lg font-semibold\">\r\n              üîÑ Voc√™s adicionam conte√∫do novo?\r\n            </AccordionTrigger>\r\n            <AccordionContent className=\"text-muted-foreground text-sm md:text-base\">\r\n              <strong className=\"text-foreground\">Toda semana!</strong> Adicionamos novos v√≠deos, artes e ferramentas de IA constantemente.\r\n              Seu acesso garante todas as atualiza√ß√µes futuras sem custo adicional.\r\n            </AccordionContent>\r\n          </AccordionItem>\r\n\r\n          <AccordionItem value=\"item-7\">\r\n            <AccordionTrigger className=\"text-left text-base md:text-lg font-semibold\">\r\n              üí¨ Como funciona o suporte?\r\n            </AccordionTrigger>\r\n            <AccordionContent className=\"text-muted-foreground text-sm md:text-base\">\r\n              Suporte direto via WhatsApp durante hor√°rio comercial. Respondemos r√°pido e ajudamos com qualquer d√∫vida!\r\n            </AccordionContent>\r\n          </AccordionItem>\r\n\r\n          <AccordionItem value=\"item-8\">\r\n            <AccordionTrigger className=\"text-left text-base md:text-lg font-semibold\">\r\n              üöÄ Quando recebo o acesso?\r\n            </AccordionTrigger>\r\n            <AccordionContent className=\"text-muted-foreground text-sm md:text-base\">\r\n              <strong className=\"text-foreground\">Imediatamente!</strong> Assim que o pagamento for confirmado (geralmente instant√¢neo),\r\n              voc√™ recebe o link de acesso por email. Em 2 minutos j√° est√° criando conte√∫do!\r\n            </AccordionContent>\r\n          </AccordionItem>\r\n        </Accordion>\r\n      </section>\r\n\r\n      {/* SE√á√ÉO DE GARANTIA */}\r\n      <section className=\"mb-12 md:mb-20\">\r\n        <div className=\"bg-accent/10 border-l-4 border-accent p-6 md:p-8 rounded-xl\">\r\n          <div className=\"flex flex-col items-center text-center\">\r\n            <img src={garantia7dias} alt=\"Garantia 7 dias incondicional\" className=\"w-20 md:w-28 mb-4\" />\r\n            <h3 className=\"text-2xl md:text-3xl font-bold mb-4\">{t('plans.guaranteeTitle')}</h3>\r\n            <p className=\"text-lg text-muted-foreground max-w-xl\">\r\n              {t('plans.guaranteeDesc')}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* SOCIAL PROOF CVC/DECOLAR */}\r\n      <section className=\"mb-8 md:mb-12 text-center\">\r\n        <p className=\"text-xl md:text-2xl font-semibold mb-3 md:mb-4\">Seu perfil melhor do que o da CVC e Decolar? üòÖ</p>\r\n        <img src=\"https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExMmo1NGh5cGxiZG1vdHl3bmZxNTBxd2h0aDBsbXkxa2xhNWk4bmE4aSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/MpVJ9IjphA5p6sO8Zr/giphy.gif\" alt=\"Perfil profissional\" className=\"mx-auto rounded-xl shadow-lg max-w-full w-full md:max-w-md\" />\r\n      </section>\r\n\r\n      {/* Alert para usu√°rios logados sem assinatura */}\r\n      {user && <div className=\"bg-secondary border border-border rounded-lg p-3 md:p-4 mb-6 md:mb-8\">\r\n        <div className=\"flex items-center gap-3 mb-3\">\r\n          <div className=\"bg-primary/10 rounded-full p-2 shrink-0\">\r\n            <Plane className=\"h-4 w-4 md:h-5 md:w-5 text-primary\" />\r\n          </div>\r\n          <p className=\"text-foreground text-sm md:text-base\">\r\n            <strong>{t('plans.noActivePlan')}</strong>\r\n          </p>\r\n        </div>\r\n        <Button variant=\"outline\" size=\"sm\" onClick={handleRefreshSubscription} disabled={refreshLoading} className=\"w-full sm:w-auto\">\r\n          {refreshLoading ? <>\r\n            <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n            {t('plans.refreshing')}\r\n          </> : <>\r\n            <RefreshCw className=\"mr-2 h-4 w-4\" />\r\n            {t('plans.refreshStatus')}\r\n          </>}\r\n        </Button>\r\n      </div>}\r\n\r\n      {/* FAQ REDUZIDO - 5 PERGUNTAS ESSENCIAIS */}\r\n      <section className=\"mb-12 md:mb-16\">\r\n        <h2 className=\"text-2xl md:text-3xl font-bold text-center mb-8\">{t('plans.faqTitle')}</h2>\r\n        <Accordion type=\"single\" collapsible className=\"w-full max-w-3xl mx-auto\">\r\n          {faqs.map((faq, index) => <AccordionItem key={index} value={`item-${index}`}>\r\n            <AccordionTrigger className=\"text-left text-base md:text-lg\">{faq.question}</AccordionTrigger>\r\n            <AccordionContent className=\"text-muted-foreground\">\r\n              {faq.answer}\r\n            </AccordionContent>\r\n          </AccordionItem>)}\r\n        </Accordion>\r\n      </section>\r\n\r\n      {/* CTA FINAL COM PULSE */}\r\n      <section className=\"mb-12\">\r\n        <div className=\"text-center\">\r\n          <Button size=\"lg\" onClick={handleCheckout} disabled={checkoutLoading} className=\"text-xl px-12 h-16 bg-gradient-to-r from-primary to-accent animate-pulse shadow-2xl hover:shadow-3xl transition-all duration-300\">\r\n            {checkoutLoading ? <Loader2 className=\"h-6 w-6 animate-spin\" /> : <>\r\n              <Sparkles className=\"mr-2 h-6 w-6\" />\r\n              {t('plans.ctaFinal')}\r\n            </>}\r\n          </Button>\r\n          <p className=\"text-sm font-medium mt-4 flex items-center justify-center gap-2\">\r\n            <Shield className=\"h-4 w-4 text-green-600\" />\r\n            <span>üîí Pagamento Seguro</span>\r\n          </p>\r\n          <p className=\"text-xs text-muted-foreground mt-2\">\r\n            {t('plans.instantAccess')}\r\n          </p>\r\n        </div>\r\n      </section>\r\n\r\n      {/* MOBILE STICKY CTA - Always visible on mobile */}\r\n      <div className=\"md:hidden fixed bottom-0 left-0 right-0 z-50 bg-background/98 backdrop-blur-xl border-t-2 border-primary/20 shadow-2xl pb-safe\">\r\n        <div className=\"p-4\">\r\n          <Button\r\n            size=\"lg\"\r\n            className=\"w-full h-16 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-lg font-black shadow-xl text-white\"\r\n            onClick={handleCheckout}\r\n            disabled={checkoutLoading}\r\n          >\r\n            {checkoutLoading ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : <>\r\n              üî• TESTAR POR 7 DIAS GR√ÅTIS\r\n            </>}\r\n          </Button>\r\n          <p className=\"text-center text-xs text-muted-foreground mt-2 flex items-center justify-center gap-3\">\r\n            <span className=\"flex items-center gap-1\">\r\n              üöÄ Fase de lan√ßamento\r\n            </span>\r\n            <span>‚Ä¢</span>\r\n            <span className=\"flex items-center gap-1\">\r\n              ‚úÖ 7 dias garantia\r\n            </span>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <Footer />\r\n  </div>;\r\n};\r\nexport default Planos;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\PlanosES.tsx","messages":[{"ruleId":"no-shadow-restricted-names","severity":2,"message":"Shadowing of global property 'Infinity'.","line":16,"column":71,"nodeType":"Identifier","messageId":"shadowingRestrictedName","endLine":16,"endColumn":79}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from \"react\";\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { Header } from \"@/components/Header\";\nimport { Footer } from \"@/components/Footer\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { toast } from \"sonner\";\nimport { UserInfoCard } from \"@/components/UserInfoCard\";\nimport { trackViewContent, trackInitiateCheckout } from \"@/lib/meta-pixel\";\nimport {\n  Loader2, Check, Plane, Settings, Video, Image, MessageSquare,\n  Bot, Calendar, Sparkles, RefreshCw, Users, FileText, Shield, Clock, Infinity\n} from \"lucide-react\";\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from \"@/components/ui/accordion\";\nimport garantia7dias from \"@/assets/garantia-7-dias.png\";\nimport { SpanishPixel } from \"@/components/SpanishPixel\";\n\n// GIFs e Videos constants\nconst heroGif = \"https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExZm5kcmcybmE2aTFkOTU3ZDNqYmZkbHQ2YjRibjB1NjFtN2RoNWdrMyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/6osnZ6joYcPfERZsaE/giphy.gif\";\n\nconst proofGifs = [\n  \"https://media.giphy.com/media/OEXnFVFMGCAoIuvcfs/giphy.gif\",\n  \"https://media.giphy.com/media/cA9Hq7AaawDVrbP4pn/giphy.gif\",\n  \"https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExb3J2anV0aTVkYWowbDl1ZXFtNnB4ZWUwcnVnZTVzOW91ZzNncGNvNSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/mbylDFYWSU46XeLcsS/giphy.gif\",\n  \"https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExcXQ1dHAxM2JxcWM0N3VqdWhibnBtcDR5eWVmNTZwaGI1NTJjeml3diZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/VcFJaM72FG76eG75In/giphy.gif\",\n  \"https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExa24wbWJoa2swZXVyY3h5eDgxY3FhdWR2cHg5MDhrN3p2ZGExYWtpNiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/22QqF0ECtSnOvpiQLZ/giphy.gif\",\n  \"https://media.giphy.com/media/OnG9sr0U3v4VFxm2oh/giphy.gif\",\n];\n\nconst youtubeVideos = [\n  { id: \"WQHy13ySG-g\", title: \"Video 1\" },\n  { id: \"NYkxwcI2Cr0\", title: \"Video 2\" },\n  { id: \"QYjziquV-YU\", title: \"Video 3\" },\n  { id: \"VmX1raYC96E\", title: \"Video 4\" },\n];\n\n// ‚≠ê CHECKOUT LINK USD FIXED ‚≠ê\nconst STRIPE_LINK_ES = \"https://buy.stripe.com/bJedRa3TIej6cz15gE8so04\";\n\nconst PlanosES = () => {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const { setLanguage } = useLanguage();\n  const {\n    user,\n    loading: authLoading,\n    subscription,\n    refreshSubscription,\n  } = useAuth();\n  const [checkoutLoading, setCheckoutLoading] = useState(false);\n  const [portalLoading, setPortalLoading] = useState(false);\n  const [refreshLoading, setRefreshLoading] = useState(false);\n\n  // ‚≠ê Set document language on mount ‚≠ê\n  useEffect(() => {\n    document.documentElement.lang = 'es';\n    setLanguage('es');\n  }, [setLanguage]);\n\n  // Benefits with icons - Spanish\n  const benefits = [\n    { icon: Video, text: \"+250 plantillas de videos editables\", description: \"Videos profesionales listos para editar en Canva con m√∫sica y transiciones\", highlight: true },\n    { icon: MessageSquare, text: \"Soporte por WhatsApp\", description: \"Resuelve tus dudas directamente con nuestro equipo\", highlight: false },\n    { icon: Calendar, text: \"Calendario de publicaciones\", description: \"Planifica tu contenido con fechas especiales y festivos\", highlight: false },\n    { icon: FileText, text: \"Subt√≠tulos listos para copiar\", description: \"Textos optimizados para Instagram, Facebook y TikTok\", highlight: false },\n    { icon: Sparkles, text: \"Integraci√≥n con Canva Pro\", description: \"Compatibilidad total con Canva para edici√≥n f√°cil\", highlight: false },\n    { icon: Shield, text: \"Sin derechos de autor\", description: \"Usa todo el contenido sin preocupaciones legales\", highlight: false },\n    { icon: Bot, text: \"Herramientas de IA exclusivas\", description: \"Crea subt√≠tulos y descripciones autom√°ticamente con IA\", highlight: true },\n    { icon: Image, text: \"Artes para feed y stories\", description: \"Dise√±os est√°ticos para complementar tus videos\", highlight: false },\n    { icon: Users, text: \"Contenido con influencers\", description: \"Videos con creadores de viajes reconocidos\", highlight: false },\n    { icon: Infinity, text: \"Actualizaciones semanales\", description: \"Nuevo contenido cada semana para mantenerte actualizado\", highlight: false },\n  ];\n\n  // FAQs - Spanish\n  const faqs = [\n    {\n      question: \"¬øC√≥mo accedo a las plantillas?\",\n      answer: \"Despu√©s del pago, recibir√°s acceso inmediato a la plataforma con todas las plantillas editables en Canva.\"\n    },\n    {\n      question: \"¬øNecesito Canva Pro?\",\n      answer: \"No es obligatorio, pero recomendamos Canva Pro para acceder a todas las funcionalidades de las plantillas.\"\n    },\n    {\n      question: \"¬øPuedo cancelar en cualquier momento?\",\n      answer: \"S√≠, puedes cancelar tu suscripci√≥n cuando quieras sin cargos adicionales.\"\n    },\n    {\n      question: \"¬øLas plantillas son exclusivas?\",\n      answer: \"S√≠, todas las plantillas son creadas exclusivamente para nuestra plataforma.\"\n    },\n    {\n      question: \"¬øC√≥mo funciona la garant√≠a?\",\n      answer: \"Tienes 7 d√≠as para probar. Si no te gusta, te devolvemos el 100% de tu dinero.\"\n    },\n  ];\n\n  // Track view content\n  useEffect(() => {\n    trackViewContent('P√°gina de Planes ES');\n  }, []);\n\n  // Handle success/cancel redirects from Stripe\n  useEffect(() => {\n    const success = searchParams.get(\"success\");\n    const canceled = searchParams.get(\"canceled\");\n    if (success === \"true\") {\n      toast.success(\"¬°Pago realizado con √©xito!\");\n      refreshSubscription();\n      navigate(\"/sucesso\");\n    } else if (canceled === \"true\") {\n      toast.info(\"Pago cancelado.\");\n      window.history.replaceState({}, \"\", \"/es/planos\");\n    }\n  }, [searchParams, refreshSubscription, navigate]);\n\n  const handleCheckout = async () => {\n    // Track with USD currency\n    trackInitiateCheckout(9.09, 'USD');\n    setCheckoutLoading(true);\n\n    if (user) {\n      try {\n        const { data: { session } } = await supabase.auth.getSession();\n        if (session?.access_token) {\n          const { data, error } = await supabase.functions.invoke(\"create-checkout\", {\n            headers: {\n              Authorization: `Bearer ${session.access_token}`\n            },\n            body: { language: 'es' }\n          });\n          if (!error && data?.url) {\n            window.open(data.url, '_blank');\n            toast.info(\"El checkout se abri√≥ en una nueva pesta√±a. ¬°Completa el pago y vuelve aqu√≠!\");\n            setCheckoutLoading(false);\n            return;\n          }\n        }\n      } catch (error) {\n        console.error(\"Checkout error:\", error);\n      }\n    }\n\n    // Fallback to direct Stripe link\n    window.open(STRIPE_LINK_ES, '_blank');\n    toast.info(\"El checkout se abri√≥ en una nueva pesta√±a. ¬°Despu√©s del pago, revisa tu email!\");\n    setCheckoutLoading(false);\n  };\n\n  const handleRefreshSubscription = async () => {\n    setRefreshLoading(true);\n    try {\n      await refreshSubscription();\n      toast.success(\"¬°Estado de la suscripci√≥n actualizado!\");\n    } catch (error) {\n      toast.error(\"Error al actualizar el estado\");\n    } finally {\n      setRefreshLoading(false);\n    }\n  };\n\n  const handleManageSubscription = async () => {\n    setPortalLoading(true);\n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n      if (!session?.access_token) {\n        toast.error(\"Necesitas iniciar sesi√≥n.\");\n        navigate(\"/auth\");\n        return;\n      }\n      const { data, error } = await supabase.functions.invoke(\"customer-portal\", {\n        headers: {\n          Authorization: `Bearer ${session.access_token}`\n        }\n      });\n      if (error) {\n        console.error(\"Portal error:\", error);\n        toast.error(\"Error al acceder al portal. Intenta de nuevo.\");\n        return;\n      }\n      if (data?.url) {\n        window.location.href = data.url;\n      }\n    } catch (error) {\n      console.error(\"Portal error:\", error);\n      toast.error(\"Error al procesar. Intenta de nuevo.\");\n    } finally {\n      setPortalLoading(false);\n    }\n  };\n\n  if (authLoading || subscription.loading) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <SpanishPixel />\n        <Header />\n        <div className=\"container mx-auto px-4 py-16 flex items-center justify-center\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n        </div>\n        <Footer />\n      </div>\n    );\n  }\n\n  // If user has active subscription, show different view\n  if (subscription.subscribed) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <SpanishPixel />\n        <Header />\n        <div className=\"container mx-auto px-3 md:px-4 py-6 md:py-8 max-w-4xl\">\n          <UserInfoCard />\n\n          <div className=\"text-center mb-8 md:mb-12\">\n            <Badge className=\"mb-4 bg-primary/10 text-primary border-primary/20\">\n              <Sparkles className=\"h-3 w-3 mr-1\" />\n              Suscriptor Activo\n            </Badge>\n            <h1 className=\"text-3xl md:text-4xl font-bold mb-4\">¬°Ya tienes acceso completo!</h1>\n            <p className=\"text-muted-foreground text-base md:text-lg\">\n              Disfruta de todas las plantillas y herramientas de la plataforma.\n            </p>\n          </div>\n\n          <Card className=\"border-primary border-2 mb-8\">\n            <CardHeader className=\"text-center p-4 md:p-6\">\n              <div className=\"h-16 w-16 md:h-20 md:w-20 mx-auto rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center mb-4\">\n                <Plane className=\"h-8 w-8 md:h-10 md:w-10 text-white\" />\n              </div>\n              <CardTitle className=\"text-xl md:text-2xl\">Canva Viagem Premium</CardTitle>\n              <p className=\"text-sm md:text-base text-muted-foreground\">Tu plan est√° activo</p>\n            </CardHeader>\n            <CardContent className=\"space-y-4 md:space-y-6 p-4 md:p-6\">\n              <div className=\"p-3 md:p-4 bg-primary/10 rounded-lg text-center\">\n                <p className=\"font-semibold text-primary flex items-center justify-center gap-2 text-sm md:text-base\">\n                  <Check className=\"h-4 w-4 md:h-5 md:w-5\" />\n                  Acceso completo a todas las plantillas\n                </p>\n                {subscription.subscriptionEnd && (\n                  <p className=\"text-xs md:text-sm text-muted-foreground mt-1\">\n                    Pr√≥xima renovaci√≥n: {new Date(subscription.subscriptionEnd).toLocaleDateString('es-ES')}\n                  </p>\n                )}\n              </div>\n\n              <div className=\"flex flex-col gap-3\">\n                <Button onClick={() => navigate(\"/es\")} className=\"w-full\" size=\"lg\">\n                  <Plane className=\"mr-2 h-4 w-4\" />\n                  Acceder a la Plataforma\n                </Button>\n                <div className=\"flex flex-col sm:flex-row gap-3\">\n                  <Button variant=\"outline\" onClick={handleManageSubscription} disabled={portalLoading} className=\"flex-1\">\n                    {portalLoading ? (\n                      <>\n                        <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                        Cargando...\n                      </>\n                    ) : (\n                      <>\n                        <Settings className=\"mr-2 h-4 w-4\" />\n                        Gestionar Suscripci√≥n\n                      </>\n                    )}\n                  </Button>\n                  <Button variant=\"ghost\" onClick={handleRefreshSubscription} disabled={refreshLoading} className=\"flex-1\">\n                    {refreshLoading ? (\n                      <>\n                        <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                        Actualizando...\n                      </>\n                    ) : (\n                      <>\n                        <RefreshCw className=\"mr-2 h-4 w-4\" />\n                        Actualizar Estado\n                      </>\n                    )}\n                  </Button>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n        <Footer />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background overflow-x-hidden\">\n      <SpanishPixel />\n      <Header />\n      <div className=\"container mx-auto px-3 md:px-4 py-6 md:py-8 max-w-5xl overflow-x-hidden\">\n        {user && <UserInfoCard />}\n\n        {/* HERO SECTION - Badge de Marketing */}\n        <section className=\"text-center mb-12 md:mb-20\">\n          <div className=\"mb-6 px-4 md:px-6 py-2 md:py-2.5 bg-gradient-to-r from-blue-500/20 to-purple-500/20 backdrop-blur-sm border-2 border-blue-400/30 rounded-full inline-block shadow-lg\">\n            <p className=\"text-blue-700 dark:text-blue-300 text-xs md:text-sm font-bold flex items-center gap-2\">\n              üèÜ La primera herramienta de marketing tur√≠stico m√°s completa del mundo\n            </p>\n          </div>\n\n          {/* Headline con Gradiente */}\n          <h1 className=\"text-4xl md:text-6xl lg:text-7xl font-black leading-tight mb-2\">\n            <span className=\"bg-gradient-to-r from-primary via-accent to-primary bg-clip-text text-transparent\">\n              TravelMarketing\n            </span>\n          </h1>\n          <p className=\"text-lg md:text-xl text-muted-foreground mb-4 font-medium\">\n            Marketing Profesional para Turismo\n          </p>\n          <h2 className=\"text-3xl md:text-5xl font-bold mb-4\">\n            ¬°Vende M√°s Viajes Todo el A√±o!\n          </h2>\n\n          {/* Subheadline */}\n          <p className=\"text-xl md:text-2xl text-muted-foreground mb-8\">\n            +250 plantillas de video editables en Canva\n          </p>\n\n          {/* GIF Hero */}\n          <img\n            src={heroGif}\n            alt=\"Videos de viajes profesionales\"\n            className=\"mx-auto rounded-2xl shadow-2xl max-w-xs md:max-w-2xl mb-6\"\n          />\n\n          {/* Badges de Prova Social */}\n          <div className=\"flex flex-col md:flex-row items-center justify-center gap-4\">\n            <Badge variant=\"outline\" className=\"px-4 py-2 text-sm\">\n              <Check className=\"h-4 w-4 mr-2 text-primary\" />\n              Menos de $0.04 por video\n            </Badge>\n            <Badge variant=\"outline\" className=\"px-4 py-2 text-sm\">\n              <Shield className=\"h-4 w-4 mr-2 text-accent\" />\n              +1000 agencias ya usan\n            </Badge>\n          </div>\n        </section>\n\n        {/* GRID DE GIFS FORMATO REELS */}\n        <section className=\"mb-12 md:mb-20\">\n          <h2 className=\"text-3xl md:text-4xl font-bold text-center mb-8\">\n            üé¨ Mira ejemplos de nuestros videos\n          </h2>\n          <div className=\"grid grid-cols-2 gap-3 md:gap-4 max-w-2xl mx-auto\">\n            {proofGifs.map((gif, index) => (\n              <div key={index} className=\"rounded-2xl overflow-hidden shadow-lg hover:scale-[1.02] transition-transform duration-300\">\n                <img\n                  src={gif}\n                  alt={`Ejemplo de video ${index + 1}`}\n                  className=\"w-full aspect-[9/16] object-cover\"\n                />\n              </div>\n            ))}\n          </div>\n        </section>\n\n        {/* SE√á√ÉO \"O QUE VOC√ä RECEBE\" MELHORADA */}\n        <section className=\"mb-12 md:mb-20\">\n          <div className=\"bg-gradient-to-br from-primary/10 to-accent/10 p-8 md:p-12 rounded-3xl\">\n            <h2 className=\"text-2xl md:text-3xl font-bold text-center mb-4\">\n              üíé ¬øQu√© recibes?\n            </h2>\n            <p className=\"text-center text-muted-foreground text-lg mb-8\">\n              Todo lo que necesitas para crear contenido profesional\n            </p>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {benefits.map((item, index) => (\n                <div\n                  key={index}\n                  className={`flex flex-col gap-2 p-4 rounded-lg transition-all duration-200 ${item.highlight\n                    ? 'bg-gradient-to-r from-primary to-accent text-white shadow-lg'\n                    : 'bg-background/50 hover:bg-background/80'\n                    }`}\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <item.icon className={`h-5 w-5 shrink-0 ${item.highlight ? 'text-white' : 'text-primary'}`} />\n                    <span className=\"font-semibold\">{item.text}</span>\n                  </div>\n                  <p className={`text-sm pl-8 ${item.highlight ? 'text-white/90' : 'text-muted-foreground'}`}>\n                    {item.description}\n                  </p>\n                </div>\n              ))}\n            </div>\n          </div>\n        </section>\n\n        {/* V√çDEOS YOUTUBE COM OVERLAY */}\n        <section className=\"mb-12 md:mb-20\">\n          <h2 className=\"text-2xl md:text-3xl font-bold text-center mb-8\">\n            üì± Algunos ejemplos de lo que tendr√°s\n          </h2>\n          <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-6 max-w-2xl lg:max-w-none mx-auto\">\n            {youtubeVideos.map((video) => (\n              <div key={video.id} className=\"bg-black rounded-xl overflow-hidden shadow-xl relative group\">\n                <iframe\n                  className=\"w-full aspect-[9/16]\"\n                  src={`https://www.youtube.com/embed/${video.id}`}\n                  title={video.title}\n                  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n                  allowFullScreen\n                />\n                <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-3 pointer-events-none\">\n                  <p className=\"text-white text-sm font-medium\">{video.title}</p>\n                </div>\n              </div>\n            ))}\n          </div>\n        </section>\n\n        {/* TESTIMONIOS - PROVA SOCIAL */}\n        <section className=\"mb-12 md:mb-20\">\n          <h2 className=\"text-2xl md:text-3xl font-bold text-center mb-3\">Lo Que Dicen Nuestros Clientes</h2>\n          <p className=\"text-center text-muted-foreground mb-8\">Agencias que ya est√°n vendiendo m√°s con TravelMarketing</p>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto\">\n            {/* Testimonial 1 */}\n            <Card className=\"border-2 border-primary/20\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center gap-2 mb-3\">\n                  {[...Array(5)].map((_, i) => <Star key={i} className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />)}\n                </div>\n                <p className=\"text-sm md:text-base mb-4 italic\">\n                  \"Aument√© mi engagement en 300% el primer mes. ¬°Puedo publicar todos los d√≠as y mis clientes lo aman!\"\n                </p>\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"h-10 w-10 bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center text-white font-bold\">\n                    M\n                  </div>\n                  <div>\n                    <p className=\"font-semibold text-sm\">Mar√≠a Garc√≠a</p>\n                    <p className=\"text-xs text-muted-foreground\">Agencia Viajes So√±ados</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Testimonial 2 */}\n            <Card className=\"border-2 border-accent/20\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center gap-2 mb-3\">\n                  {[...Array(5)].map((_, i) => <Star key={i} className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />)}\n                </div>\n                <p className=\"text-sm md:text-base mb-4 italic\">\n                  \"Cerr√© 5 paquetes extra este mes solo con los videos de TravelMarketing. ¬°Mejor inversi√≥n!\"\n                </p>\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"h-10 w-10 bg-gradient-to-br from-accent to-primary rounded-full flex items-center justify-center text-white font-bold\">\n                    J\n                  </div>\n                  <div>\n                    <p className=\"font-semibold text-sm\">Juan L√≥pez</p>\n                    <p className=\"text-xs text-muted-foreground\">Travel Expert</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Testimonial 3 */}\n            <Card className=\"border-2 border-green-500/20\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center gap-2 mb-3\">\n                  {[...Array(5)].map((_, i) => <Star key={i} className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />)}\n                </div>\n                <p className=\"text-sm md:text-base mb-4 italic\">\n                  \"Ahorr√© $800/mes que gastaba en dise√±ador. ¬°Ahora creo todo yo misma en minutos!\"\n                </p>\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"h-10 w-10 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center text-white font-bold\">\n                    A\n                  </div>\n                  <div>\n                    <p className=\"font-semibold text-sm\">Ana Rodr√≠guez</p>\n                    <p className=\"text-xs text-muted-foreground\">Mundo Viajes</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </section>\n\n        {/* COMPARISON TABLE */}\n        <section className=\"mb-12 md:mb-20\">\n          <h2 className=\"text-2xl md:text-3xl font-bold text-center mb-3\">Compara y Ve Cu√°nto Ahorras</h2>\n          <p className=\"text-center text-muted-foreground mb-8\">Invertir $9.09/mes vs contratar profesionales</p>\n\n          <div className=\"max-w-4xl mx-auto overflow-x-auto\">\n            <table className=\"w-full border-collapse\">\n              <thead>\n                <tr className=\"border-b-2\">\n                  <th className=\"text-left p-3 md:p-4 text-sm md:text-base font-bold\">Recurso</th>\n                  <th className=\"p-3 md:p-4 text-center bg-gradient-to-br from-primary/10 to-accent/10 border-2 border-primary/30 text-sm md:text-base font-bold\">\n                    <div className=\"flex flex-col items-center gap-1\">\n                      <Sparkles className=\"h-5 w-5 text-primary\" />\n                      TravelMarketing\n                    </div>\n                  </th>\n                  <th className=\"p-3 md:p-4 text-center text-sm md:text-base\">Dise√±ador<br /><span className=\"text-xs text-muted-foreground\">Freelancer</span></th>\n                  <th className=\"p-3 md:p-4 text-center text-sm md:text-base\">Agencia<br /><span className=\"text-xs text-muted-foreground\">Marketing</span></th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr className=\"border-b\">\n                  <td className=\"p-3 md:p-4 text-sm md:text-base\">Videos ilimitados</td>\n                  <td className=\"p-3 md:p-4 text-center bg-primary/5\">\n                    <Check className=\"h-5 w-5 text-green-600 mx-auto\" />\n                  </td>\n                  <td className=\"p-3 md:p-4 text-center text-xs md:text-sm text-red-600\">$300/video</td>\n                  <td className=\"p-3 md:p-4 text-center text-xs md:text-sm text-red-600\">$500/video</td>\n                </tr>\n                <tr className=\"border-b\">\n                  <td className=\"p-3 md:p-4 text-sm md:text-base\">Artes/Posts ilimitados</td>\n                  <td className=\"p-3 md:p-4 text-center bg-primary/5\">\n                    <Check className=\"h-5 w-5 text-green-600 mx-auto\" />\n                  </td>\n                  <td className=\"p-3 md:p-4 text-center text-xs md:text-sm text-red-600\">$50/arte</td>\n                  <td className=\"p-3 md:p-4 text-center text-xs md:text-sm text-red-600\">$100/arte</td>\n                </tr>\n                <tr className=\"border-b\">\n                  <td className=\"p-3 md:p-4 text-sm md:text-base\">10 Robots de IA Marketing</td>\n                  <td className=\"p-3 md:p-4 text-center bg-primary/5\">\n                    <Check className=\"h-5 w-5 text-green-600 mx-auto\" />\n                  </td>\n                  <td className=\"p-3 md:p-4 text-center text-xs md:text-sm\">‚ùå</td>\n                  <td className=\"p-3 md:p-4 text-center text-xs md:text-sm\">‚ùå</td>\n                </tr>\n                <tr className=\"border-b\">\n                  <td className=\"p-3 md:p-4 text-sm md:text-base\">3 Influencers IA de Viajes</td>\n                  <td className=\"p-3 md:p-4 text-center bg-primary/5\">\n                    <Check className=\"h-5 w-5 text-green-600 mx-auto\" />\n                  </td>\n                  <td className=\"p-3 md:p-4 text-center text-xs md:text-sm\">‚ùå</td>\n                  <td className=\"p-3 md:p-4 text-center text-xs md:text-sm\">‚ùå</td>\n                </tr>\n                <tr className=\"border-b\">\n                  <td className=\"p-3 md:p-4 text-sm md:text-base\">Calendario de Contenido</td>\n                  <td className=\"p-3 md:p-4 text-center bg-primary/5\">\n                    <Check className=\"h-5 w-5 text-green-600 mx-auto\" />\n                  </td>\n                  <td className=\"p-3 md:p-4 text-center text-xs md:text-sm\">‚ùå</td>\n                  <td className=\"p-3 md:p-4 text-center text-xs md:text-sm text-red-600\">$200/mes</td>\n                </tr>\n                <tr className=\"border-b\">\n                  <td className=\"p-3 md:p-4 text-sm md:text-base\">Soporte WhatsApp</td>\n                  <td className=\"p-3 md:p-4 text-center bg-primary/5\">\n                    <Check className=\"h-5 w-5 text-green-600 mx-auto\" />\n                  </td>\n                  <td className=\"p-3 md:p-4 text-center text-xs md:text-sm\">Por proyecto</td>\n                  <td className=\"p-3 md:p-4 text-center text-xs md:text-sm\">Solo email</td>\n                </tr>\n                <tr className=\"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-950/20 dark:to-blue-950/20 font-bold\">\n                  <td className=\"p-3 md:p-4 text-sm md:text-base\">üí∞ Total por mes</td>\n                  <td className=\"p-3 md:p-4 text-center text-lg md:text-xl text-green-600\">\n                    <div className=\"flex flex-col items-center\">\n                      <span className=\"text-2xl md:text-3xl font-black\">$9.09</span>\n                      <span className=\"text-xs\">‚ú® Todo incluido</span>\n                    </div>\n                  </td>\n                  <td className=\"p-3 md:p-4 text-center text-base md:text-lg text-red-600\">\n                    <div className=\"flex flex-col items-center\">\n                      <span className=\"font-bold\">$600+</span>\n                      <span className=\"text-xs\">por proyecto</span>\n                    </div>\n                  </td>\n                  <td className=\"p-3 md:p-4 text-center text-base md:text-lg text-red-600\">\n                    <div className=\"flex flex-col items-center\">\n                      <span className=\"font-bold\">$2.000+</span>\n                      <span className=\"text-xs\">mensualidad</span>\n                    </div>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n\n          <div className=\"mt-6 text-center\">\n            <p className=\"text-lg md:text-xl font-bold text-green-600\">\n              üéâ ¬°Ahorra hasta $1.970/mes = $23.640/a√±o!\n            </p>\n          </div>\n        </section>\n\n        {/* CARD DE PRE√áO - USD */}\n        <section id=\"precio\" className=\"mb-12 md:mb-20 scroll-mt-20\">\n          <Card className=\"max-w-2xl mx-auto border-2 border-primary/20 shadow-xl relative\">\n            {/* Floating Badge */}\n            <div className=\"absolute -top-4 left-1/2 -translate-x-1/2 z-10\">\n              <div className=\"bg-green-500/90 backdrop-blur-sm text-white px-4 md:px-6 py-1.5 md:py-2 rounded-full shadow-lg text-xs md:text-sm font-semibold whitespace-nowrap\">\n                ‚ú® 3 D√≠as Gratis\n              </div>\n            </div>\n\n            <CardContent className=\"p-8 md:p-12 text-center pt-10 md:pt-12\">\n              <h3 className=\"text-lg md:text-xl font-bold mb-3\">Ten acceso a todas las herramientas</h3>\n              <p className=\"text-sm md:text-base text-muted-foreground mb-6\">\n                Videos, artes, robots, influencers y todo el acceso\n              </p>\n\n              {/* Price Comparison - Show Value */}\n              <div className=\"bg-gradient-to-r from-red-50 to-orange-50 dark:from-red-950/20 dark:to-orange-950/20 rounded-lg p-4 mb-4 border border-red-200 dark:border-red-800\">\n                <p className=\"text-sm font-semibold text-red-600 dark:text-red-400 mb-1\">¬øCu√°nto pagar√≠as?</p>\n                <p className=\"text-xs text-muted-foreground mb-2\">Dise√±ador freelancer cobra:</p>\n                <p className=\"text-2xl font-bold line-through text-red-500\">$500/mes</p>\n                <p className=\"text-xs text-green-600 dark:text-green-400 font-semibold mt-1\">‚Üì Ahorra $490 por mes = $5.880/a√±o</p>\n              </div>\n\n              {/* Custom Price Display */}\n              <div className=\"flex items-baseline justify-center mb-2 gap-1\">\n                <span className=\"text-2xl md:text-3xl font-bold text-primary opacity-70\">$</span>\n                <span className=\"text-5xl md:text-6xl font-black text-primary\">9,09</span>\n                <span className=\"text-xl md:text-2xl text-muted-foreground ml-1\">/mes</span>\n              </div>\n              <p className=\"text-sm text-green-600 dark:text-green-400 font-bold mb-6\">¬°98% m√°s barato que dise√±ador!</p>\n\n              <Button size=\"lg\" onClick={handleCheckout} disabled={checkoutLoading} className=\"w-full h-16 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-base md:text-lg font-black shadow-xl hover:shadow-2xl transition-all duration-300 text-white animate-pulse hover:animate-none\">\n                {checkoutLoading ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : <>\n                  <Sparkles className=\"mr-2 h-5 w-5\" />\n                  üî• EMPEZAR PRUEBA GRATIS AHORA\n                </>}\n              </Button>\n\n              {/* Urgency - Limited spots */}\n              <div className=\"mt-3 bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-800 rounded-lg p-3\">\n                <p className=\"text-xs md:text-sm font-bold text-orange-600 dark:text-orange-400 flex items-center justify-center gap-1.5\">\n                  ‚ö° Solo 23 cupos restantes este mes\n                </p>\n              </div>\n\n              {/* Guarantee - Risk Free */}\n              <div className=\"mt-4 bg-green-50 dark:bg-green-950/20 border-2 border-green-300 dark:border-green-700 rounded-lg p-4\">\n                <p className=\"text-sm md:text-base font-bold text-green-700 dark:text-green-300 flex items-center justify-center gap-2 mb-1\">\n                  <Shield className=\"h-5 w-5\" />\n                  ‚úÖ Garant√≠a de 7 D√≠as - Riesgo CERO\n                </p>\n                <p className=\"text-xs text-green-600 dark:text-green-400\">\n                  ¬øNo te gusta? Cancela en 7 d√≠as y recibe el 100% de tu dinero\n                </p>\n              </div>\n\n              <p className=\"text-xs font-medium text-center mt-4 flex items-center justify-center gap-1.5\">\n                <span className=\"text-muted-foreground\">üîí Pago 100% seguro v√≠a Stripe</span>\n              </p>\n            </CardContent>\n          </Card>\n        </section>\n\n        {/* GARANTIA */}\n        <section className=\"mb-12 md:mb-20\">\n          <div className=\"bg-gradient-to-br from-green-500/10 to-emerald-500/10 p-8 md:p-12 rounded-3xl text-center\">\n            <img\n              src={garantia7dias}\n              alt=\"Garant√≠a de 7 d√≠as\"\n              className=\"mx-auto w-32 md:w-40 mb-6\"\n            />\n            <h2 className=\"text-2xl md:text-3xl font-bold mb-4\">\n              Garant√≠a de 7 D√≠as\n            </h2>\n            <p className=\"text-muted-foreground text-lg max-w-2xl mx-auto\">\n              Si no est√°s satisfecho con la plataforma, te devolvemos el 100% de tu dinero.\n              Sin preguntas, sin complicaciones.\n            </p>\n          </div>\n        </section>\n\n        {/* FAQ MEJORADO - Remove Objeciones */}\n        <section className=\"mb-12 md:mb-20\">\n          <h2 className=\"text-2xl md:text-3xl font-bold text-center mb-3\">Preguntas Frecuentes</h2>\n          <p className=\"text-center text-muted-foreground mb-8\">Todo lo que necesitas saber</p>\n\n          <Accordion type=\"single\" collapsible className=\"w-full max-w-3xl mx-auto\">\n            <AccordionItem value=\"item-1\">\n              <AccordionTrigger className=\"text-left text-base md:text-lg font-semibold\">\n                ‚ùì ¬øNecesito saber dise√±o para usar?\n              </AccordionTrigger>\n              <AccordionContent className=\"text-muted-foreground text-sm md:text-base\">\n                <strong className=\"text-foreground\">¬°No!</strong> La herramienta es super intuitiva. Todo viene listo: videos, artes, subt√≠tulos.\n                T√∫ solo eliges lo que quieres y descargas. En 2 minutos creas un post profesional.\n                Tambi√©n tenemos una clase completa mostrando c√≥mo usar.\n              </AccordionContent>\n            </AccordionItem>\n\n            <AccordionItem value=\"item-2\">\n              <AccordionTrigger className=\"text-left text-base md:text-lg font-semibold\">\n                üì± ¬øFunciona en el m√≥vil?\n              </AccordionTrigger>\n              <AccordionContent className=\"text-muted-foreground text-sm md:text-base\">\n                <strong className=\"text-foreground\">¬°S√≠!</strong> TravelMarketing funciona perfectamente en m√≥vil, tablet y computadora.\n                Accede desde cualquier lugar, a cualquier hora. Ideal para quien trabaja en movimiento.\n              </AccordionContent>\n            </AccordionItem>\n\n            <AccordionItem value=\"item-3\">\n              <AccordionTrigger className=\"text-left text-base md:text-lg font-semibold\">\n                ‚ùå ¬øPuedo cancelar cuando quiera?\n              </AccordionTrigger>\n              <AccordionContent className=\"text-muted-foreground text-sm md:text-base\">\n                <strong className=\"text-foreground\">¬°S√≠, sin letra peque√±a!</strong> Puedes cancelar en cualquier momento, sin burocracias.\n                Y si cancelas en los primeros 7 d√≠as, devolvemos el 100% de tu dinero. Riesgo CERO.\n              </AccordionContent>\n            </AccordionItem>\n\n            <AccordionItem value=\"item-4\">\n              <AccordionTrigger className=\"text-left text-base md:text-lg font-semibold\">\n                ‚è±Ô∏è ¬øCu√°nto tiempo lleva crear un post?\n              </AccordionTrigger>\n              <AccordionContent className=\"text-muted-foreground text-sm md:text-base\">\n                <strong className=\"text-foreground\">¬°2 minutos!</strong> Elige el video o arte ‚Üí Personaliza (opcional) ‚Üí Descarga ‚Üí Publica.\n                Puedes crear contenido para toda la semana en menos de 15 minutos.\n              </AccordionContent>\n            </AccordionItem>\n\n            <AccordionItem value=\"item-5\">\n              <AccordionTrigger className=\"text-left text-base md:text-lg font-semibold\">\n                üìπ ¬øLos videos tienen copyright?\n              </AccordionTrigger>\n              <AccordionContent className=\"text-muted-foreground text-sm md:text-base\">\n                <strong className=\"text-foreground\">¬°No!</strong> Todos los videos y artes son 100% libres de derechos de autor.\n                Puedes usar con seguridad en tu marketing sin preocupaciones.\n              </AccordionContent>\n            </AccordionItem>\n\n            <AccordionItem value=\"item-6\">\n              <AccordionTrigger className=\"text-left text-base md:text-lg font-semibold\">\n                üîÑ ¬øAgregan contenido nuevo?\n              </AccordionTrigger>\n              <AccordionContent className=\"text-muted-foreground text-sm md:text-base\">\n                <strong className=\"text-foreground\">¬°Cada semana!</strong> Agregamos nuevos videos, artes y herramientas de IA constantemente.\n                Tu acceso garantiza todas las actualizaciones futuras sin costo adicional.\n              </AccordionContent>\n            </AccordionItem>\n\n            <AccordionItem value=\"item-7\">\n              <AccordionTrigger className=\"text-left text-base md:text-lg font-semibold\">\n                üí¨ ¬øC√≥mo funciona el soporte?\n              </AccordionTrigger>\n              <AccordionContent className=\"text-muted-foreground text-sm md:text-base\">\n                Soporte directo v√≠a WhatsApp durante horario comercial. ¬°Respondemos r√°pido y ayudamos con cualquier duda!\n              </AccordionContent>\n            </AccordionItem>\n\n            <AccordionItem value=\"item-8\">\n              <AccordionTrigger className=\"text-left text-base md:text-lg font-semibold\">\n                üöÄ ¬øCu√°ndo recibo el acceso?\n              </AccordionTrigger>\n              <AccordionContent className=\"text-muted-foreground text-sm md:text-base\">\n                <strong className=\"text-foreground\">¬°Inmediatamente!</strong> Tan pronto como se confirme el pago (generalmente instant√°neo),\n                recibes el link de acceso por email. ¬°En 2 minutos ya est√°s creando contenido!\n              </AccordionContent>\n            </AccordionItem>\n          </Accordion>\n        </section>\n\n        {/* CTA FINAL */}\n        <section className=\"text-center pb-12\">\n          <h2 className=\"text-2xl md:text-3xl font-bold mb-6\">\n            ¬øListo para vender m√°s viajes?\n          </h2>\n          <Button\n            size=\"lg\"\n            onClick={handleCheckout}\n            disabled={checkoutLoading}\n            className=\"h-14 px-12 bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 text-lg font-bold shadow-lg hover:shadow-xl transition-all duration-300\"\n          >\n            {checkoutLoading ? (\n              <Loader2 className=\"h-5 w-5 animate-spin\" />\n            ) : (\n              <>\n                <Sparkles className=\"mr-2 h-5 w-5\" />\n                ¬°Empezar Ahora por $9,09/mes!\n              </>\n            )}\n          </Button>\n        </section>\n      </div>\n      <Footer />\n    </div>\n  );\n};\n\nexport default PlanosES;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\PosPagamento.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\Privacidade.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\Progresso.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\ProximoNivel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\Sucesso.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\Sugestoes.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1519,1522],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1519,1522],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Header } from '@/components/Header';\r\nimport { Footer } from '@/components/Footer';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Lightbulb, Send, CheckCircle } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\n\r\nexport default function Sugestoes() {\r\n    const { user } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [loading, setLoading] = useState(false);\r\n    const [submitted, setSubmitted] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        email: user?.email || '',\r\n        suggestion: '',\r\n    });\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (!formData.suggestion.trim()) {\r\n            toast.error('Por favor, escreva sua sugest√£o!');\r\n            return;\r\n        }\r\n\r\n        if (!formData.email.trim()) {\r\n            toast.error('Por favor, informe seu email!');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n\r\n        try {\r\n            const { error } = await (supabase.from('user_suggestions') as any).insert({\r\n                user_id: user?.id || null,\r\n                user_name: formData.name || null,\r\n                user_email: formData.email,\r\n                suggestion_text: formData.suggestion,\r\n                status: 'pending',\r\n            });\r\n\r\n            if (error) throw error;\r\n\r\n            setSubmitted(true);\r\n            toast.success('Sugest√£o enviada com sucesso! Obrigado pelo feedback! üéâ');\r\n\r\n            // Reset form\r\n            setFormData({\r\n                name: '',\r\n                email: user?.email || '',\r\n                suggestion: '',\r\n            });\r\n\r\n            // Show success state for 3 seconds then reset\r\n            setTimeout(() => {\r\n                setSubmitted(false);\r\n            }, 3000);\r\n        } catch (error) {\r\n            console.error('Error submitting suggestion:', error);\r\n            toast.error('Erro ao enviar sugest√£o. Tente novamente.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-background\">\r\n            <Header />\r\n            <main className=\"container mx-auto px-4 py-8 pt-24 max-w-3xl\">\r\n                {/* Hero Section */}\r\n                <div className=\"text-center mb-12\">\r\n                    <Lightbulb className=\"h-16 w-16 mx-auto mb-4 text-primary animate-pulse\" />\r\n                    <h1 className=\"text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent\">\r\n                        Suas Ideias Importam! üí°\r\n                    </h1>\r\n                    <p className=\"text-muted-foreground text-lg\">\r\n                        Ajude-nos a melhorar o Canva Viagem com suas sugest√µes\r\n                    </p>\r\n                </div>\r\n\r\n                {submitted ? (\r\n                    /* Success State */\r\n                    <Card className=\"border-2 border-green-500 shadow-lg\">\r\n                        <CardContent className=\"py-12 text-center\">\r\n                            <CheckCircle className=\"h-20 w-20 mx-auto mb-4 text-green-600\" />\r\n                            <h2 className=\"text-2xl font-bold mb-2\">Sugest√£o Enviada!</h2>\r\n                            <p className=\"text-muted-foreground mb-6\">\r\n                                Obrigado pelo seu feedback. Analisaremos sua sugest√£o com carinho! ‚ù§Ô∏è\r\n                            </p>\r\n                            <Button onClick={() => setSubmitted(false)}>\r\n                                Enviar Outra Sugest√£o\r\n                            </Button>\r\n                        </CardContent>\r\n                    </Card>\r\n                ) : (\r\n                    /* Form */\r\n                    <Card className=\"shadow-lg\">\r\n                        <CardHeader>\r\n                            <CardTitle className=\"text-2xl\">Envie sua Sugest√£o</CardTitle>\r\n                            <CardDescription>\r\n                                Quer ver uma nova funcionalidade? Tem ideia de melhoria? Conte pra gente!\r\n                            </CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"name\">Nome (opcional)</Label>\r\n                                    <Input\r\n                                        id=\"name\"\r\n                                        placeholder=\"Seu nome\"\r\n                                        value={formData.name}\r\n                                        onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"email\">Email *</Label>\r\n                                    <Input\r\n                                        id=\"email\"\r\n                                        type=\"email\"\r\n                                        placeholder=\"seu@email.com\"\r\n                                        value={formData.email}\r\n                                        onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n                                        required\r\n                                    />\r\n                                    <p className=\"text-xs text-muted-foreground\">\r\n                                        Usaremos apenas para responder sua sugest√£o\r\n                                    </p>\r\n                                </div>\r\n\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"suggestion\">Sua Sugest√£o *</Label>\r\n                                    <Textarea\r\n                                        id=\"suggestion\"\r\n                                        placeholder=\"Descreva sua ideia ou sugest√£o de melhoria...\"\r\n                                        value={formData.suggestion}\r\n                                        onChange={(e) => setFormData({ ...formData, suggestion: e.target.value })}\r\n                                        rows={6}\r\n                                        required\r\n                                        className=\"resize-none\"\r\n                                    />\r\n                                    <p className=\"text-xs text-muted-foreground\">\r\n                                        Seja o mais detalhado poss√≠vel para nos ajudar a entender sua necessidade\r\n                                    </p>\r\n                                </div>\r\n\r\n                                <Button type=\"submit\" size=\"lg\" className=\"w-full\" disabled={loading}>\r\n                                    {loading ? (\r\n                                        <>Enviando...</>\r\n                                    ) : (\r\n                                        <>\r\n                                            <Send className=\"mr-2 h-5 w-5\" />\r\n                                            Enviar Sugest√£o\r\n                                        </>\r\n                                    )}\r\n                                </Button>\r\n                            </form>\r\n                        </CardContent>\r\n                    </Card>\r\n                )}\r\n\r\n                {/* Info Cards */}\r\n                <div className=\"grid md:grid-cols-2 gap-4 mt-8\">\r\n                    <Card className=\"bg-accent/5\">\r\n                        <CardHeader>\r\n                            <CardTitle className=\"text-lg\">‚úÖ O que sugerir?</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent className=\"text-sm space-y-2\">\r\n                            <p>‚Ä¢ Novas funcionalidades</p>\r\n                            <p>‚Ä¢ Melhorias de design</p>\r\n                            <p>‚Ä¢ Novos templates</p>\r\n                            <p>‚Ä¢ Integra√ß√µes com outras ferramentas</p>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    <Card className=\"bg-accent/5\">\r\n                        <CardHeader>\r\n                            <CardTitle className=\"text-lg\">üöÄ Pr√≥ximos Passos</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent className=\"text-sm space-y-2\">\r\n                            <p>1. Recebemos sua sugest√£o</p>\r\n                            <p>2. Nossa equipe analisa</p>\r\n                            <p>3. Priorizamos as melhores ideias</p>\r\n                            <p>4. Voc√™ recebe atualiza√ß√µes por email</p>\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n            </main>\r\n            <Footer />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\Termos.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\admin\\CaptionsManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\admin\\ContentManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\admin\\Dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\admin\\Marketing.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\pages\\admin\\ToolsManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\supabase\\functions\\check-subscription\\index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[391,394],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[391,394],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":222,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":222,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7833,7836],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7833,7836],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { serve } from \"https://deno.land/std@0.190.0/http/server.ts\";\nimport Stripe from \"https://esm.sh/stripe@18.5.0\";\nimport { createClient } from \"https://esm.sh/@supabase/supabase-js@2.57.2\";\n\nconst corsHeaders = {\n  \"Access-Control-Allow-Origin\": \"*\",\n  \"Access-Control-Allow-Headers\": \"authorization, x-client-info, apikey, content-type\",\n};\n\nconst logStep = (step: string, details?: any) => {\n  const detailsStr = details ? ` - ${JSON.stringify(details)}` : '';\n  console.log(`[CHECK-SUBSCRIPTION] ${step}${detailsStr}`);\n};\n\n// Generic error messages for clients (security best practice)\nconst GENERIC_ERRORS = {\n  unauthorized: \"Unauthorized\",\n  serviceError: \"Service temporarily unavailable\",\n  configError: \"Service configuration error\",\n};\n\nserve(async (req) => {\n  if (req.method === \"OPTIONS\") {\n    return new Response(null, { headers: corsHeaders });\n  }\n\n  const supabaseUrl = Deno.env.get(\"SUPABASE_URL\") ?? \"\";\n  const supabaseAnonKey = Deno.env.get(\"SUPABASE_ANON_KEY\") ?? \"\";\n  const supabaseServiceRoleKey = Deno.env.get(\"SUPABASE_SERVICE_ROLE_KEY\") ?? \"\";\n\n  // Client used ONLY to validate the JWT (always uses anon key + Authorization header)\n  const authHeader = req.headers.get(\"Authorization\");\n  const authClient = createClient(supabaseUrl, supabaseAnonKey, {\n    global: authHeader ? { headers: { Authorization: authHeader } } : undefined,\n    auth: { persistSession: false },\n  });\n\n  // Client used for DB writes (prefer service role; if missing, we skip DB updates)\n  const dbClient = supabaseServiceRoleKey\n    ? createClient(supabaseUrl, supabaseServiceRoleKey, { auth: { persistSession: false } })\n    : null;\n\n  try {\n    logStep(\"Function started\");\n\n    const stripeKey = Deno.env.get(\"STRIPE_SECRET_KEY\");\n    if (!stripeKey) {\n      logStep(\"ERROR: STRIPE_SECRET_KEY not configured\");\n      return new Response(JSON.stringify({ error: GENERIC_ERRORS.configError }), {\n        headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n        status: 500,\n      });\n    }\n    logStep(\"Stripe key verified\");\n\n    if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n      return new Response(JSON.stringify({ error: GENERIC_ERRORS.unauthorized }), {\n        headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n        status: 401,\n      });\n    }\n    logStep(\"Authorization header found\");\n\n    const token = authHeader.replace(\"Bearer \", \"\").trim();\n    if (!token || token === \"null\" || token === \"undefined\") {\n      return new Response(JSON.stringify({ error: GENERIC_ERRORS.unauthorized }), {\n        headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n        status: 401,\n      });\n    }\n    logStep(\"Authenticating user with token\");\n\n    // Use getUser() without passing token - it uses the Authorization header from the client\n    const { data: userData, error: userError } = await authClient.auth.getUser();\n    if (userError || !userData?.user) {\n      logStep(\"Auth error\", { error: userError?.message });\n      return new Response(JSON.stringify({ error: GENERIC_ERRORS.unauthorized }), {\n        headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n        status: 401,\n      });\n    }\n\n    const userId = userData.user.id;\n    const email = userData.user.email;\n    if (!userId || !email) {\n      logStep(\"ERROR: User authenticated but missing required data\");\n      return new Response(JSON.stringify({ error: GENERIC_ERRORS.unauthorized }), {\n        headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n        status: 401,\n      });\n    }\n    logStep(\"User authenticated\", { userId, email });\n\n    const stripe = new Stripe(stripeKey, { apiVersion: \"2025-08-27.basil\" });\n    const customers = await stripe.customers.list({ email, limit: 1 });\n\n    if (customers.data.length === 0) {\n      logStep(\"No customer found, user not subscribed\");\n\n      // Best-effort DB update (only if service role key is available)\n      if (dbClient) {\n        await dbClient\n          .from(\"subscriptions\")\n          .upsert(\n            {\n              user_id: userId,\n              status: \"inactive\",\n              stripe_customer_id: null,\n              stripe_subscription_id: null,\n              product_id: null,\n              current_period_end: null,\n            },\n            { onConflict: \"user_id\" }\n          );\n      }\n\n      logStep(\"No valid payments found, user is not subscribed\");\n\n      // Best-effort DB update (only if service role key is available)\n      if (dbClient) {\n        await dbClient\n          .from(\"subscriptions\")\n          .upsert(\n            {\n              user_id: userId,\n              status: \"inactive\",\n              stripe_customer_id: null,\n              stripe_subscription_id: null,\n              product_id: null,\n              current_period_end: null,\n            },\n            { onConflict: \"user_id\" }\n          );\n      } else {\n        logStep(\"Skipping DB update (missing SUPABASE_SERVICE_ROLE_KEY)\");\n      }\n\n      return new Response(JSON.stringify({ subscribed: false, product_id: null, subscription_end: null }), {\n        headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n        status: 200,\n      });\n    }\n\n    const customerId = customers.data[0].id;\n    logStep(\"Found Stripe customer\", { customerId });\n\n    // Check for active subscriptions\n    const subscriptions = await stripe.subscriptions.list({\n      customer: customerId,\n      status: \"active\",\n      limit: 1,\n    });\n\n    // Also check trialing status\n    let hasActiveSub = subscriptions.data.length > 0;\n    let subscription = subscriptions.data[0];\n\n    if (!hasActiveSub) {\n      const trialingSubscriptions = await stripe.subscriptions.list({\n        customer: customerId,\n        status: \"trialing\",\n        limit: 1,\n      });\n      hasActiveSub = trialingSubscriptions.data.length > 0;\n      subscription = trialingSubscriptions.data[0];\n    }\n\n    let productId: string | null = null;\n    let subscriptionEnd: string | null = null;\n    let subscriptionId: string | null = null;\n\n    if (hasActiveSub && subscription) {\n      subscriptionId = subscription.id;\n\n      // Safely handle current_period_end which may be null\n      if (subscription.current_period_end) {\n        subscriptionEnd = new Date(subscription.current_period_end * 1000).toISOString();\n      }\n\n      logStep(\"Active subscription found\", { subscriptionId, endDate: subscriptionEnd });\n      productId = (subscription.items.data[0]?.price?.product as string | null) ?? null;\n      logStep(\"Determined subscription product\", { productId });\n\n      // Best-effort DB update (only if service role key is available)\n      if (dbClient) {\n        await dbClient\n          .from(\"subscriptions\")\n          .upsert(\n            {\n              user_id: userId,\n              status: \"active\",\n              stripe_customer_id: customerId,\n              stripe_subscription_id: subscriptionId,\n              product_id: productId,\n              current_period_end: subscriptionEnd,\n            },\n            { onConflict: \"user_id\" }\n          );\n      }\n\n      return new Response(JSON.stringify({\n        subscribed: true,\n        product_id: productId,\n        subscription_end: subscriptionEnd\n      }), {\n        headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n        status: 200,\n      });\n    }\n\n    // No active subscription, check for one-off payments (checkout sessions)\n    logStep(\"No active subscription, checking for one-off payments\");\n\n    // Check for valid one-off payments (within last 30 days)\n    const checkoutSessions = await stripe.checkout.sessions.list({\n      customer: customerId,\n      status: 'complete',\n      limit: 10, // Check last 10 payments\n    });\n\n    // Find the most recent valid payment\n    const validSession = checkoutSessions.data.find((session: any) => {\n      if (session.payment_status !== 'paid' || session.mode !== 'payment') return false;\n\n      // Check if within 30 days\n      const created = session.created * 1000; // Stripe uses seconds\n      const now = Date.now();\n      const thirtyDaysMs = 30 * 24 * 60 * 60 * 1000;\n\n      return (now - created) < thirtyDaysMs;\n    });\n\n    if (validSession) {\n      logStep(\"Found valid one-off payment (< 30 days)\", { sessionId: validSession.id });\n\n      // Calculate end date (Payment Date + 30 Days)\n      const paymentDate = new Date(validSession.created * 1000);\n      const endDate = new Date(paymentDate.getTime() + (30 * 24 * 60 * 60 * 1000));\n\n      // Best-effort DB update\n      if (dbClient) {\n        await dbClient\n          .from(\"subscriptions\")\n          .upsert(\n            {\n              user_id: userId,\n              status: \"active\",\n              stripe_customer_id: customerId,\n              stripe_subscription_id: null,\n              product_id: \"monthly_access_pix\",\n              current_period_end: endDate.toISOString(),\n            },\n            { onConflict: \"user_id\" }\n          );\n      }\n\n      return new Response(JSON.stringify({\n        subscribed: true,\n        product_id: \"monthly_access_pix\",\n        subscription_end: endDate.toISOString()\n      }), {\n        headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n        status: 200,\n      });\n    }\n\n    logStep(\"No active subscription or one-off payment found\");\n\n    // Best-effort DB update (only if service role key is available)\n    if (dbClient) {\n      await dbClient\n        .from(\"subscriptions\")\n        .upsert(\n          {\n            user_id: userId,\n            status: \"inactive\",\n            stripe_customer_id: customerId,\n            stripe_subscription_id: null,\n            product_id: null,\n            current_period_end: null,\n          },\n          { onConflict: \"user_id\" }\n        );\n    }\n\n    return new Response(JSON.stringify({\n      subscribed: false,\n      product_id: null,\n      subscription_end: null\n    }), {\n      headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n      status: 200,\n    });\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : String(error);\n    logStep(\"ERROR in check-subscription\", { message: errorMessage });\n    return new Response(JSON.stringify({ error: GENERIC_ERRORS.serviceError }), {\n      headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n      status: 500,\n    });\n  }\n});\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\supabase\\functions\\create-checkout\\index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[391,394],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[391,394],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { serve } from \"https://deno.land/std@0.190.0/http/server.ts\";\nimport Stripe from \"https://esm.sh/stripe@18.5.0\";\nimport { createClient } from \"https://esm.sh/@supabase/supabase-js@2.57.2\";\n\nconst corsHeaders = {\n  \"Access-Control-Allow-Origin\": \"*\",\n  \"Access-Control-Allow-Headers\": \"authorization, x-client-info, apikey, content-type\",\n};\n\nconst logStep = (step: string, details?: any) => {\n  const detailsStr = details ? ` - ${JSON.stringify(details)}` : '';\n  console.log(`[CREATE-CHECKOUT] ${step}${detailsStr}`);\n};\n\n// Generic error messages for clients (security best practice)\nconst GENERIC_ERRORS = {\n  unauthorized: \"Unauthorized\",\n  serviceError: \"Service temporarily unavailable\",\n  configError: \"Service configuration error\",\n};\n\n// Price ID for the monthly subscription - R$ 29,00/month\nconst PRICE_ID = \"price_1SvPypLXUoWoiE4T9zd9mbfR\";\n\nserve(async (req) => {\n  if (req.method === \"OPTIONS\") {\n    return new Response(null, { headers: corsHeaders });\n  }\n\n  const supabaseClient = createClient(\n    Deno.env.get(\"SUPABASE_URL\") ?? \"\",\n    Deno.env.get(\"SUPABASE_ANON_KEY\") ?? \"\"\n  );\n\n  try {\n    logStep(\"Function started\");\n\n    const stripeKey = Deno.env.get(\"STRIPE_SECRET_KEY\");\n    if (!stripeKey) {\n      logStep(\"ERROR: STRIPE_SECRET_KEY not configured\");\n      return new Response(JSON.stringify({ error: GENERIC_ERRORS.configError }), {\n        headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n        status: 500,\n      });\n    }\n    logStep(\"Stripe key verified\");\n\n    const authHeader = req.headers.get(\"Authorization\");\n    if (!authHeader) {\n      logStep(\"ERROR: No authorization header provided\");\n      return new Response(JSON.stringify({ error: GENERIC_ERRORS.unauthorized }), {\n        headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n        status: 401,\n      });\n    }\n\n    const token = authHeader.replace(\"Bearer \", \"\");\n    const { data } = await supabaseClient.auth.getUser(token);\n    const user = data.user;\n    if (!user?.email) {\n      logStep(\"ERROR: User not authenticated or email not available\");\n      return new Response(JSON.stringify({ error: GENERIC_ERRORS.unauthorized }), {\n        headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n        status: 401,\n      });\n    }\n    logStep(\"User authenticated\", { userId: user.id, email: user.email });\n\n    const stripe = new Stripe(stripeKey, { apiVersion: \"2025-08-27.basil\" });\n\n    // Check if customer already exists\n    const customers = await stripe.customers.list({ email: user.email, limit: 1 });\n    let customerId;\n    if (customers.data.length > 0) {\n      customerId = customers.data[0].id;\n      logStep(\"Existing customer found\", { customerId });\n    } else {\n      logStep(\"No existing customer, will create new one\");\n    }\n\n    const origin = req.headers.get(\"origin\") || \"https://lovable.dev\";\n\n    // Get user name from metadata with fallbacks\n    const userName = user.user_metadata?.name ||\n      user.user_metadata?.full_name ||\n      user.email?.split('@')[0] ||\n      'usu√°rio';\n\n    const session = await stripe.checkout.sessions.create({\n      customer: customerId,\n      customer_email: customerId ? undefined : user.email,\n      line_items: [\n        {\n          price: PRICE_ID,\n          quantity: 1,\n        },\n      ],\n      mode: \"subscription\",\n      // 3-day free trial period\n      subscription_data: {\n        trial_period_days: 3,\n      },\n      // Redirect to /obrigado with email for tracking\n      success_url: `${origin}/obrigado?email=${encodeURIComponent(user.email || '')}&source=checkout`,\n      cancel_url: `${origin}/planos?canceled=true`,\n      metadata: {\n        user_id: user.id,\n      },\n      // Enable abandoned cart recovery\n      after_expiration: {\n        recovery: {\n          enabled: true,\n          allow_promotion_codes: true,\n        },\n      },\n      consent_collection: {\n        promotions: 'auto',\n      },\n      expires_at: Math.floor(Date.now() / 1000) + (30 * 60), // 30 minutes\n    });\n\n    logStep(\"Checkout session created\", { sessionId: session.id, url: session.url });\n\n    return new Response(JSON.stringify({ url: session.url }), {\n      headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n      status: 200,\n    });\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : String(error);\n    logStep(\"ERROR in create-checkout\", { message: errorMessage });\n    return new Response(JSON.stringify({ error: GENERIC_ERRORS.serviceError }), {\n      headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n      status: 500,\n    });\n  }\n});\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\supabase\\functions\\create-subscription\\index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":86,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3030,3033],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3030,3033],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { serve } from \"https://deno.land/std@0.190.0/http/server.ts\";\r\nimport Stripe from \"https://esm.sh/stripe@18.5.0\";\r\nimport { createClient } from \"https://esm.sh/@supabase/supabase-js@2.57.2\";\r\n\r\nconst corsHeaders = {\r\n    \"Access-Control-Allow-Origin\": \"*\",\r\n    \"Access-Control-Allow-Headers\": \"authorization, x-client-info, apikey, content-type\",\r\n};\r\n\r\n// Use the Product ID provided by the user\r\nconst PRODUCT_ID = \"prod_TkvaozfpkAcbpM\";\r\n\r\nserve(async (req) => {\r\n    if (req.method === \"OPTIONS\") {\r\n        return new Response(null, { headers: corsHeaders });\r\n    }\r\n\r\n    try {\r\n        const supabaseClient = createClient(\r\n            Deno.env.get(\"SUPABASE_URL\") ?? \"\",\r\n            Deno.env.get(\"SUPABASE_ANON_KEY\") ?? \"\"\r\n        );\r\n\r\n        const stripeKey = Deno.env.get(\"STRIPE_SECRET_KEY\");\r\n        if (!stripeKey) {\r\n            throw new Error(\"Backend Configuration Error: STRIPE_SECRET_KEY missing\");\r\n        }\r\n\r\n        const stripe = new Stripe(stripeKey, {\r\n            apiVersion: \"2025-08-27.basil\",\r\n        });\r\n\r\n        // 0. Resolve Price ID from Product ID\r\n        const prices = await stripe.prices.list({\r\n            product: PRODUCT_ID,\r\n            active: true,\r\n            limit: 1,\r\n            type: 'recurring'\r\n        });\r\n\r\n        const priceId = prices.data[0]?.id;\r\n        if (!priceId) {\r\n            console.error(\"No active recurring price found for product:\", PRODUCT_ID);\r\n            throw new Error(\"Plan configuration error: No active price found.\");\r\n        }\r\n\r\n        // Determine Origin for Return URL\r\n        const origin = req.headers.get(\"origin\") || \"https://canvaviagem.lovable.app\";\r\n\r\n        // 1. Create Embedded Checkout Session\r\n        // We don't need customer ID here, functionality (email collection) is handled by Stripe UI.\r\n        // If we have user ID, we can pass it in metadata.\r\n\r\n        // Check for Auth (optional, for metadata)\r\n        let userId = \"\";\r\n        const authHeader = req.headers.get(\"Authorization\");\r\n        if (authHeader) {\r\n            const { data: { user } } = await supabaseClient.auth.getUser(authHeader.replace(\"Bearer \", \"\"));\r\n            if (user) userId = user.id;\r\n        }\r\n\r\n        const session = await stripe.checkout.sessions.create({\r\n            ui_mode: 'embedded',\r\n            mode: 'subscription',\r\n            line_items: [\r\n                {\r\n                    price: priceId,\r\n                    quantity: 1,\r\n                },\r\n            ],\r\n            subscription_data: {\r\n                trial_period_days: 3,\r\n            },\r\n            return_url: `${origin}/sucesso?session_id={CHECKOUT_SESSION_ID}`,\r\n            metadata: userId ? { user_id: userId } : {},\r\n            allows_promotion_codes: true,\r\n        });\r\n\r\n        return new Response(\r\n            JSON.stringify({\r\n                clientSecret: session.client_secret\r\n            }),\r\n            { headers: { ...corsHeaders, \"Content-Type\": \"application/json\" } }\r\n        );\r\n\r\n    } catch (error: any) {\r\n        console.error(\"Error creating session:\", error);\r\n        return new Response(JSON.stringify({ error: error.message }), {\r\n            status: 400,\r\n            headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\r\n        });\r\n    }\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\supabase\\functions\\customer-portal\\index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[391,394],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[391,394],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { serve } from \"https://deno.land/std@0.190.0/http/server.ts\";\nimport Stripe from \"https://esm.sh/stripe@18.5.0\";\nimport { createClient } from \"https://esm.sh/@supabase/supabase-js@2.57.2\";\n\nconst corsHeaders = {\n  \"Access-Control-Allow-Origin\": \"*\",\n  \"Access-Control-Allow-Headers\": \"authorization, x-client-info, apikey, content-type\",\n};\n\nconst logStep = (step: string, details?: any) => {\n  const detailsStr = details ? ` - ${JSON.stringify(details)}` : '';\n  console.log(`[CUSTOMER-PORTAL] ${step}${detailsStr}`);\n};\n\n// Generic error messages for clients (security best practice)\nconst GENERIC_ERRORS = {\n  unauthorized: \"Unauthorized\",\n  serviceError: \"Service temporarily unavailable\",\n  configError: \"Service configuration error\",\n  notFound: \"Resource not found\",\n};\n\nserve(async (req) => {\n  if (req.method === \"OPTIONS\") {\n    return new Response(null, { headers: corsHeaders });\n  }\n\n  try {\n    logStep(\"Function started\");\n\n    const stripeKey = Deno.env.get(\"STRIPE_SECRET_KEY\");\n    if (!stripeKey) {\n      logStep(\"ERROR: STRIPE_SECRET_KEY not configured\");\n      return new Response(JSON.stringify({ error: GENERIC_ERRORS.configError }), {\n        headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n        status: 500,\n      });\n    }\n    logStep(\"Stripe key verified\");\n\n    const supabaseClient = createClient(\n      Deno.env.get(\"SUPABASE_URL\") ?? \"\",\n      Deno.env.get(\"SUPABASE_SERVICE_ROLE_KEY\") ?? \"\",\n      { auth: { persistSession: false } }\n    );\n\n    const authHeader = req.headers.get(\"Authorization\");\n    if (!authHeader) {\n      logStep(\"ERROR: No authorization header provided\");\n      return new Response(JSON.stringify({ error: GENERIC_ERRORS.unauthorized }), {\n        headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n        status: 401,\n      });\n    }\n    logStep(\"Authorization header found\");\n\n    const token = authHeader.replace(\"Bearer \", \"\");\n    const { data: userData, error: userError } = await supabaseClient.auth.getUser(token);\n    if (userError) {\n      logStep(\"Authentication error\", { error: userError.message });\n      return new Response(JSON.stringify({ error: GENERIC_ERRORS.unauthorized }), {\n        headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n        status: 401,\n      });\n    }\n    const user = userData.user;\n    if (!user?.email) {\n      logStep(\"ERROR: User not authenticated or email not available\");\n      return new Response(JSON.stringify({ error: GENERIC_ERRORS.unauthorized }), {\n        headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n        status: 401,\n      });\n    }\n    logStep(\"User authenticated\", { userId: user.id, email: user.email });\n\n    const stripe = new Stripe(stripeKey, { apiVersion: \"2025-08-27.basil\" });\n    const customers = await stripe.customers.list({ email: user.email, limit: 1 });\n    if (customers.data.length === 0) {\n      logStep(\"ERROR: No Stripe customer found for this user\");\n      return new Response(JSON.stringify({ error: GENERIC_ERRORS.notFound }), {\n        headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n        status: 404,\n      });\n    }\n    const customerId = customers.data[0].id;\n    logStep(\"Found Stripe customer\", { customerId });\n\n    const origin = req.headers.get(\"origin\") || \"https://lovable.dev\";\n    const portalSession = await stripe.billingPortal.sessions.create({\n      customer: customerId,\n      return_url: `${origin}/planos`,\n    });\n    logStep(\"Customer portal session created\", { sessionId: portalSession.id, url: portalSession.url });\n\n    return new Response(JSON.stringify({ url: portalSession.url }), {\n      headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n      status: 200,\n    });\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : String(error);\n    logStep(\"ERROR in customer-portal\", { message: errorMessage });\n    return new Response(JSON.stringify({ error: GENERIC_ERRORS.serviceError }), {\n      headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n      status: 500,\n    });\n  }\n});\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\supabase\\functions\\generate-magic-link-url\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\supabase\\functions\\generate-thumbnail\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\supabase\\functions\\match-captions-to-videos\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\supabase\\functions\\meta-conversions-api-es\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\supabase\\functions\\meta-conversions-api\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\supabase\\functions\\parse-content-file\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\supabase\\functions\\resend-webhook\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\supabase\\functions\\send-drip-campaign\\index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":159,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":159,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7345,7348],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7345,7348],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":186,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":186,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8232,8235],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8232,8235],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":212,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":212,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9125,9128],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9125,9128],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { serve } from \"https://deno.land/std@0.190.0/http/server.ts\";\nimport { createClient } from \"https://esm.sh/@supabase/supabase-js@2.57.2\";\nimport { Resend } from \"https://esm.sh/resend@2.0.0\";\n\nconst corsHeaders = {\n  \"Access-Control-Allow-Origin\": \"*\",\n  \"Access-Control-Allow-Headers\": \"authorization, x-client-info, apikey, content-type\",\n};\n\nconst logStep = (step: string, details?: Record<string, unknown>) => {\n  const detailsStr = details ? ` - ${JSON.stringify(details)}` : '';\n  console.log(`[DRIP-CAMPAIGN] ${step}${detailsStr}`);\n};\n\n// Security: HTML escape function to prevent HTML injection in email templates\nfunction escapeHtml(unsafe: string): string {\n  return unsafe\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#039;');\n}\n\n// ========== EMAIL TEMPLATES ==========\n\nconst getEmailTemplate = (content: string, ctaText: string, ctaLink: string) => `\n<!DOCTYPE html>\n<html lang=\"pt-BR\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Canva Viagem</title>\n</head>\n<body style=\"margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f8f9fa;\">\n  <div style=\"max-width: 600px; margin: 0 auto; background-color: #ffffff;\">\n    <!-- Header com Gradiente -->\n    <div style=\"background: linear-gradient(135deg, #7D2AE8 0%, #8B3DFF 50%, #00C4CC 100%); padding: 40px 30px; text-align: center;\">\n      <h1 style=\"color: #ffffff; margin: 0; font-size: 28px; font-weight: bold;\">‚úàÔ∏è Canva Viagem</h1>\n      <p style=\"color: rgba(255,255,255,0.9); margin: 10px 0 0 0; font-size: 14px;\">Sua plataforma de cria√ß√£o para agentes de viagem</p>\n    </div>\n    \n    <!-- Conte√∫do -->\n    <div style=\"padding: 40px 30px;\">\n      ${content}\n      \n      <!-- Bot√£o CTA -->\n      <div style=\"text-align: center; margin: 35px 0;\">\n        <a href=\"${ctaLink}\" style=\"display: inline-block; background: linear-gradient(135deg, #7D2AE8 0%, #8B3DFF 100%); color: #ffffff; text-decoration: none; padding: 16px 40px; border-radius: 50px; font-weight: bold; font-size: 16px; box-shadow: 0 4px 15px rgba(139, 61, 255, 0.3);\">\n          ${ctaText}\n        </a>\n      </div>\n    </div>\n    \n    <!-- Footer -->\n    <div style=\"background-color: #f8f9fa; padding: 30px; text-align: center; border-top: 1px solid #e9ecef;\">\n      <p style=\"color: #6c757d; font-size: 12px; margin: 0;\">\n        ¬© 2025 Canva Viagem - Rocha Digital M√≠dia<br>\n        <a href=\"https://canvatrip.lovable.app\" style=\"color: #8B3DFF; text-decoration: none;\">canvatrip.lovable.app</a>\n      </p>\n    </div>\n  </div>\n</body>\n</html>\n`;\n\nconst getEmail1Content = (name: string) => {\n  const safeName = escapeHtml(name);\n  return `\n  <h2 style=\"color: #1a1a2e; margin: 0 0 20px 0; font-size: 24px;\">Ol√°, ${safeName}! üëã</h2>\n  <p style=\"color: #4a4a4a; font-size: 16px; line-height: 1.7; margin: 0 0 20px 0;\">\n    Seja muito bem-vindo(a) ao <strong>CanvaTrip</strong>! √â uma alegria ter voc√™ aqui.\n  </p>\n  <p style=\"color: #4a4a4a; font-size: 16px; line-height: 1.7; margin: 0 0 20px 0;\">\n    Para come√ßar da melhor forma, preparei um <strong>tutorial exclusivo</strong> ensinando como usar nossa ferramenta e criar posts incr√≠veis para suas redes sociais.\n  </p>\n  \n  <div style=\"background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 16px; padding: 25px; margin: 25px 0;\">\n    <p style=\"color: #1a1a2e; font-size: 15px; margin: 0; line-height: 1.6;\">\n      üé• <strong>No v√≠deo voc√™ vai aprender:</strong><br><br>\n      ‚úÖ Como navegar pela plataforma<br>\n      ‚úÖ Como editar templates no Canva<br>\n      ‚úÖ Dicas para criar posts que vendem\n    </p>\n  </div>\n  \n  <p style=\"color: #4a4a4a; font-size: 16px; line-height: 1.7; margin: 20px 0;\">\n    Ap√≥s assistir, fa√ßa login na plataforma para criar seus primeiros posts!\n  </p>\n`;\n};\n\nconst getEmail2Content = (name: string) => {\n  const safeName = escapeHtml(name);\n  return `\n  <h2 style=\"color: #1a1a2e; margin: 0 0 20px 0; font-size: 24px;\">${safeName}, este √© seu pr√≥ximo passo! ‚úàÔ∏è</h2>\n  <p style=\"color: #4a4a4a; font-size: 16px; line-height: 1.7; margin: 0 0 20px 0;\">\n    Voc√™ j√° est√° usando o CanvaTrip h√° alguns dias. Parab√©ns por dar esse passo!\n  </p>\n  <p style=\"color: #4a4a4a; font-size: 16px; line-height: 1.7; margin: 0 0 20px 0;\">\n    Mas deixa eu te perguntar: <strong>voc√™ est√° realmente vendendo viagens com suas redes sociais?</strong>\n  </p>\n  <p style=\"color: #4a4a4a; font-size: 16px; line-height: 1.7; margin: 0 0 25px 0;\">\n    Criei o curso <strong>Agente Lucrativo</strong> para agentes que querem ir al√©m dos posts bonitos e realmente <strong>faturar alto</strong> no turismo.\n  </p>\n  \n  <div style=\"background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 16px; padding: 25px; margin: 25px 0;\">\n    <p style=\"color: #1a1a2e; font-size: 15px; margin: 0 0 15px 0; font-weight: bold;\">\n      üìö O que voc√™ vai aprender:\n    </p>\n    <p style=\"color: #4a4a4a; font-size: 15px; margin: 0; line-height: 1.8;\">\n      üé¨ <strong>Edi√ß√£o de V√≠deo</strong> - Crie Reels e Stories que viralizam<br>\n      üì¢ <strong>Tr√°fego Pago para Viagens</strong> - An√∫ncios que trazem clientes<br>\n      üì± <strong>Automa√ß√£o de WhatsApp</strong> - Atenda mais sem perder qualidade<br>\n      üí∞ <strong>Vendas no X1</strong> - Feche mais pacotes pelo WhatsApp\n    </p>\n  </div>\n  \n  <p style=\"color: #4a4a4a; font-size: 16px; line-height: 1.7; margin: 20px 0;\">\n    N√£o fique s√≥ na cria√ß√£o de posts. <strong>Aprenda a vender de verdade!</strong>\n  </p>\n`;\n};\n\nconst getEmail3Content = (name: string) => {\n  const safeName = escapeHtml(name);\n  return `\n  <h2 style=\"color: #1a1a2e; margin: 0 0 20px 0; font-size: 24px;\">√öltima chance, ${safeName}! üöÄ</h2>\n  <p style=\"color: #4a4a4a; font-size: 16px; line-height: 1.7; margin: 0 0 20px 0;\">\n    J√° faz 5 dias que voc√™ est√° no CanvaTrip. E eu preciso ser sincero com voc√™:\n  </p>\n  <p style=\"color: #4a4a4a; font-size: 16px; line-height: 1.7; margin: 0 0 20px 0;\">\n    <strong>Posts bonitos n√£o pagam suas contas.</strong> Vendas sim.\n  </p>\n  <p style=\"color: #4a4a4a; font-size: 16px; line-height: 1.7; margin: 0 0 25px 0;\">\n    O mercado de turismo est√° mais competitivo do que nunca. Quem n√£o se profissionaliza, fica para tr√°s.\n  </p>\n  \n  <div style=\"background: linear-gradient(135deg, #7D2AE8 0%, #8B3DFF 100%); border-radius: 16px; padding: 25px; margin: 25px 0;\">\n    <p style=\"color: #ffffff; font-size: 16px; margin: 0; line-height: 1.7; text-align: center;\">\n      ‚ö° <strong>O Agente Lucrativo</strong> j√° transformou a vida de centenas de agentes de viagem.<br><br>\n      Edi√ß√£o de V√≠deo + Tr√°fego Pago + WhatsApp + Vendas X1<br><br>\n      <strong>Tudo o que voc√™ precisa para dominar o mercado.</strong>\n    </p>\n  </div>\n  \n  <p style=\"color: #4a4a4a; font-size: 16px; line-height: 1.7; margin: 20px 0;\">\n    Esta √© minha √∫ltima mensagem sobre isso. A decis√£o √© sua.\n  </p>\n  <p style=\"color: #4a4a4a; font-size: 16px; line-height: 1.7; margin: 20px 0;\">\n    <strong>Voc√™ quer continuar no mesmo lugar ou quer ser um Agente Lucrativo?</strong>\n  </p>\n`;\n};\n\n// ========== SEND FUNCTIONS ==========\n\n// deno-lint-ignore no-explicit-any\nasync function sendEmail1(resend: Resend, email: string, name: string, supabase: any) {\n  const content = getEmail1Content(name);\n  const html = getEmailTemplate(content, \"üé• Assistir V√≠deo Aula\", \"https://youtu.be/1Or9QJPn6OA\");\n  \n  const result = await resend.emails.send({\n    from: \"Canva Viagem <lucas@rochadigitalmidia.com.br>\",\n    to: [email],\n    subject: \"Bem-vindo! Acesse seu Tutorial üé•\",\n    html,\n  });\n  \n  // Salvar evento 'sent' na tabela email_events\n  if (result.data?.id) {\n    const { error } = await supabase.from(\"email_events\").insert({\n      email_id: result.data.id,\n      type: \"sent\",\n      recipient_email: email,\n      email_type: \"email_1\",\n    });\n    if (error) logStep(\"Email event insert error\", { error: error.message });\n  }\n  \n  logStep(\"Email 1 sent\", { email, emailId: result.data?.id });\n  return result;\n}\n\n// deno-lint-ignore no-explicit-any\nasync function sendEmail2(resend: Resend, email: string, name: string, supabase: any) {\n  const content = getEmail2Content(name);\n  const html = getEmailTemplate(content, \"‚úàÔ∏è Conhecer o Curso Agente Lucrativo\", \"https://rochadigitalmidia.com.br/agente-lucrativo/\");\n  \n  const result = await resend.emails.send({\n    from: \"Canva Viagem <lucas@rochadigitalmidia.com.br>\",\n    to: [email],\n    subject: \"Este √© seu pr√≥ximo passo para vender mais viagens ‚úàÔ∏è\",\n    html,\n  });\n  \n  if (result.data?.id) {\n    const { error } = await supabase.from(\"email_events\").insert({\n      email_id: result.data.id,\n      type: \"sent\",\n      recipient_email: email,\n      email_type: \"email_2\",\n    });\n    if (error) logStep(\"Email event insert error\", { error: error.message });\n  }\n  \n  logStep(\"Email 2 sent\", { email, emailId: result.data?.id });\n  return result;\n}\n\n// deno-lint-ignore no-explicit-any\nasync function sendEmail3(resend: Resend, email: string, name: string, supabase: any) {\n  const content = getEmail3Content(name);\n  const html = getEmailTemplate(content, \"üöÄ Quero Ser Um Agente Lucrativo\", \"https://rochadigitalmidia.com.br/agente-lucrativo/\");\n  \n  const result = await resend.emails.send({\n    from: \"Canva Viagem <lucas@rochadigitalmidia.com.br>\",\n    to: [email],\n    subject: \"√öltima chance: Domine o mercado de turismo üöÄ\",\n    html,\n  });\n  \n  if (result.data?.id) {\n    const { error } = await supabase.from(\"email_events\").insert({\n      email_id: result.data.id,\n      type: \"sent\",\n      recipient_email: email,\n      email_type: \"email_3\",\n    });\n    if (error) logStep(\"Email event insert error\", { error: error.message });\n  }\n  \n  logStep(\"Email 3 sent\", { email, emailId: result.data?.id });\n  return result;\n}\n\n// ========== MAIN HANDLER ==========\n\nserve(async (req) => {\n  if (req.method === \"OPTIONS\") {\n    return new Response(null, { headers: corsHeaders });\n  }\n\n  const resendKey = Deno.env.get(\"RESEND_API_KEY\");\n  const supabaseUrl = Deno.env.get(\"SUPABASE_URL\") ?? \"\";\n  const supabaseServiceKey = Deno.env.get(\"SUPABASE_SERVICE_ROLE_KEY\") ?? \"\";\n\n  if (!resendKey) {\n    logStep(\"ERROR: RESEND_API_KEY not configured\");\n    return new Response(JSON.stringify({ error: \"Configuration error\" }), {\n      headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n      status: 500,\n    });\n  }\n\n  if (!supabaseServiceKey) {\n    logStep(\"ERROR: SUPABASE_SERVICE_ROLE_KEY not configured\");\n    return new Response(JSON.stringify({ error: \"Configuration error\" }), {\n      headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n      status: 500,\n    });\n  }\n\n  const resend = new Resend(resendKey);\n  const supabase = createClient(supabaseUrl, supabaseServiceKey, {\n    auth: { autoRefreshToken: false, persistSession: false },\n  });\n\n  try {\n    const now = new Date();\n    const threeDaysAgo = new Date(now.getTime() - 3 * 24 * 60 * 60 * 1000);\n    const fiveDaysAgo = new Date(now.getTime() - 5 * 24 * 60 * 60 * 1000);\n\n    logStep(\"Starting drip campaign\", { \n      now: now.toISOString(), \n      threeDaysAgo: threeDaysAgo.toISOString(),\n      fiveDaysAgo: fiveDaysAgo.toISOString() \n    });\n\n    // Buscar usu√°rios com emails pendentes (n√£o unsubscribed)\n    const { data: users, error } = await supabase\n      .from(\"user_email_automations\")\n      .select(\"*\")\n      .eq(\"unsubscribed\", false)\n      .or(\"email_1_sent_at.is.null,email_2_sent_at.is.null,email_3_sent_at.is.null\");\n\n    if (error) {\n      logStep(\"Database error\", { error: error.message });\n      throw error;\n    }\n\n    logStep(\"Users to process\", { count: users?.length ?? 0 });\n\n    const emailsSent = { email1: 0, email2: 0, email3: 0, errors: 0 };\n\n    for (const user of users ?? []) {\n      const userName = user.name || user.email.split(\"@\")[0];\n      const createdAt = new Date(user.created_at);\n\n      try {\n        // EMAIL 1: Boas-vindas (imediato - enviado assim que cadastra)\n        if (!user.email_1_sent_at) {\n          await sendEmail1(resend, user.email, userName, supabase);\n          await supabase\n            .from(\"user_email_automations\")\n            .update({ email_1_sent_at: now.toISOString() })\n            .eq(\"id\", user.id);\n          emailsSent.email1++;\n          continue; // S√≥ envia 1 email por execu√ß√£o por usu√°rio\n        }\n\n        // EMAIL 2: Curso Agente Lucrativo (3 dias depois do cadastro)\n        if (!user.email_2_sent_at && createdAt < threeDaysAgo) {\n          await sendEmail2(resend, user.email, userName, supabase);\n          await supabase\n            .from(\"user_email_automations\")\n            .update({ email_2_sent_at: now.toISOString() })\n            .eq(\"id\", user.id);\n          emailsSent.email2++;\n          continue;\n        }\n\n        // EMAIL 3: Oferta Final (5 dias depois do cadastro)\n        if (!user.email_3_sent_at && createdAt < fiveDaysAgo) {\n          await sendEmail3(resend, user.email, userName, supabase);\n          await supabase\n            .from(\"user_email_automations\")\n            .update({ email_3_sent_at: now.toISOString() })\n            .eq(\"id\", user.id);\n          emailsSent.email3++;\n        }\n      } catch (userError) {\n        logStep(\"Error processing user\", { \n          userId: user.id, \n          email: user.email,\n          error: userError instanceof Error ? userError.message : String(userError)\n        });\n        emailsSent.errors++;\n      }\n    }\n\n    logStep(\"Campaign completed successfully\", emailsSent);\n\n    return new Response(JSON.stringify({ success: true, ...emailsSent }), {\n      headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n      status: 200,\n    });\n  } catch (error) {\n    const msg = error instanceof Error ? error.message : String(error);\n    logStep(\"FATAL ERROR\", { message: msg });\n    return new Response(JSON.stringify({ error: \"Internal server error\" }), {\n      headers: { ...corsHeaders, \"Content-Type\": \"application/json\" },\n      status: 500,\n    });\n  }\n});\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\supabase\\functions\\send-magic-link\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\supabase\\functions\\stripe-dashboard\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\supabase\\functions\\stripe-webhook\\index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[455,458],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[455,458],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1726,1729],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1726,1729],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2334,2337],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2334,2337],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2350,2353],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2350,2353],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":77,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2721,2724],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2721,2724],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":97,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3303,3306],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3303,3306],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":206,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":206,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7676,7679],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7676,7679],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":212,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":212,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7967,7970],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7967,7970],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":212,"column":97,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":212,"endColumn":100,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7980,7983],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7980,7983],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":225,"column":87,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":225,"endColumn":90,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8720,8723],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8720,8723],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":230,"column":87,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":230,"endColumn":90,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8968,8971],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8968,8971],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":241,"column":87,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":241,"endColumn":90,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9709,9712],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9709,9712],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":241,"column":100,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":241,"endColumn":103,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9722,9725],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9722,9725],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":249,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":249,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10367,10370],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10367,10370],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":249,"column":87,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":249,"endColumn":90,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10380,10383],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10380,10383],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":275,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":275,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11744,11747],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11744,11747],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":275,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":275,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11757,11760],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11757,11760],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":283,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":283,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12408,12411],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12408,12411],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":283,"column":95,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":283,"endColumn":98,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12421,12424],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12421,12424],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":292,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":292,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12863,12866],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12863,12866],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":314,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":314,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14168,14171],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14168,14171],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":319,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":319,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14313,14316],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14313,14316],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":342,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":342,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15204,15207],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15204,15207],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":345,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":345,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15322,15325],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15322,15325],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":354,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":354,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15801,15804],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15801,15804],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":357,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":357,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15915,15918],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15915,15918],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":366,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":366,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16405,16408],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16405,16408],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":369,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":369,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16512,16515],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16512,16515],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":378,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":378,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16996,16999],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16996,16999],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":29,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { serve } from \"https://deno.land/std@0.190.0/http/server.ts\";\r\nimport Stripe from \"https://esm.sh/stripe@18.5.0\";\r\nimport { createClient } from \"https://esm.sh/@supabase/supabase-js@2.57.2\";\r\nimport { Resend } from \"https://esm.sh/resend@2.0.0\";\r\n\r\nconst corsHeaders = {\r\n  \"Access-Control-Allow-Origin\": \"*\",\r\n  \"Access-Control-Allow-Headers\": \"authorization, x-client-info, apikey, content-type\",\r\n};\r\n\r\nconst logStep = (step: string, details?: any) => {\r\n  const detailsStr = details ? ` - ${JSON.stringify(details)}` : '';\r\n  console.log(`[STRIPE-WEBHOOK] ${step}${detailsStr}`);\r\n};\r\n\r\n// Redact email for logging\r\nfunction redactEmail(email: string | null | undefined): string {\r\n  if (!email || typeof email !== 'string') return '[no-email]';\r\n  const parts = email.split('@');\r\n  if (parts.length !== 2) return '[invalid-email]';\r\n  const redacted = parts[0].length > 2 ? parts[0].substring(0, 2) + '***' : '***';\r\n  return `${redacted}@${parts[1]}`;\r\n}\r\n\r\nconst GENERIC_ERRORS = {\r\n  badRequest: \"Bad request\",\r\n  serviceError: \"Service temporarily unavailable\",\r\n  configError: \"Service configuration error\",\r\n};\r\n\r\nfunction isValidEmail(email: string | null | undefined): email is string {\r\n  if (!email || typeof email !== 'string') return false;\r\n  const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\r\n  return emailRegex.test(email) && email.length <= 254;\r\n}\r\n\r\n// ZAIA WEBHOOK HELPER\r\nasync function triggerZaiaWebhook(webhookEnvVar: string, data: { email: string; name?: string; phone?: string }) {\r\n  const webhookUrl = Deno.env.get(webhookEnvVar);\r\n  if (!webhookUrl) {\r\n    logStep(`ZAIA webhook not configured: ${webhookEnvVar}`);\r\n    return;\r\n  }\r\n  try {\r\n    const payload: any = {\r\n      email: data.email,\r\n      name: data.name || data.email.split(\"@\")[0],\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n    if (data.phone) payload.phone = data.phone;\r\n\r\n    await fetch(webhookUrl, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(payload),\r\n    });\r\n    logStep(`ZAIA webhook triggered: ${webhookEnvVar}`);\r\n  } catch (error) {\r\n    logStep(`ERROR triggering ZAIA webhook: ${webhookEnvVar}`, { error: String(error) });\r\n  }\r\n}\r\n\r\n// SHARED ONBOARDING LOGIC\r\nasync function ensureUserAndOnboarding(\r\n  supabase: any,\r\n  resend: any,\r\n  email: string,\r\n  name: string | undefined,\r\n  stripeCustomerId: string,\r\n  stripeSubscriptionId: string,\r\n  phone: string | null\r\n) {\r\n  logStep(\"Starting onboarding for\", { email: redactEmail(email) });\r\n\r\n  // 1. Check/Create User\r\n  const { data: existingUsers } = await supabase.auth.admin.listUsers();\r\n  const existingUser = existingUsers?.users?.find((u: any) => u.email === email);\r\n  let userId: string;\r\n\r\n  if (existingUser) {\r\n    logStep(\"Existing user found\", { userId: existingUser.id });\r\n    userId = existingUser.id;\r\n  } else {\r\n    const { data: newUser, error: createError } = await supabase.auth.admin.createUser({\r\n      email,\r\n      email_confirm: true,\r\n    });\r\n    if (createError) {\r\n      logStep(\"ERROR: Failed to create user\", { error: createError.message });\r\n      return;\r\n    }\r\n    userId = newUser.user.id;\r\n    logStep(\"New user created\", { userId });\r\n  }\r\n\r\n  // 2. Upsert Profile\r\n  const profileData: any = {\r\n    user_id: userId,\r\n    email,\r\n    name: name || email.split('@')[0],\r\n    stripe_customer_id: stripeCustomerId,\r\n    updated_at: new Date().toISOString(),\r\n  };\r\n  if (phone) profileData.phone = phone;\r\n\r\n  const { error: profileError } = await supabase.from(\"profiles\").upsert(profileData, { onConflict: \"user_id\" });\r\n  if (profileError) logStep(\"ERROR: Failed to upsert profile\", { error: profileError.message });\r\n\r\n  // 3. Upsert Subscription\r\n  const { error: subError } = await supabase.from(\"subscriptions\").upsert({\r\n    user_id: userId,\r\n    stripe_customer_id: stripeCustomerId,\r\n    stripe_subscription_id: stripeSubscriptionId,\r\n    status: \"active\",\r\n    product_id: \"prod_TkvaozfpkAcbpM\",\r\n    updated_at: new Date().toISOString(),\r\n  }, { onConflict: \"user_id\" });\r\n\r\n  if (subError) logStep(\"ERROR: Failed to upsert subscription\", { error: subError.message });\r\n\r\n  // 4. Send Magic Link & Welcome Email\r\n  if (resend) {\r\n    const siteUrl = Deno.env.get(\"SITE_URL\") || \"https://canvaviagem.lovable.app\";\r\n    const token = crypto.randomUUID();\r\n    const expiresAt = new Date(Date.now() + 60 * 60 * 1000); // 1 hour\r\n\r\n    const { error: tokenError } = await supabase.from(\"magic_link_tokens\").insert({\r\n      email: email.toLowerCase().trim(),\r\n      token,\r\n      expires_at: expiresAt.toISOString(),\r\n      name: name,\r\n      phone: phone,\r\n    });\r\n\r\n    if (tokenError) {\r\n      logStep(\"ERROR: Failed to create magic link token\", { error: tokenError.message });\r\n    } else {\r\n      const magicLink = `${siteUrl}/auth/verify?token=${token}`;\r\n      await sendAutoMagicLinkEmail(resend, email, magicLink, name || \"Visitante\");\r\n      logStep(\"Magic link sent automatically\", { email: redactEmail(email) });\r\n    }\r\n\r\n    await sendWelcomeEmail(resend, email);\r\n  }\r\n\r\n  // 5. Trigger Zaia Welcome\r\n  await triggerZaiaWebhook(\"ZAIA_WEBHOOK_WELCOME\", {\r\n    email,\r\n    name: name,\r\n    phone: phone || undefined\r\n  });\r\n}\r\n\r\nserve(async (req) => {\r\n  if (req.method === \"OPTIONS\") return new Response(null, { headers: corsHeaders });\r\n\r\n  const stripeKey = Deno.env.get(\"STRIPE_SECRET_KEY\");\r\n  const webhookSecret = Deno.env.get(\"STRIPE_WEBHOOK_SECRET\");\r\n  const resendKey = Deno.env.get(\"RESEND_API_KEY\") || Deno.env.get(\"resend\");\r\n  const supabaseUrl = Deno.env.get(\"SUPABASE_URL\") ?? \"\";\r\n  const supabaseServiceKey = Deno.env.get(\"SUPABASE_SERVICE_ROLE_KEY\") ?? \"\";\r\n\r\n  if (!stripeKey || !webhookSecret) {\r\n    return new Response(JSON.stringify({ error: GENERIC_ERRORS.configError }), { status: 500, headers: corsHeaders });\r\n  }\r\n\r\n  const stripe = new Stripe(stripeKey, { apiVersion: \"2025-08-27.basil\" });\r\n  const resend = resendKey ? new Resend(resendKey) : null;\r\n  const supabaseAdmin = createClient(supabaseUrl, supabaseServiceKey, { auth: { autoRefreshToken: false, persistSession: false } });\r\n\r\n  try {\r\n    const body = await req.text();\r\n    const signature = req.headers.get(\"stripe-signature\");\r\n    if (!signature) throw new Error(\"No signature\");\r\n\r\n    const event = await stripe.webhooks.constructEventAsync(body, signature, webhookSecret);\r\n    logStep(\"Event received\", { type: event.type, id: event.id });\r\n\r\n    switch (event.type) {\r\n      case \"checkout.session.completed\":\r\n        await handleCheckoutCompleted(event.data.object, supabaseAdmin, resend);\r\n        break;\r\n      case \"customer.subscription.created\":\r\n        await handleSubscriptionCreated(event.data.object, supabaseAdmin);\r\n        break;\r\n      case \"customer.subscription.updated\":\r\n        await handleSubscriptionUpdated(event.data.object, supabaseAdmin);\r\n        break;\r\n      case \"customer.subscription.deleted\":\r\n        await handleSubscriptionDeleted(event.data.object, supabaseAdmin, resend);\r\n        break;\r\n      case \"invoice.payment_succeeded\":\r\n        await handlePaymentSucceeded(event.data.object, supabaseAdmin, resend);\r\n        break;\r\n      case \"invoice.payment_failed\":\r\n        await handlePaymentFailed(event.data.object, supabaseAdmin, resend);\r\n        break;\r\n      case \"checkout.session.expired\":\r\n        await handleCheckoutExpired(event.data.object, supabaseAdmin, resend);\r\n        break;\r\n      default:\r\n        logStep(\"Unhandled event type\", { type: event.type });\r\n    }\r\n\r\n    return new Response(JSON.stringify({ received: true }), { headers: corsHeaders, status: 200 });\r\n  } catch (err: any) {\r\n    logStep(\"ERROR in stripe-webhook\", { message: err.message });\r\n    return new Response(JSON.stringify({ error: GENERIC_ERRORS.serviceError }), { headers: corsHeaders, status: 500 });\r\n  }\r\n});\r\n\r\nasync function handleCheckoutCompleted(session: Stripe.Checkout.Session, supabase: any, resend: any) {\r\n  logStep(\"Processing checkout.session.completed\", { sessionId: session.id });\r\n  const email = session.customer_email || session.customer_details?.email;\r\n  if (!isValidEmail(email)) return;\r\n\r\n  const customerName = session.customer_details?.name || email.split(\"@\")[0];\r\n  const customerPhone = session.customer_details?.phone ? session.customer_details.phone.replace(/\\D/g, '') : null;\r\n  const stripeCustomerId = session.customer as string;\r\n  const stripeSubscriptionId = session.subscription as string;\r\n\r\n  await ensureUserAndOnboarding(supabase, resend, email, customerName, stripeCustomerId, stripeSubscriptionId, customerPhone);\r\n}\r\n\r\nasync function handleSubscriptionCreated(subscription: Stripe.Subscription, supabase: any) {\r\n  // Only needed if we want to track 'incomplete' subs\r\n  logStep(\"Processing customer.subscription.created\", { subscriptionId: subscription.id });\r\n}\r\n\r\nasync function handleSubscriptionUpdated(subscription: Stripe.Subscription, supabase: any) {\r\n  logStep(\"Processing customer.subscription.updated\", { subscriptionId: subscription.id });\r\n  const stripeCustomerId = subscription.customer as string;\r\n  const { error } = await supabase.from(\"subscriptions\").update({\r\n    status: subscription.status === \"active\" || subscription.status === \"trialing\" ? \"active\" : subscription.status,\r\n    current_period_end: subscription.current_period_end ? new Date(subscription.current_period_end * 1000).toISOString() : null,\r\n    updated_at: new Date().toISOString(),\r\n  }).eq(\"stripe_customer_id\", stripeCustomerId);\r\n  if (error) logStep(\"ERROR updating subscription\", { error: error.message });\r\n}\r\n\r\nasync function handleSubscriptionDeleted(subscription: Stripe.Subscription, supabase: any, resend: any) {\r\n  const stripeCustomerId = subscription.customer as string;\r\n  const { data: profile } = await supabase.from(\"profiles\").select(\"email, name\").eq(\"stripe_customer_id\", stripeCustomerId).single();\r\n  await supabase.from(\"subscriptions\").update({ status: \"canceled\", updated_at: new Date().toISOString() }).eq(\"stripe_customer_id\", stripeCustomerId);\r\n  if (resend && profile?.email) await sendCancellationEmail(resend, profile.email);\r\n  if (profile?.email) await triggerZaiaWebhook(\"ZAIA_WEBHOOK_CANCELLATION\", { email: profile.email, name: profile.name });\r\n}\r\n\r\nasync function handlePaymentSucceeded(invoice: Stripe.Invoice, supabase: any, resend: any) {\r\n  logStep(\"Processing invoice.payment_succeeded\", { invoiceId: invoice.id });\r\n  const stripeCustomerId = invoice.customer as string;\r\n\r\n  // Check if this is the first payment (Subscription Creation)\r\n  if (invoice.billing_reason === 'subscription_create') {\r\n    const email = invoice.customer_email || invoice.customer_name; // Fallback? invoice.customer_email should be set.\r\n    if (isValidEmail(email)) {\r\n      const customerName = invoice.customer_name || email.split(\"@\")[0];\r\n      const subscriptionId = invoice.subscription as string;\r\n      // NOTE: Invoice doesn't have phone. \r\n      await ensureUserAndOnboarding(supabase, resend, email, customerName, stripeCustomerId, subscriptionId, null);\r\n      return; // ensureUserAndOnboarding also upserts subscription, so we can return or continue. \r\n      // But standard logic below updates status too. It's fine to duplicate update.\r\n    } else {\r\n      logStep(\"No email in invoice for subscription_create\", { invoiceId: invoice.id });\r\n    }\r\n  }\r\n\r\n  const { error } = await supabase.from(\"subscriptions\").update({\r\n    status: \"active\",\r\n    updated_at: new Date().toISOString(),\r\n  }).eq(\"stripe_customer_id\", stripeCustomerId);\r\n  if (error) logStep(\"ERROR reactivating subscription\", { error: error.message });\r\n}\r\n\r\nasync function handlePaymentFailed(invoice: Stripe.Invoice, supabase: any, resend: any) {\r\n  const stripeCustomerId = invoice.customer as string;\r\n  const { data: profile } = await supabase.from(\"profiles\").select(\"email, name\").eq(\"stripe_customer_id\", stripeCustomerId).single();\r\n  await supabase.from(\"subscriptions\").update({ status: \"past_due\", updated_at: new Date().toISOString() }).eq(\"stripe_customer_id\", stripeCustomerId);\r\n  if (resend && profile?.email) await sendPaymentFailedEmail(resend, profile.email);\r\n  if (profile?.email) await triggerZaiaWebhook(\"ZAIA_WEBHOOK_PAYMENT_FAILED\", { email: profile.email, name: profile.name });\r\n}\r\n\r\nasync function handleCheckoutExpired(session: Stripe.Checkout.Session, supabase: any, resend: any) {\r\n  const email = session.customer_details?.email || session.customer_email;\r\n  if (!isValidEmail(email)) return;\r\n  await supabase.from(\"abandoned_checkouts\").insert({ email, session_id: session.id, amount: session.amount_total });\r\n  if (resend) await sendRecoveryEmail(resend, email);\r\n  await triggerZaiaWebhook(\"ZAIA_WEBHOOK_RECOVERY\", { email });\r\n}\r\n\r\n// EMAIL TEMPLATES (Restored)\r\nasync function sendAutoMagicLinkEmail(resend: any, email: string, magicLink: string, customerName: string) {\r\n  try {\r\n    await resend.emails.send({\r\n      from: Deno.env.get(\"RESEND_FROM_EMAIL\") || \"Canva Viagem <lucas@rochadigitalmidia.com.br>\",\r\n      to: [email],\r\n      subject: \"üîê Seu Link de Acesso - Canva Viagem\",\r\n      html: `\r\n        <!DOCTYPE html>\r\n        <html lang=\"pt-BR\">\r\n        <head><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>Seu Link de Acesso</title></head>\r\n        <body style=\"margin: 0; padding: 0; font-family: sans-serif; background: #667eea;\">\r\n          <div style=\"background: white; max-width: 600px; margin: 40px auto; padding: 20px; text-align: center; border-radius: 10px;\">\r\n             <h1>Ol√°, ${customerName}!</h1>\r\n             <p>Seu pagamento foi confirmado! Clique abaixo para acessar:</p>\r\n             <a href=\"${magicLink}\" style=\"background: #667eea; color: white; padding: 15px 30px; text-decoration: none; border-radius: 5px; display: inline-block;\">Acessar Minha Conta</a>\r\n             <p style=\"margin-top: 20px; font-size: 12px; color: #888;\">Link expira em 1 hora.</p>\r\n          </div>\r\n        </body>\r\n        </html>\r\n      `,\r\n    });\r\n    logStep(\"Auto magic link email sent\", { email: redactEmail(email) });\r\n  } catch (error: any) {\r\n    logStep(\"ERROR: Failed to send auto magic link email\", { error: error.message });\r\n  }\r\n}\r\n\r\nasync function sendWelcomeEmail(resend: any, email: string) {\r\n  const appUrl = Deno.env.get(\"APP_URL\") || \"https://canvatrip.lovable.app\";\r\n  try {\r\n    await resend.emails.send({\r\n      from: Deno.env.get(\"RESEND_FROM_EMAIL\") || \"Canva Viagem <lucas@rochadigitalmidia.com.br>\",\r\n      to: [email],\r\n      subject: \"üöÄ Bem-vindo ao Canva Viagens!\",\r\n      html: `\r\n        <!DOCTYPE html>\r\n        <html><body>\r\n          <div style=\"font-family: sans-serif; max-width: 600px; margin: auto; padding: 20px;\">\r\n             <h1>Bem-vindo ao Canva Viagens! üå¥</h1>\r\n             <p>Voc√™ agora tem acesso a:</p>\r\n             <ul>\r\n               <li>V√≠deos Reels Virais</li>\r\n               <li>Rob√¥s de IA</li>\r\n               <li>Templates Edit√°veis</li>\r\n             </ul>\r\n             <p>Acesse agora: <a href=\"${appUrl}/planos\">${appUrl}</a></p>\r\n          </div>\r\n        </body></html>\r\n      `,\r\n    });\r\n  } catch (error: any) { logStep(\"ERROR welcome email\", { error: error.message }); }\r\n}\r\n\r\nasync function sendCancellationEmail(resend: any, email: string) {\r\n  const appUrl = Deno.env.get(\"APP_URL\") || \"https://canvatrip.lovable.app\";\r\n  try {\r\n    await resend.emails.send({\r\n      from: Deno.env.get(\"RESEND_FROM_EMAIL\") || \"Canva Viagem <lucas@rochadigitalmidia.com.br>\",\r\n      to: [email],\r\n      subject: \"üíî Sentiremos sua falta\",\r\n      html: `<html><body><h1>Sua assinatura foi cancelada.</h1><p>Esperamos te ver em breve.</p><a href=\"${appUrl}/planos\">Reativar</a></body></html>`\r\n    });\r\n  } catch (e: any) { logStep(\"ERROR cancel email\", { error: e.message }); }\r\n}\r\n\r\nasync function sendPaymentFailedEmail(resend: any, email: string) {\r\n  const appUrl = Deno.env.get(\"APP_URL\") || \"https://canvatrip.lovable.app\";\r\n  try {\r\n    await resend.emails.send({\r\n      from: Deno.env.get(\"RESEND_FROM_EMAIL\") || \"Canva Viagem <lucas@rochadigitalmidia.com.br>\",\r\n      to: [email],\r\n      subject: \"üî¥ Pagamento Falhou\",\r\n      html: `<html><body><h1>O pagamento falhou üò¢</h1><p>Atualize seu cart√£o para evitar bloqueio.</p><a href=\"${appUrl}/planos\">Atualizar Cart√£o</a></body></html>`\r\n    });\r\n  } catch (e: any) { logStep(\"ERROR fail email\", { error: e.message }); }\r\n}\r\n\r\nasync function sendRecoveryEmail(resend: any, email: string) {\r\n  const checkoutUrl = \"https://buy.stripe.com/8x26oIgGuej656zaAY8so05\";\r\n  try {\r\n    await resend.emails.send({\r\n      from: Deno.env.get(\"RESEND_FROM_EMAIL\") || \"Canva Viagem <lucas@rochadigitalmidia.com.br>\",\r\n      to: [email],\r\n      subject: \"üõí Voc√™ esqueceu algo...\",\r\n      html: `<html><body><h1>Voc√™ esqueceu algo...</h1><p>Finalize sua compra do Canva Viagens.</p><a href=\"${checkoutUrl}\">Finalizar Compra</a></body></html>`\r\n    });\r\n  } catch (e: any) { logStep(\"ERROR recovery email\", { error: e.message }); }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\supabase\\functions\\trigger-zaia-welcome\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\supabase\\functions\\verify-magic-link\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\tailwind.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\win 10\\Downloads\\canvaviagem-main (4)\\canvaviagem-main\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]